function inGameCheck(){return 1==$("section.top-bar-section > ul.foundation-right").length}function GetCurrentDay(){var a=/\d+/gim.exec($("#userMenu div div.panel.callout b:eq(2)").html());return a?parseInt(a[0]):0}function itsOrgAccount(){return 1==parseInt($("#actualXp").html())}function createCheckBox(a,b,c){var d=$("<div></div>"),e=$.jStorage.get(b,c)?"checked='checked'":"";return d.append("<input class='configCheckbox' type='checkbox' "+e+" />"),d.children("input").bind("change",function(){$.jStorage.set(b,"checked"==$(this).attr("checked"))}),d.append("<span class='configLabelCheckbox'>"+a+"</span>"),d.children("span").bind("click",function(){d.children("input").click(),d.children("input").change()}),d}function createInputText(a,b,c,d){var e=$("<div></div>");return e.append("<span class='configLabelInputText'>"+a+"</span>"),e.append("<input class='configInputText' type='text' value='"+$.jStorage.get(b,c)+"' />"),e.children("input").bind("keyup change",function(){"number"==d&&$(this).attr("value",$(this).attr("value").replace(/[^\d,]/g,"")),""!=$(this).attr("value")&&$.jStorage.set(b,$(this).attr("value"))}),e}function createSelect(a,b,c,d){var e=$("<div></div>");e.append("<span class='configLabelSelect'>"+a+"</span>"),e.append('<select class="configSelect"></select>');for(var f in d){var g=$.jStorage.get(b,c)==d[f]?"selected ":"";e.children("select").append("<option "+g+'value="'+d[f]+'">'+f+"</option>")}return e.children("select").bind("change",function(){$.jStorage.set(b,parseInt($(this).attr("value")))}),e}function IDByImageCountry(a){switch(a){case Benin:return 85;case PapuaNewGuinea:return 146;case Angola:return 65;case Cambodia:return 119;case Sudan:return 77;case EastTimor:return 159;case Paraguay:return 123;case Kazakhstan:return 128;case Portugal:return 18;case Syria:return 111;case Bahamas:return 160;case SolomonIslands:return 161;case NorthKorea:return 163;case Greece:return 14;case Latvia:return 20;case Mongolia:return 145;case Iran:return 30;case Morocco:return 72;case Mali:return 94;case Panama:return 143;case Guatemala:return 127;case Guyana:return 140;case Iraq:return 112;case Chile:return 45;case Laos:return 135;case Nepal:return 120;case TheGambia:return 117;case Argentina:return 24;case Ukraine:return 16;case Tanzania:return 78;case Ghana:return 69;case Zambia:return 82;case Belize:return 157;case Bahrain:return 154;case Congo:return 87;case India:return 34;case Canada:return 27;case Turkey:return 22;case Belgium:return 40;case Namibia:return 101;case Taiwan:return 32;case Finland:return 37;case SouthAfrica:return 76;case CentralAfricanRepublic:return 88;case Georgia:return 133;case Jamaica:return 151;case Peru:return 44;case Turkmenistan:return 137;case Germany:return 3;case Yemen:return 61;case Eritrea:return 90;case PuertoRico:return 149;case Guinea:return 96;case Chad:return 92;case Somalia:return 106;case Madagascar:return 104;case IvoryCoast:return 67;case Thailand:return 63;case Libya:return 71;case EquatorialGuinea:return 100;case CostaRica:return 144;case Adminland:return 777;case Sweden:return 17;case Vietnam:return 60;case Malawi:return 105;case Poland:return 1;case Bulgaria:return 10;case Nigeria:return 74;case Jordan:return 115;case Kuwait:return 155;case Tunisia:return 80;case Croatia:return 12;case USA:return 26;case Uruguay:return 124;case SriLanka:return 129;case UnitedKingdom:return 6;case UnitedArabEmirates:return 110;case Kenya:return 70;case Switzerland:return 39;case Spain:return 5;case Djibouti:return 107;case Lebanon:return 148;case Venezuela:return 56;case Liberia:return 99;case Azerbaijan:return 132;case Cuba:return 147;case CzechRepublic:return 51;case BurkinaFaso:return 86;case Mauritania:return 95;case Swaziland:return 103;case RepublicOfMacedonia:return 15;case Israel:return 33;case Australia:return 35;case DROfTheCongo:return 89;case Tajikistan:return 136;case Estonia:return 53;case Myanmar:return 162;case Cameroon:return 66;case Cyprus:return 156;case Malaysia:return 42;case Oman:return 113;case Iceland:return 165;case Armenia:return 131;case Gabon:return 91;case SouthKorea:return 31;case Austria:return 48;case Mozambique:return 73;case ElSalvador:return 152;case Brazil:return 23;case Algeria:return 64;case Slovenia:return 21;case Lesotho:return 102;case Colombia:return 46;case WesternSahara:return 116;case Ecuador:return 122;case Hungary:return 8;case SouthSudan:return 118;case Japan:return 58;case Moldova:return 150;case Belarus:return 52;case Albania:return 55;case NewZealand:return 139;case Vanuatu:return 166;case Senegal:return 75;case GuineaBissau:return 97;case Italy:return 7;case Honduras:return 125;case Ethiopia:return 68;case Haiti:return 153;case Burundi:return 109;case Afghanistan:return 130;case Egypt:return 57;case SierraLeone:return 98;case Bolivia:return 121;case Russia:return 2;case SaudiArabia:return 62;case Netherlands:return 36;case Pakistan:return 41;case Kosovo:return 158;case China:return 28;case Ireland:return 38;case Qatar:return 114;case Slovakia:return 49;case France:return 4;case Serbia:return 11;case Lithuania:return 19;case BosniaAndHerzegovina:return 13;case Kyrgyzstan:return 134;case Bhutan:return 164;case Romania:return 9;case Togo:return 79;case Niger:return 93;case Philippines:return 54;case Rwanda:return 108;case Uzbekistan:return 138;case Bangladesh:return 59;case Nicaragua:return 142;case Norway:return 43;case Botswana:return 84;case Denmark:return 50;case DominicanRepublic:return 126;case Mexico:return 25;case Uganda:return 81;case Zimbabwe:return 83;case Suriname:return 141;case Montenegro:return 47;case Indonesia:return 29;default:return 0}}function IDbyCC(a){switch(String(a)){case"BJ":return 85;case"PGK":return 146;case"AOA":return 65;case"KHR":return 119;case"SDG":return 77;case"TLD":return 159;case"PYG":return 123;case"KZT":return 128;case"PTE":return 18;case"SYP":return 111;case"BSD":return 160;case"SBD":return 161;case"KPW":return 163;case"GRD":return 14;case"LVL":return 20;case"MNT":return 145;case"IRR":return 30;case"MAD":return 72;case"ML":return 94;case"PAB":return 143;case"GTQ":return 127;case"GYT":return 140;case"IQD":return 112;case"CLP":return 45;case"LAK":return 135;case"NPR":return 120;case"GMD":return 117;case"ARS":return 24;case"UAH":return 16;case"TZS":return 78;case"GHS":return 69;case"ZMW":return 82;case"BZD":return 157;case"BHD":return 154;case"CG":return 87;case"INR":return 34;case"CAD":return 27;case"TRY":return 22;case"BEF":return 40;case"NAD":return 101;case"TWD":return 32;case"FIM":return 37;case"ZAR":return 76;case"CF":return 88;case"GEL":return 133;case"JMD":return 151;case"PEN":return 44;case"TMT":return 137;case"DEM":return 3;case"YER":return 61;case"ERN":return 90;case"PRD":return 149;case"GNF":return 96;case"TD":return 92;case"SOS":return 106;case"MGA":return 104;case"CI":return 67;case"THB":return 63;case"LYD":return 71;case"GQ":return 100;case"CRC":return 144;case"undefined":return 777;case"SEK":return 17;case"VND":return 60;case"MWK":return 105;case"PLN":return 1;case"BGN":return 10;case"NGN":return 74;case"JOD":return 115;case"KWD":return 155;case"TND":return 80;case"HRK":return 12;case"USD":return 26;case"UYU":return 124;case"LKR":return 129;case"GBP":return 6;case"AED":return 110;case"KES":return 70;case"CHF":return 39;case"ESP":return 5;case"DJF":return 107;case"LBP":return 148;case"VEF":return 56;case"LRD":return 99;case"AZN":return 132;case"CUC":return 147;case"CZK":return 51;case"BF":return 86;case"MRO":return 95;case"SZL":return 103;case"MKD":return 15;case"NIS":return 33;case"AUD":return 35;case"CDF":return 89;case"TJS":return 136;case"EEK":return 53;case"MMK":return 162;case"CM":return 66;case"CY":return 156;case"MYR":return 42;case"OMR":return 113;case"ISK":return 165;case"AMD":return 131;case"GA":return 91;case"KRW":return 31;case"ATS":return 48;case"MZN":return 73;case"SVD":return 152;case"BRL":return 23;case"DZD":return 64;case"SIT":return 21;case"LSL":return 102;case"COP":return 46;case"EH":return 116;case"ECD":return 122;case"HUF":return 8;case"SSP":return 118;case"JPY":return 58;case"MDL":return 150;case"BYR":return 52;case"ALL":return 55;case"NZD":return 139;case"VUT":return 166;case"SN":return 75;case"GW":return 97;case"ITL":return 7;case"HNL":return 125;case"ETB":return 68;case"HTG":return 153;case"BIF":return 109;case"AFN":return 130;case"EGP":return 57;case"SLL":return 98;case"BOB":return 121;case"RUB":return 2;case"SAR":return 62;case"NLG":return 36;case"PKR":return 41;case"XKD":return 158;case"CNY":return 28;case"IEP":return 38;case"QAR":return 114;case"SKK":return 49;case"FRF":return 4;case"RSD":return 11;case"LTL":return 19;case"BAM":return 13;case"KGS":return 134;case"BTN":return 164;case"RON":return 9;case"TG":return 79;case"NE":return 93;case"PHP":return 54;case"RWF":return 108;case"UZS":return 138;case"BDT":return 59;case"NIO":return 142;case"NOK":return 43;case"BWP":return 84;case"DKK":return 50;case"DOP":return 126;case"MXN":return 25;case"UGX":return 81;case"ZWL":return 83;case"SRD":return 141;case"MEP":return 47;case"IDR":return 29;default:return 0}}function LangByCC(a){switch(String(a)){case UnitedKingdom:return"en";case Albania:return"sq";case Egypt:return"ar";case Armenia:return"am";case Bangladesh:return"bd";case BosniaAndHerzegovina:return"bs";case Brazil:return"pt";case Bulgaria:return"bg";case China:return"zh";case Croatia:return"hr";case CzechRepublic:return"cs";case Netherlands:return"nl";case Estonia:return"et";case Philippines:return"fil";case France:return"fr";case Georgia:return"ka";case Germany:return"de";case Greece:return"el";case Israel:return"he";case Hungary:return"hu";case Indonesia:return"id";case Italy:return"it";case Latvia:return"lv";case Lithuania:return"lt";case RepublicOfMacedonia:return"mk";case Montenegro:return"me";case Iran:return"fa";case Poland:return"pl";case Portugal:return"pt";case Romania:return"ro";case Russia:return"ru";case Serbia:return"sr";case Slovakia:return"sk";case Slovenia:return"sl";case Spain:return"es";case Sweden:return"sv";case Taiwan:return"zh";case Turkey:return"tr";case Ukraine:return"uk";case Vietnam:return"vi";case Azerbaijan:return"az";case Denmark:return"da";case Finland:return"fi";case India:return"hi";case Japan:return"ja";case Cambodia:return"km";case SouthKorea:return"ko";case Malaysia:return"my";case Mongolia:return"mn";case Nepal:return"ne";case Norway:return"no";case Poland:return"szl";case Thailand:return"th";default:return 0}}function ImgSrcFix(){$("img").each(function(){void 0!=$(this).attr("src")&&($(this).attr("src").indexOf("//cdn.e-sim.org//",0)>=0&&$(this).attr("src",$(this).attr("src").replace("//cdn.e-sim.org//","//cdn.e-sim.org/")),$(this).attr("src").indexOf("https://cdn.e-sim.org:8080/",0)>=0&&$(this).attr("src",$(this).attr("src").replace("https://cdn.e-sim.org:8080/","http://cdn.e-sim.org/")))}),$("image").each(function(){void 0!=$(this).attr("href")&&$(this).attr("href").indexOf("https://cdn.e-sim.org:8080/",0)>=0&&$(this).attr("href",$(this).attr("href").replace("https://cdn.e-sim.org:8080/","http://cdn.e-sim.org/"))}),window.setTimeout(ImgSrcFix,2e3)}function ScriptAndStyleSrcFix(){$("script").each(function(){void 0!=$(this).attr("src")&&$(this).attr("src").indexOf("//cdn.e-sim.org//",0)>=0&&$(this).attr("src",$(this).attr("src").replace("//cdn.e-sim.org//","//cdn.e-sim.org/"))}),$("link[type*=css]").each(function(){void 0!=$(this).attr("href")&&$(this).attr("href").indexOf("//cdn.e-sim.org//",0)>=0&&$(this).attr("href",$(this).attr("href").replace("//cdn.e-sim.org//","//cdn.e-sim.org/"))})}function getUrlVars(){var a={};window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(b,c,d){a[c]=d});return a}function Main(){if(1==$("#userMenu > div > form > button > img").length){var a=/flags\/small\/(\S+).png/.exec($("#userMenu > div > form > button > img").attr("src"))[1];lang=LangByCC(a)}$('<a id="SGSettingsButton" class="button foundation-style" title="Shadow Government Settings" href="editCitizen.html?Settings"><i class="icon-star"></i>SG Settings</a><br>').insertBefore($(".foundation-right.hidden-overflow > div:first > a:last")),$("#SGSettingsButton").click(function(){return $.blockUI({message:$("#WrapperMainConfig"),css:{top:"48px",left:"50%",right:"",margin:"0px 0px 0px -300px",width:"600px",border:"0px",position:"absolute",textAlign:"left",cursor:"default"},onOverlayClick:$.unblockUI}),!1}),$('<div id="WrapperMainConfig" style="display:none;"><center><h1>Shadow Government Settings</h1></center><p style="clear: both"></p><br><ul id="MainConfigMenu"></ul><div id="MainConfigBody"></div></div>').appendTo($("body")),$('<button id="CloseWrapperMainConfig" style="position: absolute; top: 0.25em; right: 0.25em; padding: 0.3em !important; " href="#" class="foundation-style closeDropdown profileButton">×</button>').appendTo($("#WrapperMainConfig > center > h1")),$("#CloseWrapperMainConfig").click(function(){$.unblockUI()}),$("<li>Two Click</li>").appendTo($("#MainConfigMenu"));var b=$("<div></div>").appendTo($("#MainConfigBody")),c=createCheckBox("Two Click Auto","SGTwoClick",!1);b.append(c);var d=createInputText("Two Click Login: ","SGTwoClickLogin","","login");b.append(d);var e=createInputText("Two Click Password: ","SGTwoClickPassword","","passwd");b.append(e),$("<li>Spectator</li>").appendTo($("#MainConfigMenu"));var f=$("<div></div>").appendTo($("#MainConfigBody")),g=createCheckBox("Custom Spectator","SGSpectatorMode",!0);f.append(g);var h=createInputText("Timer Spectator: ","SGTimerSpectator",7e3,"number");f.append(h);var i=createInputText("Fake User ID: ","SGFakeUserID",1,"number");f.append(i);var j=createInputText("Fake Citizenship ID: ","SGFakeCitizenshipID",1,"number");f.append(j);var k=createCheckBox("Fake Spectator Focus","SGFakeSpectatorFocus",!1);f.append(k),$("<li>Motivator</li>").appendTo($("#MainConfigMenu"));var l=$("<div></div>").appendTo($("#MainConfigBody")),m=createCheckBox("Easy Motivator","SGMotivationMode",!0);l.append(m);var n=createSelect("Auto Motivator: ","SGAutoMotivateType",0,{disabed:0,weapons:1,breads:2,gifts:3});l.append(n),$("<li>Demoralizator</li>").appendTo($("#MainConfigMenu"));var o=$("<div></div>").appendTo($("#MainConfigBody")),p=createCheckBox("Demoralizator","SGDemoralizatorMode",!1);o.append(p);var q=createInputText("Dem. Timer Spectator: ","SGDemoralizatorTimerSpectator",1e4,"number");o.append(q);var r=createInputText("Dem. Fake User Count: ","SGDemoralizatorFakeUserIDCount",10,"number");o.append(r);var s=createInputText("Dem. Fake Citizenship ID: ","SGDemoralizatorFakeCitizenshipID",2,"number");o.append(s),$("<li>Equipment</li>").appendTo($("#MainConfigMenu"));var t=$("<div></div>").appendTo($("#MainConfigBody")),u=createCheckBox("Equipment Fast Link","SGEquipmentFastMode",!0);t.append(u),$("<li>Logs</li>").appendTo($("#MainConfigMenu"));var v=$("<div></div>").appendTo($("#MainConfigBody")),w=createCheckBox("MU Donations Log","SGMUDonationsLogMode",!1);v.append(w);var x=createCheckBox("Player Transaction Log","SGTransactionLogMode",!1);v.append(x),$("<li>Market</li>").appendTo($("#MainConfigMenu"));var y=$("<div></div>").appendTo($("#MainConfigBody")),z=createCheckBox("Change Product Market Table","SGChangeProductMarketTable",!0);y.append(z);var A=createCheckBox("Display Gold Value","SGDisplayGoldValue",!0);y.append(A),$("<li>Market Offers</li>").appendTo($("#MainConfigMenu"));var B=$("<div></div>").appendTo($("#MainConfigBody")),C=createCheckBox("Change Market Offers","SGChangeMarketOffers",!0);B.append(C);var D=createCheckBox("Edit Offers","SGEditOffers",!0);B.append(D),$("<li>Monetary Market</li>").appendTo($("#MainConfigMenu"));var E=$("<div></div>").appendTo($("#MainConfigBody")),F=createCheckBox("Change Monetary Market Table","SGChangeMonetaryMarketTable",!0);E.append(F);var G=createCheckBox("Monetary Market Price Edit","SGMonetaryMarketPriceEdit",!0);E.append(G);var H=createCheckBox("Monetary Market Price Ratio","SGMonetaryMarketPriceRatio",!0);E.append(H),$("<li>Battle Page</li>").appendTo($("#MainConfigMenu"));var I=$("<div></div>").appendTo($("#MainConfigBody")),J=createCheckBox("Battle Stats Minimize Mode","SGBattleStatsMinimizeMode",!0);I.append(J);var K=createSelect("Modal Window Func Mode: ","SGModalWindowFuncMode",1,{disabed:0,modal:1,block:2});I.append(K),$("<li>Military Unit</li>").appendTo($("#MainConfigMenu"));var L=$("<div></div>").appendTo($("#MainConfigBody")),M=createCheckBox("MU Broadcast Message","SGMUBroadcastMsg",!0);L.append(M);var N=createCheckBox("MU Text Storage","SGMUTextStorageMode",!0);L.append(N),$("<li>Companies</li>").appendTo($("#MainConfigMenu"));var O=$("<div></div>").appendTo($("#MainConfigBody")),M=createCheckBox("Company Redesign","SGCompanyRedesignMode",!0);O.append(M);var N=createCheckBox("Company Work Results","SGCompanyWorkResultsMode",!0);O.append(N);var P=createCheckBox("SGCompany All Workers Redesign","SGCompanyAllWorkersMode",!0);O.append(P),$("<li>Other Fix</li>").appendTo($("#MainConfigMenu"));var Q=$("<div></div>").appendTo($("#MainConfigBody")),R=createCheckBox("Img Src Fix","SGImgSrcFixMode",!1);Q.append(R);var S=createCheckBox("Script And Style Src Fix","SGScriptAndStyleSrcFixMode",!1);Q.append(S),$("#WrapperMainConfig").lightTabs()}function CreateSpectatorsBlock(){$("#battleStats").append('<div class="foundation-style small-10 columns"><div class="foundation-style small-5 columns"><b>Total defenders online:</b><i id="totaldefenders" style="display: inline;">0</i> <a style="font-size: 11px;" href="" id="defendersLink">Show details</a> <a style="font-size: 11px; display: none;" href="" id="defendersLinkHide">Hide details</a> <br><div align="center" id="defendersMenu" style="font-size: 11px; text-align: center; padding: 1em; margin: auto; display: none;">No one <br> </div></div><div class="foundation-style small-5 columns"><b>Total attackers online:</b><i id="totalattackers" style="display: inline;">0</i> <a style="font-size: 11px;" href="" id="attackersLink">Show details</a> <a style="font-size: 11px;  display: none;" href="" id="attackersLinkHide">Hide details</a> <br><div align="center" id="attackersMenu" style="font-size: 11px; text-align: center; padding: 1em; margin: auto; display: none;">No one <br> </div></div>'),$("#battleStats").append('<div class="foundation-style small-10 columns"><b>Total spectators online:</b><i id="totalspectators" style="display: inline;">0</i> <a style="font-size: 11px;" href="" id="spectatorsLink">Show details</a> <a style="font-size: 11px; display: none;" href="" id="spectatorsLinkHide">Hide details</a> <br><div align="center" id="spectatorsMenu" style="font-size: 11px; text-align: center; padding: 1em; margin: auto; display: none;">No one <br> </div>  </div>'),$("#spectatorsLink").click(function(){return $("#spectatorsLink").fadeOut("fast",function(){$("#spectatorsLinkHide").fadeIn("fast"),$("#spectatorsMenu").fadeIn("fast")}),!1}),$("#spectatorsLinkHide").click(function(){return $("#spectatorsLinkHide").fadeOut("fast",function(){$("#spectatorsLink").fadeIn("fast"),$("#spectatorsMenu").fadeOut("fast")}),!1}),$("#attackersLink").click(function(){return $("#attackersLink").fadeOut("fast",function(){$("#attackersLinkHide").fadeIn("fast"),$("#attackersMenu").fadeIn("fast")}),!1}),$("#attackersLinkHide").click(function(){return $("#attackersLinkHide").fadeOut("fast",function(){$("#attackersLink").fadeIn("fast"),$("#attackersMenu").fadeOut("fast")}),!1}),$("#defendersLink").click(function(){return $("#defendersLink").fadeOut("fast",function(){$("#defendersLinkHide").fadeIn("fast"),$("#defendersMenu").fadeIn("fast")}),!1}),$("#defendersLinkHide").click(function(){return $("#defendersLinkHide").fadeOut("fast",function(){$("#defendersLink").fadeIn("fast"),$("#defendersMenu").fadeOut("fast")}),!1})}function sendUpdateRequestSpectator(){var a=$.jStorage.get("SGFakeUserID",1),b=$.jStorage.get("SGFakeCitizenshipID",1),c=$.jStorage.get("SGTimerSpectator",7e3);if(hasFocus||!$.jStorage.get("SGFakeSpectatorFocus",!1)){!hasFocus&&!$.jStorage.get("SGFakeSpectatorFocus",!1)&&c<7e3&&(c=7e3);var d="id="+$("#battleRoundId").val()+"&at="+a+"&ci="+b+"&premium=1";$.ajax({type:"GET",url:"battleScore.html",data:d,dataType:"json",success:function(a){updateStatus(a.attackerScore,a.defenderScore,a.remainingTimeInSeconds,a.percentAttackers),updateBattleHeros(a.topAttackers,a.topDefenders),updateTop10(a.top10Attackers,a.top10Defenders),updateBattleMonitor(a);for(var b=0;b<a.recentAttackers.length;b++)if(a.recentAttackers[b].id==latestAttackerId){a.recentAttackers=a.recentAttackers.slice(0,b);break}for(var b=0;b<a.recentDefenders.length;b++)if(a.recentDefenders[b].id==latestDefenderId){a.recentDefenders=a.recentDefenders.slice(0,b);break}0!=a.recentAttackers.length&&(latestAttackerId=a.recentAttackers[0].id,attackerHits=a.recentAttackers),0!=a.recentDefenders.length&&(latestDefenderId=a.recentDefenders[0].id,defenderHits=a.recentDefenders),window.setTimeout(sendUpdateRequestSpectator,c)}})}}function FakeSpectatorFunc(){continueThread=!1,sendUpdateRequestSpectator()}function EasyMotivation(){var a=GetMotivateToday(),b=$(".dataTable tr:eq(1) > td:first a.profileLink");1==b.length&&NewestCitizen(b.attr("href").replace("profile.html?id=","")),BruteForceCitizenForm(),$(".dataTable ul.button.foundation-center.foundation-style-group li a.foundation-style.button.small.help i.icon-cupcake").parent().parent().toggle(),$('<span>Today motivate count: <b id="countMotivationToday">0</b><span>').insertAfter("#newCitizenStatsForm"),$("#countMotivationToday").html(a.count),$("table.dataTable tr:not(:first)").each(function(a,b){if($(this).children("td").children("i.icon-uniF478").length>0){var c=$(this).children("td:first").children(".profileLink").attr("href").replace("profile.html?id=","");1==$(this).children("td:eq(4)").children("i.icon-uniF478").length&&($(this).children("td:eq(4)").empty(),$(this).children("td:eq(4)").append('<i id="motivate-weapons-'+c+'" class="motivate-element motivate-weapons icon-tank" value="'+c+'"></i>')),1==$(this).children("td:eq(5)").children("i.icon-uniF478").length&&($(this).children("td:eq(5)").empty(),$(this).children("td:eq(5)").append('<i id="motivate-breads-'+c+'" class="motivate-element motivate-breads icon-bread" value="'+c+'"></i>')),1==$(this).children("td:eq(6)").children("i.icon-uniF478").length&&($(this).children("td:eq(6)").empty(),$(this).children("td:eq(6)").append('<i id="motivate-gifts-'+c+'" class="motivate-element motivate-gifts icon-gift" value="'+c+'"></i>'))}return!0}),$(".motivate-element").click(function(){var a=0;$(this).hasClass("motivate-weapons")?a=1:$(this).hasClass("motivate-breads")?a=2:$(this).hasClass("motivate-gifts")&&(a=3);var c=($(this).parent(),$(this).attr("value")),d="type="+a+"&id="+c;$.ajax({type:"POST",url:"motivateCitizen.html?id="+c,data:d,dataType:"json",error:AutoMotivateResponse})})}function BruteForceCitizenForm(){$('<br><br><b>Bruteforce motivate by user id</b>:<br><input id="BruteforceCitizenNuber" class="foundation-style" type="text" name="BruteforceCitizenNuber" placeholder="Enter User ID"><select id="BruteforceMotivateType" class="configSelect"><option selected="" value="1">weapons</option><option value="2">breads</option><option value="3">gifts</option></select><button id="BruteforceCitizenButton" class="postfix only-icon button foundation-style" style="width: 40px;" type="button"><i class="icon-muffin"></i></button>').insertAfter("#newCitizenStatsForm");var a=$("#BruteforceCitizenNuber"),b=$("#BruteforceCitizenButton"),c=$("#BruteforceMotivateType");a.val($.jStorage.get("SGMotivateTopCitizen",0)),b.click(function(){var b=parseInt(a.val()),d=parseInt(c.val()),e="type="+d+"&id="+b,f=GetMotivateToday();if(f.count>=5||!checkStorageMotivation(d)||itsOrgAccount()){if(itsOrgAccount()){var g=NotifyMotivateTemp;g=g.replace("{1}","error_motivated"),g=g.replace("{2}","Motivate Notification"),g=g.replace("{3}","It's Org account"),MotivateNotify(g)}if(!checkStorageMotivation(d)){var g=NotifyMotivateTemp;g=g.replace("{1}","error_motivated"),g=g.replace("{2}","Motivate Notification"),g=g.replace("{3}","Don't have supply for motivate"),MotivateNotify(g)}if(f.count>=5){var g=NotifyMotivateTemp;g=g.replace("{1}","error_motivated"),g=g.replace("{2}","Motivate Notification"),g=g.replace("{3}","Motivate limit: 5"),MotivateNotify(g)}return!1}for(;f.count<5;){var e="type="+d+"&id="+b;$.ajax({type:"POST",async:!1,url:"motivateCitizen.html?id="+b,data:e,dataType:"json",error:AutoMotivateResponse}),b--,f=GetMotivateToday()}})}function NewestCitizen(a){$.jStorage.get("SGMotivateTopCitizen",0)<a&&$.jStorage.set("SGMotivateTopCitizen",a)}function GetMotivateToday(){var a=GetCurrentDay(),b={day:a,count:0};return JSON.parse($.jStorage.get("SGMotivateCountToday",JSON.stringify(b))).day==a?JSON.parse($.jStorage.get("SGMotivateCountToday",JSON.stringify(b))):b}function UpdateMotivateToday(){var a=GetMotivateToday();a.count++,$.jStorage.set("SGMotivateCountToday",JSON.stringify(a)),$("#MotivationCount").html(a.count)}function MotivateNotify(a){$.blockUI({message:a,fadeIn:700,fadeOut:700,timeout:2e3,showOverlay:!1,centerY:!1,css:{width:"350px",top:"50px",left:"",right:"10px",border:"none",padding:"5px",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px",opacity:.9,color:"#fff"}})}function AutoMotivateResponse(a,b,c){var d=localUrl.indexOf(URLNewCitizen,0)>=0,e=/type=(\d)&id=(\d+)/gim.exec($(this)[0].data),f=parseInt(e[1]),g=parseInt(e[2]),h=["none","weapons","breads","gifts"],i=$(a.responseText),j=a.getResponseHeader("TM-finalURLdhdg"),k=NotifyMotivateTemp;if(j){var l=/citizenMessage=(\S+)/gim.exec(j);if(l&&"SUCCESFULLY_MOTIVATED"==l[1]){if(d){var m=$("#motivate-"+h[f]+"-"+g).parent();m.empty(),m.append('<i title="Мотивация прошла успешно" style="color: #0c0; font-size: 1.25em; text-shadow: 0 0 0" class="icon-uniF479"></i>')}k=k.replace("{1}","succesfully_motivated"),k=k.replace("{2}","Motivate Notification"),k=k.replace("{3}","Succesfully motivated"),MotivateNotify(k),UpdateMotivateToday()}else l&&(d&&$("#motivate-"+h[f]+"-"+g).attr("title","Error: "+l[1]),k=k.replace("{1}","error_motivated"),k=k.replace("{2}","Motivate Notification"),k=k.replace("{3}",l[1]),MotivateNotify(k))}else{d&&$("#motivate-"+h[f]+"-"+g).css({color:"#c00"});var n=i.find("div.foundation-style.small-8 > div:eq(1)");if(n.hasClass("testDivred")||n.hasClass("testDivblue")){var o=$.trim(n.text());if(void 0!=SentManyMotivationsToday[lang]){if(RegExp(SentManyMotivationsToday[lang],"gim").exec(o)){var p=GetMotivateToday();p.count=5,$.jStorage.set("SGMotivateCountToday",JSON.stringify(p)),$("#MotivationCount").html(p.count),d&&$("#countMotivationToday").html(p.count)}}else if(void 0!=succesfullyMotivated[lang]){if(RegExp(succesfullyMotivated[lang],"gim").exec(o)){var p=GetMotivateToday();p.count++,$.jStorage.set("SGMotivateCountToday",JSON.stringify(p)),$("#MotivationCount").html(p.count),d&&$("#countMotivationToday").html(p.count)}}else RegExp(YouAlreadySentPackageThisCitizenToday[lang],"gim").exec(o)||RegExp(CitizenReceivedManyMotivationsToday[lang],"gim").exec(o)||RegExp(CitizenReceivedEveryKindMotivationPackageToday[lang],"gim").exec(o)||RegExp(YouDontHaveEnoughItems[lang],"gim").exec(o);k=k.replace("{1}","error_motivated"),k=k.replace("{2}","Motivate Notification"),k=k.replace("{3}",o),MotivateNotify(k)}else k=k.replace("{1}","error_motivated"),k=k.replace("{2}","Motivate Notification"),k=k.replace("{3}","Unknown error"),MotivateNotify(k)}i.remove()}function GetUserStorage(){var a={};return $.ajax({type:"GET",url:URLUserStorage+"?storageType=PRODUCT",async:!1,success:function(b){$(b).find("#storageProductsTab .storage").each(function(){var b=parseInt($.trim($(this).children("div:first").text())),c=/\/(\w+)\.png/gim.exec($(this).children("div:eq(1)").children("img:first").attr("src"))[1],d=0;$(this).children("div:eq(1)").children("img").length>1&&(d=parseInt(/\/q(\d)\.png/gim.exec($(this).children("div:eq(1)").children("img:eq(1)").attr("src"))[1])),void 0===a[c]&&(a[c]={}),a[c][d]=b})}}),a}function checkStorageMotivation(a){void 0===a&&(a=$.jStorage.get("SGAutoMotivateType",0));var b=GetUserStorage();return 1==a&&"object"==typeof b.Weapon&&b.Weapon[1]>=3||(2==a&&"object"==typeof b.Food&&b.Food[3]>=2||3==a&&"object"==typeof b.Gift&&b.Gift[3]>=1)}function AutoMotivate(){var a=6e4,c=(GetCurrentDay(),GetMotivateToday());return 1==$("#MotivationCount").length?$("#MotivationCount").html(c.count):$('<b>Motivation Today:</b><b id="MotivationCount">'+c.count+"</b>").insertAfter("#actualHealth + br"),!(c.count>=5||!checkStorageMotivation()||itsOrgAccount())&&($.ajax({url:URLNewCitizen}).done(function(a,b,c){var d=$.jStorage.get("SGAutoMotivateType",0);$(c.responseText).find("table.dataTable  tr:not(:first)").each(function(){if($(this).find("td:eq("+(3+d)+") i.icon-uniF478").length>0){var a=$(this).find("td:first a").attr("href").replace(/.*?id=/,""),b="type="+d+"&id="+a;$.ajax({type:"POST",url:"motivateCitizen.html?id="+a,data:b,dataType:"json",error:AutoMotivateResponse})}})}),void window.setTimeout(AutoMotivate,a))}function sendUpdateRequestSpectatorFake(a,b){var c="id="+$("#battleRoundId").val()+"&at="+a+"&ci="+b+"&premium=1";$.ajax({type:"GET",url:"battleScore.html",data:c,dataType:"json"})}function DemoralizatorFunc(){function d(){for(n=0;n<a;)setTimeout(sendUpdateRequestSpectatorFake,(n+1)*(c/a),n+1,b),n++}var a=$.jStorage.get("SGDemoralizatorFakeUserIDCount",10),b=$.jStorage.get("SGDemoralizatorFakeCitizenshipID",2),c=$.jStorage.get("SGDemoralizatorTimerSpectator",1e4);window.setInterval(d,c)}function EquipmentFastMode(){$('#equipmentTable > table.dataTable tr > td[id ^="cell"]').each(function(a,b){var c=$(b).attr("id").replace(/[^\d,]/g,"");$(b).next().html('<a href="showEquipment.html?id='+c+'">'+$(b).next().html()+"</a>")})}function MUDonationsLog(){function a(b){var c=1==$("#pagination-digg > li.next").length?parseInt($("#pagination-digg > li.next").prev("li").children("a").html()):parseInt($("#pagination-digg > li.next-off").prev("li").html());void 0==b&&(b=1),b<=parseInt(c)&&$.ajax({url:"/militaryUnitDonations.html?page="+b}).done(function(c,d,e){$(e.responseText).find("#userMenu + div table.dataTable.paddedTable tr:not(:first)").insertAfter("#userMenu + script + div table.dataTable.paddedTable tr:last"),b++,a(b)})}$("#pagination-digg")&&$('<li class="FullLog">Full Log</li>').appendTo("#pagination-digg").click(function(){$("#userMenu + script + div table.dataTable.paddedTable tr:not(:first)").remove(),a(1)})}function TransactionLog(){function a(b){var c=/transactionLog\.html\?type=[\w_]+&dayFrom=\d+&dayTo=\d+/.exec(localUrl),d=parseInt(1==$("#pagination-digg > li.next").length?$("#pagination-digg > li.next").prev("li").children("a").html():$("#pagination-digg > li.next-off").prev("li").html());b<=d&&$.ajax({url:"/"+c[0]+"&page="+b}).done(function(c,d,e){$(e.responseText).find("#userMenu + div table.dataTable.paddedTable tr:not(:first)").insertAfter("#userMenu + script + div table.dataTable.paddedTable tr:last"),b++,a(b)})}$("#pagination-digg")&&$('<li class="FullLog">Full Log</li>').appendTo("#pagination-digg").click(function(){$("#userMenu + script + div table.dataTable.paddedTable tr:not(:first)").remove(),a(1)})}function changeProductMarketTable(){$(".dataTable").find("input[type='text']").addClass("inputTextTable");var a=$(".dataTable").find("input[type='submit']").addClass("inputSubmitTable");$(".dataTable").find("input[type='text']").bind("keyup",function(){var a=$(this).parent().parent(),b=parseFloat(a.prev().prev().children(".linkMonetaryMarket").next().text()),c=parseFloat($(this).val());a.prev().children(".inputPrice").text(Math.round(b*c*100)/100)});var b=$("<input class='buyAllSubmit' type='submit' value='All' />");b.bind("click",function(){var a=$(this).parent().parent().prev().prev().prev().text();return $(this).parent().children("input[type='text']").val(a),!1}),b.insertBefore(a);var c=$("<div class='helpFlagMessage'>Click on country flag to open the monetary market (only price column)</div>");
c.insertBefore(".dataTable"),$(".dataTable").addClass("dataTableMod"),$(".dataTable > tbody > tr:first-child > td").addClass("dataTableHeaders");var d=$(".dataTable").find("tr").eq(0).children();d.eq(0).css({width:"70px"}),d.eq(3).text("Price/unit"),$("<td class='dataTableHeaders'>Price</td>").insertAfter(d.eq(3)),$(".dataTable").find("a").each(function(){var a=$(this).parent();a.children(".currencyFlag").next().remove(),a.children(".currencyFlag").addClass("dataTableNameFlag");var b=$("<div class='blockSeller'></div>"),c=a.children("img").eq(1);c.addClass("dataTableSeller"),b.append(c);var d=$("<div class='playerName'></div>").append(a.children(":lt(2)"));if(b.append(d),a.children().length>0){d.css({"margin-top":"3px"}),a.children().eq(0).remove();var e=$("<div class='stockName'></div>").append(a.children().eq(0));b.append(e)}a.append(b);var f=a.next().next(),g=f.children("div");g.addClass("monetaryMarketFlag");var h=URLMonetaryMarket+"?buyerCurrencyId="+IDByImageCountry(g.attr("class").split(" ")[1])+"&sellerCurrencyId=0",i=$("<a class='linkMonetaryMarket' href='"+h+"' target='_blank'></a>");i.insertBefore(g),i.append(g);var j=parseFloat(f.children("b").text()),k=parseInt(parseInt(a.next().text())*j*100)/100,l=f.contents().last().text(),m=$("<td class='totalPriceProductMarket'><b>"+k+"</b> "+l+"</td>");m.insertAfter(f),m.append("<br/ > Total: <div style='display:inline;width:10px' class='inputPrice'>0</div>"+l)})}function displayGoldValue(){var a={},b={};$(".dataTable tr:not(:first)").each(function(){var c=0,d=[],e="",f=IDByImageCountry($(this).find("td:eq(3) div.flags-small").attr("class").split(" ")[1]);void 0!=a[f]?c=a[f]:(e=_MM_C_URL.replace("{1}",f),$.ajax({type:"GET",url:e,async:!1,success:function(b){var d=$(b),e=$(".dataTable",d);e.length>0&&(e=$(e[0]));var g=e[0].rows[1].cells[2].textContent.trim();g=g.substr(g.indexOf("=")+1,g.indexOf("Gold")-g.indexOf("=")-1),c=parseFloat(g),a[f]=c},error:function(a,b,c){},timeout:1e4})),void 0!=b[f]?d=b[f]:(e=_COUNTRY_URL.replace("{1}",f),$.ajax({type:"GET",url:e,async:!1,success:function(a){for(var c=$(".dataTable",$(a))[1],e=1;e<c.rows.length;e++){var g=c.rows[e];d[e-1]={name:c.rows[e].cells[0].innerHTML.toUpperCase().trim(),value:parseFloat(g.cells[2].innerHTML.toUpperCase().replace("&NBSP;","").replace("&NBSP;","").trim())+parseFloat(g.cells[1].innerHTML.toUpperCase().replace("&NBSP;","").replace("&NBSP;","").trim())}}b[f]=d},error:function(a,b,c){},timeout:1e4}));var g=parseFloat($(this).find("td:eq(2)").text().trim());if(s=$(this).find("td:eq(3)").text().trim(),s.indexOf("GOLD")<0){var h=parseFloat(s.substr(0,s.indexOf(" ")).trim()),i=Math.round(h*c*1e5)/1e5,k=(Math.round(g*h*1e3)/1e3,Math.round(g*h*c*1e5)/1e5);$(this).find("td:eq(3)").html($(this).find("td:eq(3)").html()+" <br> <img src='http://e-sim.home.pl/testura/img/gold.png'><b>"+i+"</b> GOLD"),$(this).find("td:eq(4)").html(" <b>"+k+"</b> Gold <br/>"+$(this).find("td:eq(4)").html());for(var l=0;l<d.length;l++)if($(this).find("td:eq(0)").html().toUpperCase().indexOf(d[l].name)>=0){$(this).find("td:eq(3)").html($(this).find("td:eq(3)").html()+"<br> <hr class='foundation-divider'>  Price without tax: <b>"+Math.round(parseFloat(h)/(1+parseFloat(d[l].value)/100)*1e5)/1e5+"</b>"),$(this).find("td:eq(3)").html($(this).find("td:eq(3)").html()+" <br> Price(G) without tax: <b>"+Math.round(i/(1+parseFloat(d[l].value)/100)*1e5)/1e5+"</b>");break}}})}function calcValueInGold(a,b){_MM_C_URL=_MM_C_URL.replace("{1}",a),$.get(_MM_C_URL,function(a){try{var c=$(a),d=$(".dataTable",c);d.length>0&&(d=$(d[0]));var e=d[0].rows[1].cells[2].textContent.trim();e=e.substr(e.indexOf("=")+1,e.indexOf("Gold")-e.indexOf("=")-1),_currencyValue=parseFloat(e),b&&b()}catch(a){_currencyValue=0}})}function orderSelect(a){var b=[];a.find("option").each(function(){b.push($(this)),$(this).remove()});var c=new Array(46);c[0]=b[0];for(var d=0,e=0,f=1;f<b.length;f++){var g=b[f].attr("value").split("-");if(2==g.length){var h=parseInt(g[0])-1;"WEAPON"==g[1]?c[1+h]=b[f]:"FOOD"==g[1]?c[6+h]=b[f]:"GIFT"==g[1]?c[11+h]=b[f]:"TICKET"==g[1]?c[16+h]=b[f]:(c[27+e]=b[f],e++)}else c[21+d]=b[f],d++}for(var f=0;f<c.length;f++)c[f]&&a.append(c[f]);a.find("option")[0].selected=!0}function changeSelect(a,b,c,d){var e,f=1;a.find("option").each(function(){if(""!=$(this).attr("value")){var d=$(this).text(),g=d.indexOf("(",0);g!=-1&&(d=d.substr(g+1,d.indexOf(")",g)-g-1),mypatttofindnum=/\d{1,45}/g,d=mypatttofindnum.exec(d));var h=$("<div class='storage productMU'>");h.append("<div>"+d+"</div>");var i=$("<div></div>");h.append(i);var j=$("<div class='storageButton' selectIndex='"+f+"'></div>");j.append(h);var k=$(this).attr("value").split("-");1==k.length?("IRON"==k[0]?i.append("<img src='"+IMGIRON+"' />"):"OIL"==k[0]?i.append("<img src='"+IMGOIL+"' />"):"GRAIN"==k[0]?i.append("<img src='"+IMGGRAIN+"' />"):"DIAMONDS"==k[0]?i.append("<img src='"+IMGDIAMONDS+"' />"):"WOOD"==k[0]?i.append("<img src='"+IMGWOOD+"' />"):"STONE"==k[0]&&i.append("<img src='"+IMGSTONE+"' />"),h.css({height:"67px"}),j.css({margin:"10px 4px 8px 10px"})):(k.length=2)&&("WEAPON"==k[1]?i.append("<img src='"+IMGWEAPON+"' />"):"FOOD"==k[1]?i.append("<img src='"+IMGFOOD+"' />"):"TICKET"==k[1]?i.append("<img src='"+IMGTICKET+"' />"):"GIFT"==k[1]?i.append("<img src='"+IMGGIFT+"' />"):"HOUSE"==k[1]?i.append("<img src='"+IMGHOUSE+"' />"):"DEFENSE_SYSTEM"==k[1]?i.append("<img src='"+IMGDS+"' />"):"HOSPITAL"==k[1]?i.append("<img src='"+IMGHOSPITAL+"' />"):"ESTATE"==k[1]&&i.append("<img src='"+IMGESTATE+"' />"),i.append("<img class='qualityMU' src='"+IMGQUALITY+k[0]+IMGEXTENSION+"' />"),h.css({height:"77px"}),j.css({margin:"6px 4px 2px 10px"})),j.bind("mouseover",function(){e!=$(this).attr("selectIndex")&&$(this).addClass("storageButtonHover")}),j.bind("mouseout",function(){e!=$(this).attr("selectIndex")&&$(this).removeClass("storageButtonHover")}),j.bind("click",function(){if(e==$(this).attr("selectIndex"))$(this).removeClass("storageButtonClick"),$(this).removeClass("storageButtonDblClick"),a.find("option").removeAttr("selected"),e=null,c.val("1");else{if(e){var d=b.find(".storageButton[selectIndex='"+e+"']");d.removeClass("storageButtonClick"),d.removeClass("storageButtonDblClick"),c.val("1")}$(this).removeClass("storageButtonHover"),$(this).removeClass("storageButtonDblClick"),$(this).addClass("storageButtonClick"),e=$(this).attr("selectIndex"),a.find("option").removeAttr("selected"),a.find("option")[e].selected=!0}}),j.bind("dblclick",function(){return $(this).removeClass("storageButtonHover"),$(this).removeClass("storageButtonClick"),$(this).addClass("storageButtonDblClick"),e=$(this).attr("selectIndex"),a.find("option").removeAttr("selected"),a.find("option")[e].selected=!0,c.val($(this).text().trim()),!1}),b.append(j),f++}})}function changeMarketOffers(){var a=$("#resourceInput"),b=$(".storage").parent(),c=$("#quantity"),d=$("#productMarketOfferForm").parent();d.children().first().remove(),d.children().first().remove(),d.addClass("leftDivMyOffers"),b.children().remove(),b.addClass("myOffersProduct"),b.append("One click to select <b>ONE item</b>.<br/>Double click to select <b>ALL items</b>.<br/>");var e=$("#countryInput").parent().parent();e.find("b").eq(0).css({display:"inline"}),e.find("b").eq(1).css({display:"inline"}),$("#countryInput").addClass("customSelectList"),a.addClass("customSelectList"),firstFastButton=!0,c.addClass("quantityMyOffers"),$("#priceInput").addClass("priceInputMyOffers");var f=$("<input class='fastBtn FastButtonLeft' type='button' value='10' />");f.bind("click",function(){firstFastButton?c.attr("value","10"):c.attr("value",parseInt(c.attr("value"))+10),firstFastButton=!1});var g=$("<input class='fastBtn FastButtonLeft' type='button' value='50' />");g.bind("click",function(){firstFastButton?c.attr("value","50"):c.attr("value",parseInt(c.attr("value"))+50),firstFastButton=!1});var h=$("<input class='fastBtn FastButtonRight' type='button' value='100' />");h.bind("click",function(){firstFastButton?c.attr("value","100"):c.attr("value",parseInt(c.attr("value"))+100),firstFastButton=!1});var i=$("<input class='fastBtn FastButtonRight' type='button' value='1K' />");i.bind("click",function(){firstFastButton?c.attr("value","1000"):c.attr("value",parseInt(c.attr("value"))+1e3),firstFastButton=!1}),f.insertBefore(c),g.insertBefore(c),i.insertAfter(c),h.insertAfter(c),orderSelect(a),changeSelect(a,b,c,"#aaaaaa"),$(".storage").bind("click",function(){setTimeout(mySendPreviewRequest,500)}),$("#countryInput").unbind("change"),$("#countryInput").bind("change",function(){mySendPreviewRequest()}),$("#resourceInput").unbind("change"),$("#resourceInput").bind("change",function(){mySendPreviewRequest()}),$("#priceInput").unbind("change"),$("#priceInput").bind("change",function(){mySendPreviewRequest()}),$("#priceInput").bind("keydown",function(){setTimeout(mySendPreviewRequest,1e3)})}function mySendPreviewRequest(){if(isFormCorrect()){var a,b=new String(window.location);b.indexOf(URLMarketOffers,0)>=0?a=$("a[href='pendingCitizenshipApplications.html']").prev():b.indexOf(URLStockProducts,0)>=0&&(a=$("a[href*='stockCompanyAssets.html?id=']").prev().prev().prev().prev().prev().prev());var c=IDByImageCountry(a.attr("class").split(" ")[1]),d="country="+$("#countryInput").val()+"&resource="+$("#resourceInput").val();d+="&price="+$("#priceInput").val()+"&citizenship="+c;var e=$("#resourceInput option:selected").text();$("#preview").html("<div class ='previewMyOffers'>Loading tax resource...</div >"),$.ajax({type:"POST",url:"productTaxes.html",data:d,dataType:"html",success:function(a){var b=$("#preview");b.html(a),b.children(".dataTable").addClass("previewDataTable");var c=$("<div class='resourceMyOffers'>"+e+"</div>"),d=URLMarket+"?resource=",f=$("#resourceInput").val().split("-");d+=1==f.length?f[0]+"&countryId="+$("#countryInput").val():f[1]+"&countryId="+$("#countryInput").val()+"&quality="+f[0],c.append("<br /><a class='textMyOffers' href='"+d+"' target='_blank'>Market</a>"),d=URLMonetaryMarket+"?buyerCurrencyId="+$("#countryInput").val()+"&sellerCurrencyId=0",c.append("  |  <a class='MMMyOffers' href='"+d+"' target='_blank'>MM link</a>");var g=b.find(".currencyFlag").first();g.addClass("flagMyOffer"),b.find(".currencyFlag").remove(),c.insertBefore(b.children().first()),g.insertBefore(b.children("b").first()),b.children("b").addClass("titleMyOffers");var h=b.children(".dataTable").find("tr").eq(0);b.children(".dataTable").find("tr").eq(1).children().css({height:"25px"}),h.children().css({height:"22px"}),h.children().eq(0).text("Gross"),h.children().eq(1).text("Net"),h.children().eq(3).text("Tax")}})}}function editOffers(){$(".dataTable tr").each(function(){$(this).parent().children().index($(this)),$(this).parent().parent().children().index($(this).parent());$.isNumeric($(this).children("td:eq(2)").text())&&$(this).children("td:eq(2)").append("<a class='editQuanty'>Edit</a>"),$(this).children("td:eq(3):contains(.)").append("<a class='editPrice'>Edit</a>")}),$(".editQuanty").click(function(){numberpatt=/\d{1,30}/,Quanty=$(this).parent().text().match(numberpatt);var a=$(this).parent().next(),b=a.children("div"),c=IDByImageCountry(b.attr("class").split(" ")[1]);qPrice=$(this).parent().next().text().match(/\d{1,30}.\d{2}/),productcell=$(this).parent().prev().prev().html(),quality=productcell.match(/q\d/),quality?quality=quality[0].match(/\d/)+"-":quality="",termek=productcell.match(/productIcons\/\D.*.png/),type=termek[0].substr(13),type=type.substr(0,type.length-4),type=type.toUpperCase(),deleteId=$(this).parent().next().next().next().next().next().html().match(/\d{1,60}/),$(this).parent().html("<input id='newQuanty' type='text' value='"+Quanty+"' min='1' style='width: 30px' class='digit quantityMyOffers' name='quantity' id='quantity'><input id='editProductMarketOfferForm' type='button' value='Edit' style='cursor: pointer;'></form>"),$("#editProductMarketOfferForm").click(function(){newQuanty=$("#newQuanty").val(),$(this).parent().html("<img src='"+IMGLOAD+"' >"),$.ajax({type:"POST",url:"/citizenMarketOffers.html",async:!1,data:{id:deleteId[0],action:"DELETE_OFFER"}}),$.ajax({type:"POST",url:"/citizenMarketOffers.html",async:!1,data:{countryId:c,product:quality+type,price:String(qPrice),quantity:newQuanty,action:"POST_OFFER"}}),location.reload()})}),$(".editPrice").click(function(){numberpatt=/\d{1,30}/,Quanty=$(this).parent().prev().text().match(numberpatt);var a=$(this).parent().next(),b=a.children("div"),c=IDByImageCountry(b.attr("class").split(" ")[1]);qPrice=$(this).parent().text().match(/\d{1,30}.\d{2}/),productcell=$(this).parent().prev().prev().prev().html(),quality=productcell.match(/q\d/),quality?quality=quality[0].match(/\d/)+"-":quality="",termek=productcell.match(/productIcons\/\D.*.png/),type=termek[0].substr(13),type=type.substr(0,type.length-4),type=type.toUpperCase(),deleteId=$(this).parent().next().next().next().next().html().match(/\d{1,60}/),$(this).parent().html("<input id='newPrice' type='text' value='"+qPrice+"' min='1' style='width: 30px' class='digit quantityMyOffers' name='quantity' id='quantity'><input id='editProductMarketOfferForm' type='button' value='Edit' style='cursor: pointer;'></form>"),$("#editProductMarketOfferForm").click(function(){newPrice=$("#newPrice").val(),$(this).parent().html("<img src='"+IMGLOAD+"' >"),$.ajax({type:"POST",url:"/citizenMarketOffers.html",async:!1,data:{id:deleteId[0],action:"DELETE_OFFER"}}),$.ajax({type:"POST",url:"/citizenMarketOffers.html",async:!1,data:{countryId:c,product:quality+type,price:String(newPrice),quantity:Quanty[0],action:"POST_OFFER"}}),location.reload()})})}function changeMonetaryMarket(){3==$("#container").children().length&&$("#container").children().last().remove();var a=$("#container").find(".testDivblue"),b=a.eq(2);a.eq(2).hide();var c=a.eq(3),d=a.eq(4),e=a.eq(5);c.addClass("currentOffersMM"),e.addClass("yourOffersMM"),e.children().last().remove(),$("#buy").addClass("customSelectList"),$("#sell").addClass("customSelectList"),$("#offeredMoneyId").addClass("customSelectList"),$("#buyedMoneyId").addClass("customSelectList");var f=$("<div class='monetaryMarketTitleBlock'></div>");f.insertBefore(b),f.append(b);var g=$("<input class='swapView' type='button' value='Swap & View' />");g.insertAfter("#swap2"),g.bind("click",function(){$("#swap2").click(),$("#monetaryMarketView").submit()}),$("#swap2").addClass("swapView"),$("#swap2").bind("click",function(){var a=$("#offeredMoneyId").val();$("#offeredMoneyId").val($("#buyedMoneyId").val()),$("#buyedMoneyId").val(a);var b="Gold";"Gold"!=$("#buyedMoneyId > option:selected").text()&&(b=$("#buyedMoneyId > option:selected").text().substr(0,3)),$("#offeredRate2").text(b),b="Gold","Gold"!=$("#offeredMoneyId > option:selected").text()&&(b=$("#offeredMoneyId > option:selected").text().substr(0,3)),$("#offeredCurrency").text(b),$("#offeredRate1").text(b)});var h=$("<div class='monetaryMarketTitleBlock'></div>");h.insertBefore(b),h.append(d),h.append(c),h.append(e),$("#swap1").addClass("swapYourOffers"),$("#swap1").bind("click",function(){var a=$("#buy").val();if($("#buy").val($("#sell").val()),$("#sell").val(a),"0"==$("#offeredMoneyId").val()){var b=$(".monetaryMarketCurrencyBlock").find(".currencySelector[id='"+$("#buyedMoneyId").val()+"']"),c="0.0";0!=b.length&&(c=b.children("b").text()),$("#value").val(c)}else $("#value").val("0.0")}),$("#buyedMoneyId").next().remove(),$("#value").addClass("priceInputMM"),$("#exchangeRatio").addClass("priceInputMM");var i=$("<div class='monetaryMarketCurrencyBlock'></div>");i.addClass("testDivblue"),f.append(i);var j=$("#hiddenMoney").parent();j.find(".flags-small").each(function(){var a=IDByImageCountry($(this).attr("class").split(" ")[1]),b=$("<div class='currencySelector'></div>");b.attr("id",a),0==a&&(selectedCurrency=b),b.append("<div class='"+$(this).attr("class")+"'></div>"),b.append("<b>"+$(this).next().text()+" </b>");var c=$("#buy").children("option[value='"+a+"']").text().split(" ");b.append(c[0]),i.append(b),b.bind("click",function(){var a=$(this).attr("id");if("0"!=a&&a!=selectedCurrency.attr("id")){selectedCurrency&&selectedCurrency.removeClass("selectedCurrency"),"0"==$("#buy").val()?$("#sell").val(a):$("#buy").val(a),"0"==$("#offeredMoneyId").val()?$("#buyedMoneyId").val(a):$("#offeredMoneyId").val(a),$(this).addClass("selectedCurrency"),selectedCurrency=$(this);var b="Gold";"Gold"!=$("#buyedMoneyId > option:selected").text()&&(b=$("#buyedMoneyId > option:selected").text().substr(0,3)),$("#offeredRate2").text(b),b="Gold","Gold"!=$("#offeredMoneyId > option:selected").text()&&(b=$("#offeredMoneyId > option:selected").text().substr(0,3)),$("#offeredCurrency").text(b),$("#offeredRate1").text(b),"0"==$("#buyedMoneyId").val()?$("#value").val($(this).children("b").text()):$("#value").val("0.0")}})});var k="#value",l=!0,m=$("<input class='priceFastButton' type='button' value='1' />");m.bind("click",function(){l?$(k).attr("value","1"):$(k).attr("value",parseInt($(k).attr("value"))+1),l=!1});var n=$("<input class='priceFastButton' type='button' value='5' />");n.bind("click",function(){l?$(k).attr("value","5"):$(k).attr("value",parseInt($(k).attr("value"))+5),l=!1});var o=$("<input class='priceFastButton' type='button' value='10' />");o.bind("click",function(){l?$(k).attr("value","10"):$(k).attr("value",parseInt($(k).attr("value"))+10),l=!1});var p=$("<input class='priceFastButton' type='button' value='50' />");p.bind("click",function(){l?$(k).attr("value","50"):$(k).attr("value",parseInt($(k).attr("value"))+50),l=!1});var q=$("<input class='priceFastButton' type='button' value='100' />");q.bind("click",function(){l?$(k).attr("value","100"):$(k).attr("value",parseInt($(k).attr("value"))+100),l=!1});var r=$("<input class='priceFastButton' type='button' value='500' />");r.bind("click",function(){l?$(k).attr("value","500"):$(k).attr("value",parseInt($(k).attr("value"))+500),l=!1});var s=$("#offeredRate2").next();m.insertBefore(s),n.insertBefore(s),o.insertBefore(s),p.insertBefore(s),q.insertBefore(s),r.insertBefore(s);var t=$("<input class='postOfferButton' type='button' value='Post new offer' />"),s=$("#monetaryOfferPost").children("center").children("input");t.insertBefore(s),s.hide(),t.click("click",function(){var a=parseFloat($("#value").val()),b=parseFloat($("#exchangeRatio").val()),c=confirm("Sell "+a+" "+$("#offeredCurrency").text()+" for "+a*b+" "+$("#offeredRate2").text());c&&$("#monetaryOfferPost").submit()})}function changeMonetaryMarketTable(){$(".dataTable").find("input[type='text']").addClass("inputTextTable");var a=$(".dataTable").find("input[type='submit']").addClass("inputSubmitTable"),b=$("<input class='buyAllSubmit' type='submit' value='All' />");b.bind("click",function(){var a=$(this).parent().parent().prev().prev().text().match(/\d{1,10}.\d{1,5}/);return $(this).parent().children("input[type='text']").val(a),!1}),b.insertBefore(a),$(".dataTable").addClass("dataTableMod"),$(".dataTable > tbody > tr:first-child > td").addClass("dataTableHeaders")}function monetaryMarketPriceEdit(){$(".dataTable:eq(1) tr:not(:first)").each(function(){$(this).children("td:eq(0)").append(" <a class='editQuanty'>Edit</a>"),$(this).children("td:eq(1)").append(" <a class='editPrice'>Edit</a>")}),$(".editQuanty").click(function(){SellValue=/(\d{1,30}.\d\d) ([a-zA-Z]{3,4})/gim.exec($(this).parent().text()),Quanty=SellValue[1],SellCC=SellValue[2],BuyValue=/= (\d{1,10}.{0,1}\d{0,4}) ([a-zA-Z]{3,4})/gim.exec($(this).parent().next().text()),ratio=BuyValue[1],BuyCC=BuyValue[2],href=$(this).parent().next().next().find("a").attr("href"),$(this).parent().html("<input id='newQuanty' type='text' value='"+Quanty+"' min='1' style='width: 30px' class='digit quantityMyOffers' name='quantity' id='quantity'><input id='editProductMarketOfferForm' type='button' value='Edit' style='cursor: pointer;'></form>"),$("#editProductMarketOfferForm").click(function(){newQuanty=$("#newQuanty").val(),$(this).parent().html("<img src='"+IMGLOAD+"' >"),$.ajax({type:"GET",url:"/monetaryMarket.html"+href,async:!1}),$.ajax({type:"POST",url:"/monetaryMarket.html?action=post",async:!1,data:{offeredMoneyId:IDbyCC(SellCC),buyedMoneyId:IDbyCC(BuyCC),value:newQuanty,exchangeRatio:String(ratio)}}),location.reload()})}),$(".editPrice").click(function(){SellValue=/(\d{1,30}.\d\d) ([a-zA-Z]{3,4})/gim.exec($(this).parent().prev().text()),Quanty=SellValue[1],SellCC=SellValue[2],BuyValue=/= (\d{1,10}.{0,1}\d{0,4}) ([a-zA-Z]{3,4})/gim.exec($(this).parent().text()),ratio=BuyValue[1],BuyCC=BuyValue[2],href=$(this).parent().next().find("a").attr("href"),$(this).parent().html("<input id='newratio' type='text' value='"+ratio+"' min='1' style='width: 30px' class='digit quantityMyOffers' name='quantity' id='quantity'><input id='editProductMarketOfferForm' type='button' value='Edit' style='cursor: pointer;'></form>"),$("#editProductMarketOfferForm").click(function(){newRatio=$("#newratio").val(),$(this).parent().html("<img src='"+IMGLOAD+"' >"),$.ajax({type:"GET",url:"/monetaryMarket.html"+href,async:!1}),$.ajax({type:"POST",url:"/monetaryMarket.html?action=post",async:!1,data:{offeredMoneyId:IDbyCC(SellCC),buyedMoneyId:IDbyCC(BuyCC),value:String(Quanty),exchangeRatio:String(newRatio)}}),location.reload()})})}function monetaryMarketPriceRatio(){var a=0,b=0;$(".dataTable:eq(0) tr:not(:first)").each(function(){amount=$(this).children("td:eq(1)").children("b").attr("title"),ratio=$(this).children("td:eq(2)").children("b").html();var c=/\d+ (\w{2,4}) = <b>[\d\.]+<\/b> (\w{2,4})/.exec($(this).children("td:eq(2)").html()),d=c[2],e=c[1];c=void 0,$(this).children("td:eq(1)").append("<br/> All: <b>"+Math.round(amount*ratio*100)/100+"</b> "+d),a=IDbyCC(e),b=IDbyCC(d)}),$.ajax({url:"/monetaryMarket.html?buyerCurrencyId="+b+"&sellerCurrencyId="+a,async:!1}).done(function(a){versus_offer=$(a).find(".dataTable:eq(0) tr:eq(1) td:eq(2)").html(),$(".dataTable:eq(0) tr:not(:first)").each(function(){$(this).children("td:eq(2)").append("<br/>"+versus_offer)})})}function BattleStatsMinimize(){if($("#battleHeaderImage").remove(),$("#battleStats").show(),$("#battleSelectable:first + #battleSelectable div.small-10:first > #moreBattleStats").remove(),$("#battleSelectable:first + #battleSelectable div.small-10:first").css({"padding-bottom":"1px"}),$("#battleStats").insertBefore($("#battleSelectable:first + #battleSelectable div.small-10:first")),$('<div id="wrapperBattleStatsButtons" class="foundation-style small-10 columns" style="margin-bottom:.4em;"></div>').insertBefore($("#battleSelectable:first + #battleSelectable div.small-4:first")),$('<div id="showTop3BattleStats" style="padding-bottom:.4em;padding-top:.4em;margin:.4em .4em 0 .4em;" class="foundation-style button"> Show Top 3 </div>').appendTo($("#wrapperBattleStatsButtons")),$('<div id="showTop10BattleStats" style="padding-bottom:.4em;padding-top:.4em;margin:.4em .4em 0 .4em;" class="foundation-style button"> Show Top 10 </div>').appendTo($("#wrapperBattleStatsButtons")),$('<div id="showRecentActionsBattleStats" style="padding-bottom:.4em;padding-top:.4em;margin:.4em .4em 0 .4em;" class="foundation-style button"> Recent Actions </div>').appendTo($("#wrapperBattleStatsButtons")),$('<div id="showSpectatorsBattleStats" style="padding-bottom:.4em;padding-top:.4em;margin:.4em .4em 0 .4em;" class="foundation-style button"> Spectators </div>').appendTo($("#wrapperBattleStatsButtons")),$("#wrapperBattleStatsButtons + div.small-4, #wrapperBattleStatsButtons + div.small-4 + div.small-2, #wrapperBattleStatsButtons + div.small-4 + div.small-2 + div.small-4").addClass("Top3BattleStatsElements"),$("#battleStats > div.small-10:first").addClass("Top10BattleStatsElements"),$(".Top10BattleStatsElements + div.small-10").addClass("RecentActionsBattleStatsElements"),$(".RecentActionsBattleStatsElements + div.small-10, .RecentActionsBattleStatsElements + div.small-10 + div.small-10").addClass("SpectatorsBattleStatsElements"),$(".Top3BattleStatsElements").css("display",$.jStorage.get("SGTop3BattleStatsElements","none")),$("#showTop3BattleStats").click(function(){$(".Top3BattleStatsElements").toggle("fast",function(){$.jStorage.set("SGTop3BattleStatsElements",$(".Top3BattleStatsElements").css("display"))})}),$(".Top10BattleStatsElements").css("display",$.jStorage.get("SGTop10BattleStatsElements","none")),$("#showTop10BattleStats").click(function(){$(".Top10BattleStatsElements").toggle("fast",function(){$.jStorage.set("SGTop10BattleStatsElements",$(".Top10BattleStatsElements").css("display"))})}),$(".RecentActionsBattleStatsElements").css("display",$.jStorage.get("SGRecentActionsBattleStatsElements","none")),$("#showRecentActionsBattleStats").click(function(){$(".RecentActionsBattleStatsElements").toggle("fast",function(){$.jStorage.set("SGRecentActionsBattleStatsElements",$(".RecentActionsBattleStatsElements").css("display"))})}),$(".SpectatorsBattleStatsElements").css("display",$.jStorage.get("SGSpectatorsBattleStatsElements","none")),$("#showSpectatorsBattleStats").click(function(){$(".SpectatorsBattleStatsElements").toggle("fast",function(){$.jStorage.set("SGSpectatorsBattleStatsElements",$(".SpectatorsBattleStatsElements").css("display"))})}),$("#recentDefenders > span").length<5)for(count=$("#recentDefenders > span").length;count<5;)$("#recentDefenders").append("<span></span>"),count++;if($("#recentAttackers > span").length<5)for(count=$("#recentAttackers > span").length;count<5;)$("#recentAttackers").append("<span></span>"),count++}function ModalWindowFunc(a){switch(a){case 1:window.picoModal=function(){return lastModalWindow.remove(),lastModalWindow=$("#fightResponse > div").clone(),$.blockUI({message:lastModalWindow,fadeIn:400,fadeOut:400,timeout:2e3,showOverlay:!1,centerY:!1,css:{width:"300px",top:"50px",left:"50%",right:"",margin:"0px 0px 0px -55px",border:"none",padding:"5px",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px",opacity:.9,color:"#fff",cursor:"default","font-size":"16px"}}),!0};break;case 2:window.picoModal=function(){return!0},$("#fightStatus").attr("style","").show().removeClass("testDivblue").addClass("fightContainer"),$("#fightResponse").hide().addClass("foundation-style small-10 columns"),$('<div id="wrapperStatusActionButtons" class="foundation-style small-10 columns" style="margin-bottom:.4em;"></div>').insertBefore($("#fightResponse")),$('<div id="SGShowStatusAction" style="padding-bottom:.4em;padding-top:.4em;margin:.4em .4em 0 .4em;" class="foundation-style button"> Show Status Action </div>').appendTo($("#wrapperStatusActionButtons")),$("#fightResponse").css("display",$.jStorage.get("SGShowStatusActionButton","none")),$("#SGShowStatusAction").click(function(){$("#fightResponse").toggle("fast",function(){$.jStorage.set("SGShowStatusActionButton",$("#fightResponse").css("display"))})})}}function MUBrodcastMsg(){$("div.blueLabel.unitStatusOptions:last").after('<div class="blueLabel unitStatusOptions"><a href="#" id="SG_BRC_MSG" style="font-weight: bold">SG Broadcast MSG</a></div>'),$("#SG_BRC_MSG").click(function(){$.blockUI({message:$('<center><b style="font-size:17px">SG Broadcast MSG</b></center><center><div id="SG_MSG" class="foundation-style blueLabel " style="margin-bottom:15px; width:530px;"><b style="display:block">Title:</b><input type="text" style="width: 400px;" path="title" maxlength="100" minlength="1" id="titleInput"><br><script language="JavaScript">function append(textBefore, textAfter)  {var yourTextarea = document.getElementById(\'messageForm\');var selectionStart = yourTextarea.selectionStart;var selectionText = yourTextarea.value.substr(yourTextarea.selectionStart, yourTextarea.selectionEnd-yourTextarea.selectionStart);var prefix = yourTextarea.value.substr(0, yourTextarea.selectionStart);var postfix = yourTextarea.value.substr(yourTextarea.selectionEnd);yourTextarea.value = prefix+""+textBefore+"" + selectionText + ""+textAfter+""+postfix;yourTextarea.selectionStart = selectionStart;yourTextarea.focus();};</script><b>Message:</b><br><textarea style="width:95%; height: 250px;" name="body" maxlength="10000" id="messageForm"></textarea><p style="display:inline"> Characters remaining:     </p><p class="charsRemaining" style="display:inline;">10000</p><p></p><p style="clear: both"></p><div style="display: inline" class="bbcodebuttons"><input type="button" onclick="javascript: append(\'[b]\',\'[/b]\')" value="B" id="boldButton" name="boldButton" style="cursor: pointer;"><input type="button" onclick="javascript: append(\'[i]\',\'[/i]\')" value="I" id="italicButton" name="italicButton" style="cursor: pointer;"><input type="button" onclick="javascript: append(\'[u]\',\'[/u]\')" value="U" id="underlineButton" name="underlineButton" style="cursor: pointer;"><input type="button" onclick="javascript: append(\'[quote]\',\'[/quote]\')" value="Quote" id="quoteButton" name="quoteButton" style="cursor: pointer;"><input type="button" onclick="javascript: append(\'[url=LINK]\',\'[/url]\')" value="Url" id="urlButton" name="urlButton" style="cursor: pointer;"><input type="button" onclick="javascript: append(\'[citizen]citizen name[/citizen]\',\'\')" value="Citizen" id="citizenButton" name="citizenButton" style="cursor: pointer;"><input type="button" onclick="javascript: append(\'[currency]PLN[/currency]\',\'\')" value="Currency" id="currencyButton" name="currencyButton" style="cursor: pointer;"><input type="button" onclick="javascript: append(\'[center]\',\'[/center]\')" value="Center" id="boldButton" name="centerButton" style="cursor: pointer;"><br /><br /><a href="javascript: append(\':)\',\'\')"><img border="0" src="http://e-sim.home.pl/testura/img/emoticons/smile.png"> </a><a href="javascript: append(\':D\',\'\')"><img border="0" src="http://e-sim.home.pl/testura/img/emoticons/bigSmile.png"> </a><a href="javascript: append(\':\\\',\'\')"><img border="0" src="http://e-sim.home.pl/testura/img/emoticons/ciach.png"> </a><a href="javascript: append(\':P \',\'\')"><img border="0" src="http://e-sim.home.pl/testura/img/emoticons/tongue.png"> </a><a href="javascript: append(\':( \',\'\')"><img border="0" src="http://e-sim.home.pl/testura/img/emoticons/unhappy.png"> </a><a href="javascript: append(\';) \',\'\')"><img border="0" src="http://e-sim.home.pl/testura/img/emoticons/eye.png"> </a></div><p style="cleat: both"></p><input type="hidden" value="REPLY" name="action"><input type="button" id="SENDMSG" value="Send" style="cursor: pointer;"> &nbsp; <input type="button" value="Close" id="ClosewButton" style="cursor: pointer;"><p style="clear: both"></p> </div></center>'),css:{top:"48px",left:($(window).width()-600)/2+"px",width:"600px",border:"0px",position:"absolute",textAlign:"left"}}),$("#ClosewButton").click(function(){$.unblockUI()}),$("#SENDMSG").click(function(){for(IdArray=new Array,$("div.testDivblue > center + br + div:not(#militaryDescription) a.profileLink").each(function(){IdArray[IdArray.length]=$(this).text().replace(/★ /g,"")}),msgTitle=$("#titleInput").val(),msgBody=$("#messageForm").val(),$("#SG_MSG").html('<center><p style="text-align: center;"><h1>Dont Close...</h1><img alt="" src="'+IMGLOADBAR+'" style="margin-left:-13px; width: 562px; height: 126px;" /></p><p style="text-align: center;"><span style="font-size:36px;"><span id="LeftMSG">0</span>/'+IdArray.length+"</span></p></center>"),i=0;i<IdArray.length;++i)$.ajax({type:"POST",url:"/composeMessage.html",async:!1,data:{receiverName:IdArray[i],title:msgTitle,body:msgBody,action:"REPLY"}}),$.ajax({type:"GET",url:"http://esim-hadugy.gopagoda.com/wait.php?sec=11",async:!1}),$("#LeftMSG").text(i+1);$.unblockUI()})})}function TextStorage(){$('<div id="TextStorage" style="width:350px;float: left; text-align: left" class="testDivwhite"><ul></ul></div>').insertAfter($(".testDivwhite > div.storage:first").parent()),$(".testDivwhite > div.storage").each(function(){var a=$.trim($(this).children("div:first").text()),b=/\/(\w+)\.png/gim.exec($(this).children("div:eq(1)").children("img:first").attr("src"))[1],c="";$(this).children("div:eq(1)").children("img").length>1&&(c=" "+/\/(q\d)\.png/gim.exec($(this).children("div:eq(1)").children("img:eq(1)").attr("src"))[1]),
$("<li>"+b+c+":"+a+"</li>").appendTo("#TextStorage > ul")})}function resizeProductImage(a){a.each(function(){var a=$(this).parent(),b=a.find("img");a.children().remove();var c=$("<div style='url('http://e-sim.home.pl/testura/img/stripes.png') repeat scroll 0 0 #3D6571'></div>");c.append(b.eq(0).addClass("productImage")),b.length>1&&c.append(b.eq(1).addClass("productQuality")),a.append(c)})}function addCompanyButtons(){var a=IDByImageCountry($("a[href^='region.html']").prev().attr("class").split(" ")[1]),b=$(".workerListDiv"),d=($(".offerListDiv"),$("<input class='updateSalariesButton' type='button' value='Update salaries'/>"));d.insertBefore(b.children().first()),d.bind("click",function(){b.find(".redText").remove(),b.find(".greenText").remove();var c=0,d=[];b.find(".tableRow").each(function(){var e=$(this).find("td"),f=parseInt(e.eq(1).text());d.indexOf(f)==-1&&(d.push(f),setTimeout(function(){$.ajax({url:URLJobMarket+"?countryId="+a+"&minimalSkill="+f,success:function(a){var c=$(a).find(".dataTable").find("tr"),d=c.eq(1).find("td").eq(4).children("b").text();d=parseFloat(d),b.find(".workerSkill"+f).each(function(){var a,b,c=parseFloat($(this).children(".salary").children("b").text());c<d?(a="redText",b="-"+parseInt(1e4*(d/c-1))/100):(a="greenText",b="+"+parseInt(1e4*(c/d-1))/100),$(this).append("<b class='"+a+"'>"+d+" ("+b+"%)</b>")})}})},500*c),c++)})});var e=$("<input class='updateJobsButton' type='button' value='Update jobs'/>");if(e.insertBefore(b.children().first()),e.bind("click",function(){var a=getUrlVars().id;$.ajax({url:URLCompanyDetails+a,success:function(a){$(a).find("#productivityTable").find("tr").each(function(){var a=$(this).children("td").last(),c=$(this).find("a");if(c){var d=b.find("a[href='"+c.attr("href")+"']").parent();2==a.children("div").length?(d.append("<br/>"),d.append("<b>"+a.children().eq(1).text().replace("(","").replace(")","")+"</b>"),d.addClass("greenBackgroundCompany")):d.addClass("redBackgroundCompany")}})}})}),1==$("#createJobForm td:last").length){var f=$("<input class='updateJobSalary' type='button' value='Update job salary'/>");f.appendTo("#createJobForm td:last"),f.bind("click",function(){var a=$("input[name='minimalSkill']").val();$(".workerListDiv table.dataTable tr:not(:first) > .workerSkill"+a+" > div > form").each(function(){var a=$(this).find("input[name='id']").val(),b=$(this).find("input[name='workerId']").val(),c=$(this).find("input[name='action']").val(),d=$("input[name='price']").val(),e="id="+a+"&workerId="+b+"&action="+c+"&newSalary="+d;$.ajax({type:"POST",url:"company.html",async:!1,data:e})});var b=NotifyMotivateTemp;b=b.replace("{1}","update_salary_completed"),b=b.replace("{2}","Salary Notification"),b=b.replace("{3}","Update salary completed"),MotivateNotify(b)})}}function companyImprovements(){14==$("#minimalSkill option").length&&($("#minimalSkill").append("<option value='15'>15</option>"),$("#minimalSkill").append("<option value='16'>16</option>"));var a=$("#container").find(".testDivblue"),b=a.eq(2).find("table").eq(1),c=b.find("tr").first().children("td").first();c.next().children().css({"max-width":"100%"}),c.remove();var d=IDByImageCountry($("a[href^='region.html']").prev().attr("class").split(" ")[1]);if(6==a.length){var e=a.eq(5),f=a.eq(4),g=a.eq(3),h=g.children().first();g.children().first().remove(),h.insertBefore(g),$("<br/>").insertBefore(g);var i=$("<div style='display:inline-block; width:100%'></div>");i.insertBefore(g),i.append(f),i.append(e),g.css({"margin-top":"15px"}),h.removeClass("testDivwhite"),h.addClass("testDivblue").css({width:"680px"}),h.children("p").remove();var j=null;$("#minimalSkill option").each(function(){var a=$("<div class='skillSelector'>"+$(this).val()+"</div>");a.insertBefore("#minimalSkill"),a.bind("click",function(){j&&j.removeClass("skillSelectorSelected"),j=$(this),j.addClass("skillSelectorSelected"),$("#minimalSkill").val(j.text());var a=URLJobMarket+"?countryId="+d+"&minimalSkill="+$(this).text();$(".companyLinkOffers").attr("href",a)})}),$("#minimalSkill").hide();var k=$("#minimalSkill").parent();k.attr("colspan","4"),h.find("table").css({width:"100%"});var l=$("<tr></tr>");l.append(k.next().css({width:"33%"}));var m=$("<td style='width:18%;'></td>"),n=$("<a class='companyLinkOffers' href='' target='_blank'>View skill offers</a>");l.append(m.append(n)),l.append(k.next().css({width:"17%"})),l.append(k.next().css({width:"26%"})),k.parent().parent().append(l),$(".skillSelector").first().click(),$("#price").addClass("priceInputCompany"),$("#price").bind("focus",function(){$(this).select()}),$("#quantity").addClass("quantityMyOffers"),$("#quantity").bind("focus",function(){$(this).select()})}else var e=a.eq(4),f=a.eq(3);e.addClass("workerListDiv"),f.addClass("offerListDiv"),b.children("p").remove(),b.find(".productLabelRight").css({height:"auto",width:"40px"}),e.find(".tableRow").each(function(){var a=$(this).find("td"),b=parseInt(a.eq(1).text()),c=$("<a href='"+URLJobMarket+"?countryId="+d+"&minimalSkill="+b+"'>View</a>");a.eq(1).append("<br/>"),a.eq(1).append(c),a.eq(2).addClass("workerSkill"+b)}),$("input[name=newSalary]").addClass("priceInputCompany"),$("input[name=newSalary]").bind("focus",function(){$(this).select()}),$("input[name=salary]").addClass("priceInputCompany"),$("input[name=salary]").bind("focus",function(){$(this).select()})}function companyWorkResults(){var a=$("#container").find(".testDivwhite "),b=a.find("table");b.find(".productLabelRight").css({height:"auto",width:"40px"}),resizeProductImage(b.find(".product"));var c=$(".column-margin-vertical.column.small-8 > div.testDivblue:first > h1");c.html("<a href='company.html?id="+getUrlVars().id+"'>"+c.html()+"</a>"),c.find("a").attr("style","font-family:'Open Sans',Arial; font-size: 26px!important;");var d=$("<div class='testDivblue' style='width:500px;'></div>"),e=$("<input class='companyGetSalary' type='button' value='Calculate'/>");d.append(e),d.insertAfter(a.prev());var f=$("#container").find(".testDivwhite"),g=getUrlVars().id;e.bind("click",function(){$("td.playerSalary").remove();var a=0;f.find("tr").each(function(){var b=$("<td class='playerSalary'></td>");0==a&&b.append("Salary"),$(this).append(b),a++}),f.css({width:"785px"}),f.find("table").css({width:"100%"}),$.ajax({url:URLCompany+g,success:function(a){var b=$(a).find(".testDivblue");if(6==b.length)var c=b.eq(5).find(".tableRow");else var c=b.eq(4).find(".tableRow");checkPlayersSalary(c,f)}})})}function checkPlayersSalary(a,b){for(a.each(function(){var a=$(this).find("a[href^='profile.html']"),c=$(this).find(".salary");c.removeClass("salary"),3==c.children().length&&c.children().last().remove(),b.find("tr").each(function(){if(1==$(this).find("a[href='"+a.attr("href")+"']").length){$(this).find(".playerSalary").append(c),$("<br/>").insertBefore(c.children("b"));var b=c.contents().eq(5).text(),d=parseFloat(c.children("b").text());$(this).find("td").each(function(){if(2==$(this).children().length){$(this).children().eq(1).css({color:"#009900"});var a=$(this).children("div").eq(1).text();if(a=a.replace(/[\(\)]/g,""),a=parseFloat(a),!isNaN(a)){var c=$("<div class='finalPrice'>"+parseInt(d/a*1e3)/1e3+"</div>");c.append("<br/>"),c.append("<span> "+b+"</span>"),$(this).append(c)}}})}})}),trNumber=b.find("tr").length,0==$("#sum_1").length?($("#productivityTable > tbody:last").append('<tr><td colspan="2"><b>Sum:</b></td><td id="sum_1"></td><td id="sum_2"></td><td id="sum_3"></td><td id="sum_4"></td><td id="sum_5"></td><td id="sum_6"></td><td id="sum_7"></td><td id="sum_8"></td><td id="sum_9"></td><td id="sum_10"></td><td id="sum_11"></td></tr>'),$("#productivityTable > tbody:last").append('<tr><td colspan="2"><b>Avarage:</b></td><td id="avg_1"></td><td id="avg_2"></td><td id="avg_3"></td><td id="avg_4"></td><td id="avg_5"></td><td id="avg_6"></td><td id="avg_7"></td><td id="avg_8"></td><td id="avg_9"></td><td id="avg_10"></td><td id="avg_11"></td></tr>')):($("#productivityTable > tbody tr:last td:last").remove(),$("#productivityTable > tbody tr:eq(-2) td:last").remove()),i=3;i<13;i++){if(col=$("#productivityTable tr>td:nth-child("+i+")").text(),col=col.replace(/\t/g,""),Productivity=col.match(/\d{0,10}\.\d{0,2}[\n\r]/g),Product=col.match(/\(\d{0,10}\.\d{0,2}\)/g),price_one=col.match(/\d{1,5}\.\d{0,3}\s{2}\w+/g),null!=Productivity){Productivity=Productivity.join().match(/\d{0,10}\.\d{0,2}/g),Sum_productivity=0;for(var c=0;c<Productivity.length;c++)Sum_productivity+=Number(Productivity[c]);average_productivity=Sum_productivity/Productivity.length}else Sum_productivity=0,average_productivity=0;if(null!=Product){Product=Product.join().match(/\d{0,10}\.\d{0,2}/g),Sum_product=0;for(var c=0;c<Product.length;c++)Sum_product+=Number(Product[c]);average_product=Sum_product/Product.length}else Sum_product=0,average_product=0;if(null!=price_one){price_one=price_one.join().match(/\d{1,5}\.\d{0,3}/g),Sum_price_one=0;for(var c=0;c<price_one.length;c++)Sum_price_one+=Number(price_one[c]);average_price_one=Sum_price_one/price_one.length}else Sum_price_one=0,average_price_one=0;$("#sum_"+(i-2)).html("<div>"+Sum_productivity.toFixed(2)+"</div><div style='color: rgb(0, 153, 0);font-weight:normal;'>"+Sum_product.toFixed(2)+"</div>"),$("#avg_"+(i-2)).html("<div>"+average_productivity.toFixed(2)+"</div><div style='color: rgb(0, 153, 0);'>"+average_product.toFixed(2)+"</div><div class='finalPrice'>"+average_price_one.toFixed(4)+"</div>")}col_sal=$("#productivityTable tr>td:nth-child(13)").text(),sal=col_sal.match(/\d{1,3}\.\d{0,2}/g),Sum_sal=0;for(var c=0;c<sal.length;c++)Sum_sal+=Number(sal[c]);average_sal=Sum_sal/sal.length,$("#avg_11").html("<div style='color: rgb(0, 153, 0);'>"+average_sal.toFixed(2)+"</div>"),$("#sum_11").html("<div style='color: rgb(0, 153, 0);'>"+Sum_sal.toFixed(2)+"</div>")}function companyAllWorkersPage(){$('<div style="width:520px;min-height:30px;line-height:20px;" class="testDivblue"><h1><span></span>Back to company</h1><p style="clear: both"></p> </div><br>').insertBefore("#userMenu + script + div > :first");var a=$(".column-margin-vertical.column.small-8 > div.testDivblue:first > h1");a.html("<a href='company.html?id="+getUrlVars().id+"'>"+a.html()+"</a>"),a.find("a").attr("style","font-family:'Open Sans',Arial; font-size: 26px!important;")}function addMenu(){var a=$("<li class='version'><a href='/' target='_blank'> ADMIN</a></li>");$(".foundation-left").append(a),$(".foundation-left").append("<li class='divider'></li>")}function twoClickNotify(a){$.blockUI({message:a,fadeIn:700,fadeOut:700,timeout:2e3,showOverlay:!1,centerY:!1,css:{width:"350px",top:"50px",left:"",right:"10px",border:"none",padding:"5px",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px",opacity:.9,color:"#fff"}})}function twoClick(){var a=$.jStorage.get("SGTwoClick",!1),b=$.jStorage.get("SGTwoClickLogin",""),c=$.jStorage.get("SGTwoClickPassword",""),d=6e5;msgNotify=NotifyTwoClickTemp;var e="",f=!1,g=!1;a&&""!=b&&""!=c&&$.ajax({url:"mobile/login",type:"POST",data:'{"username":"'+b+'","password":"'+c+'","rememberMe":false}',contentType:"application/json; charset=utf-8",dataType:"json",success:function(a){e=a.token,console,$.ajax({url:"mobile/train",type:"GET",contentType:"application/json; charset=utf-8",headers:{token:e},dataType:"json",success:function(a){f=a.trainedToday,f||$.ajax({url:"mobile/train",type:"POST",data:"{}",contentType:"application/json; charset=utf-8",headers:{token:e},dataType:"json",success:function(a){f=a.trainedToday,f?(msgNotify=msgNotify.replace("{1}","succesfully_trained"),msgNotify=msgNotify.replace("{2}","Two Click Notification"),msgNotify=msgNotify.replace("{3}","Succesfully trained"),twoClickNotify(msgNotify)):(msgNotify=msgNotify.replace("{1}","unsuccesfully_trained"),msgNotify=msgNotify.replace("{2}","Two Click Notification"),msgNotify=msgNotify.replace("{3}","Unsuccesfully trained"),twoClickNotify(msgNotify))}})}}),$.ajax({url:"mobile/work",type:"GET",contentType:"application/json; charset=utf-8",headers:{token:e},dataType:"json",success:function(a){g=a.workedToday,g||$.ajax({url:"mobile/work",type:"POST",data:"{}",contentType:"application/json; charset=utf-8",headers:{token:e},dataType:"json",success:function(a){g=a.workedToday,g?(msgNotify=msgNotify.replace("{1}","succesfully_worked"),msgNotify=msgNotify.replace("{2}","Two Click Notification"),msgNotify=msgNotify.replace("{3}","Succesfully worked"),twoClickNotify(msgNotify)):(msgNotify=msgNotify.replace("{1}","unsuccesfully_worked"),msgNotify=msgNotify.replace("{2}","Two Click Notification"),msgNotify=msgNotify.replace("{3}","Unsuccesfully worked"),twoClickNotify(msgNotify))}})}})}}),f&&g||window.setTimeout(twoClick,d)}!function(a){jQuery.fn.lightTabs=function(b){var c=function(){tabs=this,i=0,showPage=function(b){a(tabs).children("div").children("div").hide(),a(tabs).children("div").children("div").eq(b).show(),a(tabs).children("ul").children("li").removeClass("active"),a(tabs).children("ul").children("li").eq(b).addClass("active")},showPage(0),a(tabs).children("ul").children("li").each(function(b,c){a(c).attr("data-page",i),i++}),a(tabs).children("ul").children("li").click(function(){showPage(parseInt(a(this).attr("data-page")))})};return this.each(c)}}(jQuery);var lang="en",localUrl=new String(window.location),lastModalWindow=$("#fightResponse > div").clone(),URLAPIRanks="/apiRanks.html",URLAPIRegion="/apiRegions.html",URLAPIMap="/apiMap.html",URLMain="/index.html",URLUserStorage="/storage.html",URLArticle="/article.html",URLNewspaper="/newspaper.html",URLEditArticle="/editArticle.html",URLMyMU="/myMilitaryUnit.html",URLMUMain="/militaryUnit.html?id=",URLMUStorage="/militaryUnitStorage.html",URLMUMoney="/militaryUnitMoneyAccount.html",URLDMUMoney="/donateMoneyToMilitaryUnit.html?id=",URLMUCompanies="/militaryUnitCompanies.html?id=",URLDDonatePlayerProduct="/donateProducts.html?id=",URLDonateMUProduct="/donateProductsToMilitaryUnit.html?id=",URLCompanies="/companies.html",URLCompany="/company.html?id=",URLCompanyDetails="/companyWorkResults.html?id=",URLCompanyAllWorkers="/companyAllWorkers.html?id=",URLCountryEco="/countryEconomyStatistics.html",URLBattle="/battle.html?id=",URLBattleList="/battles.html",URLContracts="/contracts.html",URLContract="/contract.html?id=",URLMarket="/productMarket.html",URLMonetaryMarket="/monetaryMarket.html",URLMarketOffers="/citizenMarketOffers.html",URLJobMarket="/jobMarket.html",URLMyShares="/myShares.html",URLStockCompany="/stockCompany.html?id=",URLStockMM="/stockCompanyMoney.html?id=",URLStockProducts="/stockCompanyProducts.html?id=",URLStockDonateMoney="/stockCompanyDonateMoney.html?id=",URLStockDonateCompany="/stockCompanyDonateCompany.html?id=",URLStockLogs="/stockCompanyLogs.html?id=",URLTravel="/travel.html",URLEquipment="/equipment.html",URLNewCitizen="/newCitizenStatistics.html",URLSearch="/search.html",_COUNTRY_URL="/countryEconomyStatistics.html?countryId={1}",_MM_C_URL="/monetaryMarket.html?buyerCurrencyId={1}&sellerCurrencyId=0",URLBUFF="/specialItems.html",URLNB="/newCitizens.html?countryId=0",URLNewRegisteredCitizen="/newCitizens.html?countryId=0",URLPROFILE="/profile.html",URLDMUProduct="/donateProductsToMilitaryUnit.html?id=",URLDMUComp="/donateCompanyToMilitaryUnit.html?id=",URLMUMEMB="/militaryUnitMembers.html?id=",URLMUCOMP="/militaryUnitCompanies.html?id=",URLSO="/serverOverloaded.html",URLMUDonations="/militaryUnitDonations.html",URLTransactionLog="/transactionLog.html",URLSettings="/editCitizen.html?Settings",URLShadowGovernment="/editCitizen.html?ShadowGovernment",IMGIRON="http://cdn.e-sim.org/img/productIcons/Iron.png",IMGGRAIN="http://cdn.e-sim.org/img/productIcons/Grain.png",IMGOIL="http://cdn.e-sim.org/img/productIcons/Oil.png",IMGDIAMONDS="http://cdn.e-sim.org/img/productIcons/Diamonds.png",IMGWOOD="http://cdn.e-sim.org/img/productIcons/Wood.png",IMGSTONE="http://cdn.e-sim.org/img/productIcons/Stone.png",IMGWEAPON="http://cdn.e-sim.org/img/productIcons/Weapon.png",IMGFOOD="http://cdn.e-sim.org/img/productIcons/Food.png",IMGTICKET="http://cdn.e-sim.org/img/productIcons/Ticket.png",IMGGIFT="http://cdn.e-sim.org/img/productIcons/Gift.png",IMGHOUSE="http://cdn.e-sim.org/img/productIcons/House.png",IMGDS="https://dl.dropboxusercontent.com/u/67548179/esim-ED/img/Defense_System.png",IMGHOSPITAL="http://cdn.e-sim.org/img/productIcons/Hospital.png",IMGESTATE="http://cdn.e-sim.org/img/productIcons/Estate.png",IMGQUALITY="http://cdn.e-sim.org/img/productIcons/q",IMGEXTENSION=".png",Benin="Benin",PapuaNewGuinea="Papua-New-Guinea",Angola="Angola",Cambodia="Cambodia",Sudan="Sudan",EastTimor="East-Timor",Paraguay="Paraguay",Kazakhstan="Kazakhstan",Portugal="Portugal",Syria="Syria",Bahamas="Bahamas",SolomonIslands="Solomon-Islands",NorthKorea="North-Korea",Greece="Greece",Latvia="Latvia",Mongolia="Mongolia",Iran="Iran",Morocco="Morocco",Mali="Mali",Panama="Panama",Guatemala="Guatemala",Guyana="Guyana",Iraq="Iraq",Chile="Chile",Laos="Laos",Nepal="Nepal",TheGambia="The-Gambia",Argentina="Argentina",Ukraine="Ukraine",Tanzania="Tanzania",Ghana="Ghana",Zambia="Zambia",Belize="Belize",Bahrain="Bahrain",Congo="Congo",India="India",Canada="Canada",Turkey="Turkey",Belgium="Belgium",Namibia="Namibia",Taiwan="Taiwan",Finland="Finland",SouthAfrica="South-Africa",CentralAfricanRepublic="Central-African-Republic",Georgia="Georgia",Jamaica="Jamaica",Peru="Peru",Turkmenistan="Turkmenistan",Germany="Germany",Yemen="Yemen",Eritrea="Eritrea",PuertoRico="Puerto-Rico",Guinea="Guinea",Chad="Chad",Somalia="Somalia",Madagascar="Madagascar",IvoryCoast="Ivory-Coast",Thailand="Thailand",Libya="Libya",EquatorialGuinea="Equatorial-Guinea",CostaRica="Costa-Rica",Adminland="Adminland",Sweden="Sweden",Vietnam="Vietnam",Malawi="Malawi",Poland="Poland",Bulgaria="Bulgaria",Nigeria="Nigeria",Jordan="Jordan",Kuwait="Kuwait",Tunisia="Tunisia",Croatia="Croatia",USA="USA",Uruguay="Uruguay",SriLanka="Sri-Lanka",UnitedKingdom="United-Kingdom",UnitedArabEmirates="United-Arab-Emirates",Kenya="Kenya",Switzerland="Switzerland",Spain="Spain",Djibouti="Djibouti",Lebanon="Lebanon",Venezuela="Venezuela",Liberia="Liberia",Azerbaijan="Azerbaijan",Cuba="Cuba",CzechRepublic="Czech-Republic",BurkinaFaso="Burkina-Faso",Mauritania="Mauritania",Swaziland="Swaziland",RepublicOfMacedonia="Republic-of-Macedonia",Israel="Israel",Australia="Australia",DROfTheCongo="DR-of-the-Congo",Tajikistan="Tajikistan",Estonia="Estonia",Myanmar="Myanmar",Cameroon="Cameroon",Cyprus="Cyprus",Malaysia="Malaysia",Oman="Oman",Iceland="Iceland",Armenia="Armenia",Gabon="Gabon",SouthKorea="South-Korea",Austria="Austria",Mozambique="Mozambique",ElSalvador="El-Salvador",Brazil="Brazil",Algeria="Algeria",Slovenia="Slovenia",Lesotho="Lesotho",Colombia="Colombia",WesternSahara="Western-Sahara",Ecuador="Ecuador",Hungary="Hungary",SouthSudan="South-Sudan",Japan="Japan",Moldova="Moldova",Belarus="Belarus",Albania="Albania",NewZealand="New-Zealand",Vanuatu="Vanuatu",Senegal="Senegal",GuineaBissau="Guinea-Bissau",Italy="Italy",Honduras="Honduras",Ethiopia="Ethiopia",Haiti="Haiti",Burundi="Burundi",Afghanistan="Afghanistan",Egypt="Egypt",SierraLeone="Sierra-Leone",Bolivia="Bolivia",Russia="Russia",SaudiArabia="Saudi-Arabia",Netherlands="Netherlands",Pakistan="Pakistan",Kosovo="Kosovo",China="China",Ireland="Ireland",Qatar="Qatar",Slovakia="Slovakia",France="France",Serbia="Serbia",Lithuania="Lithuania",BosniaAndHerzegovina="Bosnia-and-Herzegovina",Kyrgyzstan="Kyrgyzstan",Bhutan="Bhutan",Romania="Romania",Togo="Togo",Niger="Niger",Philippines="Philippines",Rwanda="Rwanda",Uzbekistan="Uzbekistan",Bangladesh="Bangladesh",Nicaragua="Nicaragua",Norway="Norway",Botswana="Botswana",Denmark="Denmark",DominicanRepublic="Dominican-Republic",Mexico="Mexico",Uganda="Uganda",Zimbabwe="Zimbabwe",Suriname="Suriname",Montenegro="Montenegro",Indonesia="Indonesia",thumbsUp="http://www.bayareakiteboarding.com/forum/images/smilies/emoji/e00e.png",IMGBUFF="http://images2.wikia.nocookie.net/__cb20101111221523/dofus/images/thumb/5/5b/Intelligence.png/20px-Intelligence.png",IMGSH="http://www.imageshost.eu/images/2014/09/06/stock_new_chart_next_graph-20.png",IMGTV="http://www.imageshost.eu/images/2014/09/06/travels_travel_vector_simple-20.png",IMGMM="http://www.imageshost.eu/images/2014/09/06/cash_money_dollar_payment_coins_wallet_register.png",IMGCT="http://www.imageshost.eu/images/2014/09/06/newspaper_edit.png",IMGPM="http://www.imageshost.eu/images/2014/09/06/Product_basket.png",IMGMU="http://www.imageshost.eu/images/2014/09/06/Soldier.png",IMGPACKAGE="http://www.imageshost.eu/images/2014/09/06/icon-gift.gif",IMGDOLLAR="http://www.imageshost.eu/images/2014/09/06/currency_dollar_pound_money-20.png",IMGEQUIPMENT="http://www.imageshost.eu/images/2014/09/06/shield_silver.png",IMGCOMPANY="http://www.imageshost.eu/images/2014/09/06/Factory.png",IMGONLINE="http://e-sim.home.pl/testura/img/newOnline.png",IMGOFFLINE="http://e-sim.home.pl/testura/img/newOffline.png",IMGPRODBG="http://e-sim.home.pl/testura/img/productIcons/background.png",IMGCRITICAL="http://e-sim.home.pl/testura/img/equipmentIcons/criticalHit.png",IMGMISS="http://e-sim.home.pl/testura/img/equipmentIcons/reduceMiss.png",IMGAVOID="http://e-sim.home.pl/testura/img/equipmentIcons/avoidDamage.png",IMGLOAD="https://dl.dropboxusercontent.com/u/67548179/esim-ED/img/WorkInProgress.gif",noDebuff="http://cdn.rivierarentalguide.com/images/messages/booking_panel/ok.png",IMGLOADBAR="https://dl.dropboxusercontent.com/u/67548179/esim-ED/img/loading_bar.gif",IMGDMUMy="http://www.imageshost.eu/images/2014/09/06/help-donate_32.png",IMGDMUPR="http://www.imageshost.eu/images/2014/09/06/TreasureChest.png",IMGDMUCP="http://www.imageshost.eu/images/2014/09/06/Factory_company_production.png",IMGMUMEMB="http://www.imageshost.eu/images/2014/09/06/members.gif",IMGMUCOMP="http://www.imageshost.eu/images/2014/09/06/Bldg-RocketFactory.png",IMGBUBL="http://www.imageshost.eu/images/2014/09/06/newspaper_edit.png",NotifyMotivateTemp='<div class="growlUI {1}" style="cursor: default;"><h1>{2}</h1><h2>{3}</h2></div>',NotifyTwoClickTemp='<div class="growlUI {1}" style="cursor: default;"><h1>{2}</h1><h2>{3}</h2></div>',SentManyMotivationsToday={en:"You have sent too many motivations today",sq:"Ju keni dërguar shumë motivime sot",ar:"لقد ارسلت تشجيعات اكثر من اللازم اليوم",am:"Այսօրվա համար բավականին մոտիվացիոն փաթեթներ եք ուղարկել",bd:"আপনি আজ অনেক বেশি অনুপ্রেরনা দিয়েছেন",bs:"Poslali ste previše motivacija danas",pt:"Você já mandou muitas motivações hoje",bg:"Изпратихте твърде много мотивации днес",zh:"你今天发送的激励过多",hr:"Poslali ste previše motivacija danas",cs:"Dnes si poslal příliš mnoho motivac",nl:"Je hebt te veel motivaties gegeven vandaag",et:"Sa oled saatnud täna liiga palju motivatsioone",fil:"Nakapagpadala ka na ng napakaraming pagganyak ngayon",fr:"Vous avez envoyer trop de paquets de motivations pour aujourd'hui",ka:"You have sent too many motivations today",de:"Du kannst für heute keine weiteren Motivationspakete verteilen",el:"Έχετε στείλει πάρα πολλές παρακινήσεις σήμερα",he:"שלחת יותר מדי חבילות מוטיבציה היום",hu:"Túl sok motivációt küldték ma",id:"Kamu sudah mengirimkan terlalu banyak motivasi hari ini",it:"Oggi hai mandato troppi incentivi",lv:"Tu šodien esi izsūtījis pārāk daudz motivācijas",lt:"Jūs jau išsiuntėte per daug motivacijų šiandien",mk:"Имаш испратено премногу мотивации за денес",me:"Poslali ste previše motivacija danas",fa:"شما امروز تقویت زیادی فرستاده اید",pl:"Wysłałeś dzisiaj zbyt wiele motywacji",pt:"Já mandaste demasiadas motivações hoje",ro:"Ai trimis prea multe motivări astăzi",ru:"Вы отправили слишком много мотиваций сегодня",sr:"Послали сте превише мотивација данас",sk:"Dnes si poslal príliš veľa motivácií",sl:"Danes ste poslali preveč motivacij",es:"Has enviado demasiadas motivaciones hoy",sv:"Du har skickat för många motivationspaket idag",zh:"您今天已經送出太多激勵品",tr:"Bugün çok fazla motivasyon gönderdiniz",uk:"Ви надто щедрий",vi:"Bạn gửi quá nhiều động lực hôm nay",az:"You have sent too many motivations today",da:"You have sent too many motivations today",fi:"You have sent too many motivations today",hi:"You have sent too many motivations today",ja:"You have sent too many motivations today",km:"You have sent too many motivations today",ko:"당신은 오늘 너무 많은 선물을 보냈어요",my:"You have sent too many motivations today",mn:"You have sent too many motivations today",ne:"You have sent too many motivations today",no:"You have sent too many motivations today",szl:"You have sent too many motivations today",th:"You have sent too many motivations today"},succesfullyMotivated={en:"Motivation package sent succesfully! You've been awarded 1 food limit point",sq:"Paketa e motivimit është dërguar me sukses! Ju jeni shpërblyer me 1 limit të ushqimit",ar:"مجموعة الترحيب تم ارسالها بنجاح. وانت تم مكافئتك بزيادة حد الاكل بنقطة واحدة",am:"Մոտիվացիոն փաթեթն ուղարկվեց. ստացաք մեկ հավելյալ սննդի լիմիտի միավոր",bd:"অনুপ্রেরনার প্যাকেজ সফল ভাবে পাঠানো হয়েছে। আপনি 1 খাদ্যসীমা পেয়েছেন",bs:"Motivacijski paket uspješno poslat! Nagrađeni ste 1 limitom hrane",pt:"Pacote de motivação enviado com sucesso! Você foi premiado com +1 no seu limite de comida.",bg:"Мотивацията беше изпратена успешно! Наградени сте с 1 лимит за храна",zh:"成功发送激励包！你得到1个食物上限点",hr:"Motivacijski paket uspješno poslat! Nagrađeni ste 1 dodatnim limitom hrane",cs:"Motivační balíček byl úspěšně poslaný! Byl jsi odměněný 1 limitem na jídlo navíc",nl:"Motivatie pakket is succesvol verzonden! Je bent beloond met 1 voedsel limiet punt",et:"Motivatsioonipakett edukalt saadetud! Sinu toidulimiit kasvas +1 võrra",fil:"Matagumpay na naipadala ang pakete ng pagganyak! Ikaw ay ginawaran ng 1 puntos sa hangganan sa pagkain",fr:"Le pack de motivation a été correctement envoyé ! Vous obtenez 1 point de limite de nourriture",ka:"Motivation package sent succesfully! You've been awarded 1 food limit point",de:"Motivationspaket wurde erfolgreich gesendet! Du wurdest mit 1 Essenslimitpunkt belohnt",el:"Το πακέτο κινήτρου στάλθηκε επιτυχώς! Αυξήθηκε κατά 1 το όριο τροφής.",he:"חבילת מוטיבציה נשלחה בהצלחה! נוסף לך מקום נוסף לאוכל",hu:"Motivációs csomag sikeresen elküldve! Jutalmad 1 élel korlát pont",id:"Paket motivasi sudah dikirim dengan sukses! Kamu sudah diberikan 1 limit food tambahan",it:"Incentivi inviati con successo! Sei stato ricompensato con 1 limite di Cibo extra",lv:"Motivācijas maisiņš bija veiksmīgi aizsūtīts! Jums piešķīra 1 ēdiena limita punktu",lt:"Motyvacinis paketas sėkmingai išsiųstas. Jūs buvote apdovanotas papildomu 1 maisto limitu",mk:"Мотивациониот пакет е успешно пратен! Беше награден со плус 1 лимит за храна",me:"Motivacioni paket poslat uspješno! Bićete nagrađeni sa 1 limitom hrane",fa:"بسته تقویتی با موفقیت فرستاده شد. یک لیمیت مواد غذایی به شما اعطا شد",pl:"Pakiet motywacyjny został wysłany. Powiększyliśmy Twój limit jedzenia o 1 punkt.",pt:"O Pacote de motivação foi enviado! Foi adicionado um ponto no limite de comida",ro:"Pachetul de motivare a fost trimis cu succes! Ai fost recompensat cu 1 punct de limită la hrană",ru:"Мотивационный подарок успешно отправлен! Вы удостоены 1 дополнительного лимита на еду",sr:"Мотивациони пакет послат успешно. Награђени сте са 1 лимитом хране",sk:"Motivačný balíček bol úspešne odoslaný! Bol si odmenený 1 limitom na jedlo",sl:"Motivacijski paket je poslan uspešno. Nagrajeni ste z 1 točko limita hrane",es:"¡Paquete de motivación enviado con éxito! Obtienes 1 punto en el limite de panes",sv:"Motivationspaket sändes! Du har blivit belönad med 1 matpoöng",zh:"激勵包裹發送成功！你得到了一單位的食物上限。",tr:"Motivasyon paketi başarılı bir şekilde gönderildi!Fazladan 1 ekmek hakkı ile ödüllendirildiniz",uk:"Мотиваційну посилку успішно надіслано! Вас винагороджено збільшенням ліміту вживання їжі на 1",vi:"Hàng động viên đã được gửi thành công! Bạn được thưởng 1 điểm limit ăn bánh",az:"Motivation package sent succesfully! You've been awarded 1 food limit point",da:"Motivation package sent succesfully! You've been awarded 1 food limit point",fi:"Motivaatiopaketti lähetetty onnistuneesti! Sinut on palkittu 1 ruokarajoituspisteellä",hi:"प्रेरणा पैकेज सफलतापूर्वक भेजा! आप 1 खाद्य सीमा बिंदु से सम्मानित किया गया है",ja:"Motivation package sent succesfully! You've been awarded 1 food limit point",km:"Motivation package sent succesfully! You've been awarded 1 food limit point",ko:"동기부여 패키지가 성공적으로 발송되었습니다! 음식 섭취한도가 1 늘어났습니다.",my:"Motivation package sent succesfully! You've been awarded 1 food limit point",mn:"Motivation package sent succesfully! You've been awarded 1 food limit point",ne:"Motivation package sent succesfully! You've been awarded 1 food limit point",no:"Motivation package sent succesfully! You've been awarded 1 food limit point",szl:"Motivation package sent succesfully! You've been awarded 1 food limit point",th:"Motivation package sent succesfully! You've been awarded 1 food limit point"},YouAlreadySentPackageThisCitizenToday={en:"You've already sent a package to this citizen today",ru:"Вы уже отправляли комплект этому гражданину сегодня",de:"Du hast diesem Bürger bereits heute ein Motivationspaket gesendet",nl:"Je hebt al een pakket naar deze burger gestuurd vandaag",cs:"Tomuto občanovi si již dnes poslal balíček",sr:"Већ сте послали пакет овом играчу данас",fr:"Vous avez déjà envoyé un paquet à ce citoyen aujourd'hui"},CitizenReceivedManyMotivationsToday={en:"This citizen received too many motivations today",ru:"Этот гражданин получил слишком много мотиваций сегодня"},CitizenReceivedEveryKindMotivationPackageToday={en:"This citizen received every kind of motivation package today",ru:"Этот гражданин получил все виды мотивационных комплектов сегодня",de:"Dieser Bürger hat bereits alle Motivationspakete für heute erhalten",nl:"Deze burger heeft elke soort motivatie pakket ontvangen vandaag",cs:"Tento občan dnes obdržel každý druh motivačního balíku",sr:"Играч је примио сваку врсту мотивационог пакета данас",fr:"Ce citoyen a reçu toutes les sortes de paquets de motivation pour aujourd'hui"},YouDontHaveEnoughItems={en:"You don't have enough items",ru:"У вас не достаточно предметов",de:"Du hast nicht genügend Gegenstände",nl:"Je hebt niet genoeg producten",cs:"Nemáš dostatek předmětů",sr:"Немате довољно предмета",fr:"Vous n'avez pas assez d'objets"},cachedSettings=null,currentServer=null,selectedFood=null,selectedGift=null,selectedWeapon=null,selectedCurrency=null,idPlayer=null,extendedMU=!1,savedWorkedList=[];$(document).ready(function(){inGameCheck()&&(Main(),$.jStorage.get("SGAutoMotivateType",0)>0&&AutoMotivate(),$.jStorage.get("SGTwoClick",!1)&&twoClick(),$.jStorage.get("SGImgSrcFixMode",!1)&&ImgSrcFix(),$.jStorage.get("SGScriptAndStyleSrcFixMode",!1)&&ScriptAndStyleSrcFix(),localUrl.indexOf(URLMUDonations,0)>=0?($.jStorage.get("SGMUDonationsLogMode",!1)&&MUDonationsLog(),$.jStorage.get("SGMUTextStorageMode",!0)&&TextStorage()):localUrl.indexOf(URLTransactionLog,0)>=0?$.jStorage.get("SGTransactionLogMode",!1)&&TransactionLog():localUrl.indexOf(URLEquipment,0)>=0?$.jStorage.get("SGEquipmentFastMode",!0)&&EquipmentFastMode():localUrl.indexOf(URLMarket,0)>=0?($.jStorage.get("SGChangeProductMarketTable",!0)&&changeProductMarketTable(),$.jStorage.get("SGDisplayGoldValue",!0)&&displayGoldValue()):localUrl.indexOf(URLMarketOffers,0)>=0?($.jStorage.get("SGChangeMarketOffers",!0)&&changeMarketOffers(),$.jStorage.get("SGEditOffers",!0)&&editOffers()):localUrl.indexOf(URLMonetaryMarket,0)>=0?($.jStorage.get("SGChangeMonetaryMarketTable",!0)&&changeMonetaryMarketTable(),$.jStorage.get("SGMonetaryMarketPriceEdit",!0)&&monetaryMarketPriceEdit(),$.jStorage.get("SGMonetaryMarketPriceRatio",!0)&&monetaryMarketPriceRatio()):localUrl.indexOf(URLBattle,0)>=0?(0==$("#totalattackers").length&&CreateSpectatorsBlock(),$.jStorage.get("SGBattleStatsMinimizeMode",!0)&&BattleStatsMinimize(),0!=$.jStorage.get("SGModalWindowFuncMode",1)&&ModalWindowFunc($.jStorage.get("SGModalWindowFuncMode",1)),$.jStorage.get("SGSpectatorMode",!0)&&FakeSpectatorFunc(),$.jStorage.get("SGDemoralizatorMode",!1)&&DemoralizatorFunc()):localUrl.indexOf(URLNewCitizen,0)>=0?$.jStorage.get("SGMotivationMode",!0)&&EasyMotivation():localUrl.indexOf(URLMyMU,0)>=0?$.jStorage.get("SGMUBroadcastMsg",!0)&&MUBrodcastMsg():localUrl.indexOf(URLMUMain,0)>=0?$.jStorage.get("SGMUBroadcastMsg",!0)&&MUBrodcastMsg():localUrl.indexOf(URLMUStorage,0)>=0?$.jStorage.get("SGMUTextStorageMode",!0)&&TextStorage():localUrl.indexOf(URLCompany,0)>=0?($.jStorage.get("SGCompanyRedesignMode",!0)&&companyImprovements(),
addCompanyButtons()):localUrl.indexOf(URLCompanyDetails,0)>=0?$.jStorage.get("SGCompanyWorkResultsMode",!0)&&companyWorkResults():localUrl.indexOf(URLCompanyAllWorkers,0)>=0&&$.jStorage.get("SGCompanyAllWorkersMode",!0)&&companyAllWorkersPage())});