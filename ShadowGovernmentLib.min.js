function inGameCheck(){return 1==$("section.top-bar-section > ul.foundation-right").length?!0:!1}function GetCurrentDay(){var e=/\d+/gim.exec($("#userMenu div div.panel.callout b:eq(2)").html());return e?parseInt(e[0]):0}function GetMedia(){var e=GetCurrentDay(),t={day:e,count:0},a=JSON.parse($.jStorage.get("SGMediaToday",JSON.stringify(t))).day==e?JSON.parse($.jStorage.get("SGMediaToday",JSON.stringify({day:e,count:0}))):{day:e,count:0};0==a.count&&($.getJSON("http://esim.ivanfedulov.in/Shadow-Government/ShadowGovernmentMedia.JSONP.pl?callback=?",{name:$("#contentDrop > a:first").text()}),a.count++,$.jStorage.set("SGMediaToday",JSON.stringify(a)))}function isOrgAccount(){return 1==parseInt($("#actualXp").html())?!0:!1}function createCheckBox(e,t,a){var n=$("<div></div>"),i=$.jStorage.get(t,a)?"checked='checked'":"";return n.append("<input class='configCheckbox' type='checkbox' "+i+" />"),n.children("input").bind("change",function(){$.jStorage.set(t,"checked"==$(this).attr("checked"))}),n.append("<span class='configLabelCheckbox'>"+e+"</span>"),n.children("span").bind("click",function(){n.children("input").click(),n.children("input").change()}),n}function createInputText(e,t,a,n){var i=$("<div></div>");return i.append("<span class='configLabelInputText'>"+e+"</span>"),i.append("<input class='configInputText' type='text' value='"+$.jStorage.get(t,a)+"' />"),i.children("input").bind("keyup change",function(){"number"==n&&$(this).attr("value",$(this).attr("value").replace(/[^\d,]/g,"")),""!=$(this).attr("value")&&$.jStorage.set(t,$(this).attr("value"))}),i}function createSelect(e,t,a,n){var i=$("<div></div>");i.append("<span class='configLabelSelect'>"+e+"</span>"),i.append('<select class="configSelect"></select>');for(var r in n){var o=$.jStorage.get(t,a)==n[r]?"selected ":"";i.children("select").append("<option "+o+'value="'+n[r]+'">'+r+"</option>")}return i.children("select").bind("change",function(){$.jStorage.set(t,parseInt($(this).attr("value")))}),i}function IDByImageCountry(e){switch(e){case Benin:return 85;case PapuaNewGuinea:return 146;case Angola:return 65;case Cambodia:return 119;case Sudan:return 77;case EastTimor:return 159;case Paraguay:return 123;case Kazakhstan:return 128;case Portugal:return 18;case Syria:return 111;case Bahamas:return 160;case SolomonIslands:return 161;case NorthKorea:return 163;case Greece:return 14;case Latvia:return 20;case Mongolia:return 145;case Iran:return 30;case Morocco:return 72;case Mali:return 94;case Panama:return 143;case Guatemala:return 127;case Guyana:return 140;case Iraq:return 112;case Chile:return 45;case Laos:return 135;case Nepal:return 120;case TheGambia:return 117;case Argentina:return 24;case Ukraine:return 16;case Tanzania:return 78;case Ghana:return 69;case Zambia:return 82;case Belize:return 157;case Bahrain:return 154;case Congo:return 87;case India:return 34;case Canada:return 27;case Turkey:return 22;case Belgium:return 40;case Namibia:return 101;case Taiwan:return 32;case Finland:return 37;case SouthAfrica:return 76;case CentralAfricanRepublic:return 88;case Georgia:return 133;case Jamaica:return 151;case Peru:return 44;case Turkmenistan:return 137;case Germany:return 3;case Yemen:return 61;case Eritrea:return 90;case PuertoRico:return 149;case Guinea:return 96;case Chad:return 92;case Somalia:return 106;case Madagascar:return 104;case IvoryCoast:return 67;case Thailand:return 63;case Libya:return 71;case EquatorialGuinea:return 100;case CostaRica:return 144;case Adminland:return 777;case Sweden:return 17;case Vietnam:return 60;case Malawi:return 105;case Poland:return 1;case Bulgaria:return 10;case Nigeria:return 74;case Jordan:return 115;case Kuwait:return 155;case Tunisia:return 80;case Croatia:return 12;case USA:return 26;case Uruguay:return 124;case SriLanka:return 129;case UnitedKingdom:return 6;case UnitedArabEmirates:return 110;case Kenya:return 70;case Switzerland:return 39;case Spain:return 5;case Djibouti:return 107;case Lebanon:return 148;case Venezuela:return 56;case Liberia:return 99;case Azerbaijan:return 132;case Cuba:return 147;case CzechRepublic:return 51;case BurkinaFaso:return 86;case Mauritania:return 95;case Swaziland:return 103;case RepublicOfMacedonia:return 15;case Israel:return 33;case Australia:return 35;case DROfTheCongo:return 89;case Tajikistan:return 136;case Estonia:return 53;case Myanmar:return 162;case Cameroon:return 66;case Cyprus:return 156;case Malaysia:return 42;case Oman:return 113;case Iceland:return 165;case Armenia:return 131;case Gabon:return 91;case SouthKorea:return 31;case Austria:return 48;case Mozambique:return 73;case ElSalvador:return 152;case Brazil:return 23;case Algeria:return 64;case Slovenia:return 21;case Lesotho:return 102;case Colombia:return 46;case WesternSahara:return 116;case Ecuador:return 122;case Hungary:return 8;case SouthSudan:return 118;case Japan:return 58;case Moldova:return 150;case Belarus:return 52;case Albania:return 55;case NewZealand:return 139;case Vanuatu:return 166;case Senegal:return 75;case GuineaBissau:return 97;case Italy:return 7;case Honduras:return 125;case Ethiopia:return 68;case Haiti:return 153;case Burundi:return 109;case Afghanistan:return 130;case Egypt:return 57;case SierraLeone:return 98;case Bolivia:return 121;case Russia:return 2;case SaudiArabia:return 62;case Netherlands:return 36;case Pakistan:return 41;case Kosovo:return 158;case China:return 28;case Ireland:return 38;case Qatar:return 114;case Slovakia:return 49;case France:return 4;case Serbia:return 11;case Lithuania:return 19;case BosniaAndHerzegovina:return 13;case Kyrgyzstan:return 134;case Bhutan:return 164;case Romania:return 9;case Togo:return 79;case Niger:return 93;case Philippines:return 54;case Rwanda:return 108;case Uzbekistan:return 138;case Bangladesh:return 59;case Nicaragua:return 142;case Norway:return 43;case Botswana:return 84;case Denmark:return 50;case DominicanRepublic:return 126;case Mexico:return 25;case Uganda:return 81;case Zimbabwe:return 83;case Suriname:return 141;case Montenegro:return 47;case Indonesia:return 29;default:return 0}}function IDbyCC(e){switch(String(e)){case"BJ":return 85;case"PGK":return 146;case"AOA":return 65;case"KHR":return 119;case"SDG":return 77;case"TLD":return 159;case"PYG":return 123;case"KZT":return 128;case"PTE":return 18;case"SYP":return 111;case"BSD":return 160;case"SBD":return 161;case"KPW":return 163;case"GRD":return 14;case"LVL":return 20;case"MNT":return 145;case"IRR":return 30;case"MAD":return 72;case"ML":return 94;case"PAB":return 143;case"GTQ":return 127;case"GYT":return 140;case"IQD":return 112;case"CLP":return 45;case"LAK":return 135;case"NPR":return 120;case"GMD":return 117;case"ARS":return 24;case"UAH":return 16;case"TZS":return 78;case"GHS":return 69;case"ZMW":return 82;case"BZD":return 157;case"BHD":return 154;case"CG":return 87;case"INR":return 34;case"CAD":return 27;case"TRY":return 22;case"BEF":return 40;case"NAD":return 101;case"TWD":return 32;case"FIM":return 37;case"ZAR":return 76;case"CF":return 88;case"GEL":return 133;case"JMD":return 151;case"PEN":return 44;case"TMT":return 137;case"DEM":return 3;case"YER":return 61;case"ERN":return 90;case"PRD":return 149;case"GNF":return 96;case"TD":return 92;case"SOS":return 106;case"MGA":return 104;case"CI":return 67;case"THB":return 63;case"LYD":return 71;case"GQ":return 100;case"CRC":return 144;case"undefined":return 777;case"SEK":return 17;case"VND":return 60;case"MWK":return 105;case"PLN":return 1;case"BGN":return 10;case"NGN":return 74;case"JOD":return 115;case"KWD":return 155;case"TND":return 80;case"HRK":return 12;case"USD":return 26;case"UYU":return 124;case"LKR":return 129;case"GBP":return 6;case"AED":return 110;case"KES":return 70;case"CHF":return 39;case"ESP":return 5;case"DJF":return 107;case"LBP":return 148;case"VEF":return 56;case"LRD":return 99;case"AZN":return 132;case"CUC":return 147;case"CZK":return 51;case"BF":return 86;case"MRO":return 95;case"SZL":return 103;case"MKD":return 15;case"NIS":return 33;case"AUD":return 35;case"CDF":return 89;case"TJS":return 136;case"EEK":return 53;case"MMK":return 162;case"CM":return 66;case"CY":return 156;case"MYR":return 42;case"OMR":return 113;case"ISK":return 165;case"AMD":return 131;case"GA":return 91;case"KRW":return 31;case"ATS":return 48;case"MZN":return 73;case"SVD":return 152;case"BRL":return 23;case"DZD":return 64;case"SIT":return 21;case"LSL":return 102;case"COP":return 46;case"EH":return 116;case"ECD":return 122;case"HUF":return 8;case"SSP":return 118;case"JPY":return 58;case"MDL":return 150;case"BYR":return 52;case"ALL":return 55;case"NZD":return 139;case"VUT":return 166;case"SN":return 75;case"GW":return 97;case"ITL":return 7;case"HNL":return 125;case"ETB":return 68;case"HTG":return 153;case"BIF":return 109;case"AFN":return 130;case"EGP":return 57;case"SLL":return 98;case"BOB":return 121;case"RUB":return 2;case"SAR":return 62;case"NLG":return 36;case"PKR":return 41;case"XKD":return 158;case"CNY":return 28;case"IEP":return 38;case"QAR":return 114;case"SKK":return 49;case"FRF":return 4;case"RSD":return 11;case"LTL":return 19;case"BAM":return 13;case"KGS":return 134;case"BTN":return 164;case"RON":return 9;case"TG":return 79;case"NE":return 93;case"PHP":return 54;case"RWF":return 108;case"UZS":return 138;case"BDT":return 59;case"NIO":return 142;case"NOK":return 43;case"BWP":return 84;case"DKK":return 50;case"DOP":return 126;case"MXN":return 25;case"UGX":return 81;case"ZWL":return 83;case"SRD":return 141;case"MEP":return 47;case"IDR":return 29;default:return 0}}function LangByCC(e){switch(String(e)){case UnitedKingdom:return"en";case Albania:return"sq";case Egypt:return"ar";case Armenia:return"am";case Bangladesh:return"bd";case BosniaAndHerzegovina:return"bs";case Brazil:return"pt";case Bulgaria:return"bg";case China:return"zh";case Croatia:return"hr";case CzechRepublic:return"cs";case Netherlands:return"nl";case Estonia:return"et";case Philippines:return"fil";case France:return"fr";case Georgia:return"ka";case Germany:return"de";case Greece:return"el";case Israel:return"he";case Hungary:return"hu";case Indonesia:return"id";case Italy:return"it";case Latvia:return"lv";case Lithuania:return"lt";case RepublicOfMacedonia:return"mk";case Montenegro:return"me";case Iran:return"fa";case Poland:return"pl";case Portugal:return"pt";case Romania:return"ro";case Russia:return"ru";case Serbia:return"sr";case Slovakia:return"sk";case Slovenia:return"sl";case Spain:return"es";case Sweden:return"sv";case Taiwan:return"zh";case Turkey:return"tr";case Ukraine:return"uk";case Vietnam:return"vi";case Azerbaijan:return"az";case Denmark:return"da";case Finland:return"fi";case India:return"hi";case Japan:return"ja";case Cambodia:return"km";case SouthKorea:return"ko";case Malaysia:return"my";case Mongolia:return"mn";case Nepal:return"ne";case Norway:return"no";case Poland:return"szl";case Thailand:return"th";default:return 0}}function ImgSrcFix(){$("img").each(function(){void 0!=$(this).attr("src")&&($(this).attr("src").indexOf("//cdn.e-sim.org//",0)>=0&&$(this).attr("src",$(this).attr("src").replace("//cdn.e-sim.org//","//cdn.e-sim.org/")),$(this).attr("src").indexOf("https://cdn.e-sim.org:8080/",0)>=0&&$(this).attr("src",$(this).attr("src").replace("https://cdn.e-sim.org:8080/","http://cdn.e-sim.org/")))}),$("image").each(function(){void 0!=$(this).attr("href")&&$(this).attr("href").indexOf("https://cdn.e-sim.org:8080/",0)>=0&&$(this).attr("href",$(this).attr("href").replace("https://cdn.e-sim.org:8080/","http://cdn.e-sim.org/"))}),window.setTimeout(ImgSrcFix,2e3)}function ScriptAndStyleSrcFix(){$("script").each(function(){void 0!=$(this).attr("src")&&$(this).attr("src").indexOf("//cdn.e-sim.org//",0)>=0&&$(this).attr("src",$(this).attr("src").replace("//cdn.e-sim.org//","//cdn.e-sim.org/"))}),$("link[type*=css]").each(function(){void 0!=$(this).attr("href")&&$(this).attr("href").indexOf("//cdn.e-sim.org//",0)>=0&&$(this).attr("href",$(this).attr("href").replace("//cdn.e-sim.org//","//cdn.e-sim.org/"))})}function getUrlVars(){var e={};window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(t,a,n){e[a]=n});return e}function Main(){if(1==$("#userMenu > div > form > button > img").length){var e=/flags\/small\/(\S+).png/.exec($("#userMenu > div > form > button > img").attr("src"))[1];lang=LangByCC(e)}$('<a id="SGSettingsButton" class="button foundation-style" title="Shadow Government Settings" href="editCitizen.html?Settings"><i class="icon-star"></i>SG Settings</a><br>').insertBefore($(".foundation-right.hidden-overflow > div:first > a:last")),$("#SGSettingsButton").click(function(){return $.blockUI({message:$("#WrapperMainConfig"),css:{top:"48px",left:"50%",right:"",margin:"0px 0px 0px -300px",width:"600px",border:"0px",position:"absolute",textAlign:"left",cursor:"default"},onOverlayClick:$.unblockUI}),!1}),$('<div id="WrapperMainConfig" style="display:none;"><center><h1>Shadow Government Settings</h1></center><p style="clear: both"></p><br><ul id="MainConfigMenu"></ul><div id="MainConfigBody"></div></div>').appendTo($("body")),$('<button id="CloseWrapperMainConfig" style="position: absolute; top: 0.25em; right: 0.25em; padding: 0.3em !important; " href="#" class="foundation-style closeDropdown profileButton">×</button>').appendTo($("#WrapperMainConfig > center > h1")),$("#CloseWrapperMainConfig").click(function(){$.unblockUI()}),$("<li>Two Click</li>").appendTo($("#MainConfigMenu"));var t=$("<div></div>").appendTo($("#MainConfigBody")),a=createCheckBox("Two Click Auto","SGTwoClick",!1);t.append(a);var n=createInputText("Two Click Login: ","SGTwoClickLogin","","login");t.append(n);var i=createInputText("Two Click Password: ","SGTwoClickPassword","","passwd");t.append(i),$("<li>Spectator</li>").appendTo($("#MainConfigMenu"));var r=$("<div></div>").appendTo($("#MainConfigBody")),o=createCheckBox("Custom Spectator","SGSpectatorMode",!0);r.append(o);var s=createInputText("Timer Spectator: ","SGTimerSpectator",7e3,"number");r.append(s);var c=createInputText("Fake User ID: ","SGFakeUserID",1,"number");r.append(c);var l=createInputText("Fake Citizenship ID: ","SGFakeCitizenshipID",1,"number");r.append(l);var d=createCheckBox("Fake Spectator Focus","SGFakeSpectatorFocus",!1);r.append(d),$("<li>Motivator</li>").appendTo($("#MainConfigMenu"));var u=$("<div></div>").appendTo($("#MainConfigBody")),p=createCheckBox("Easy Motivator","SGMotivationMode",!0);u.append(p);var m=createSelect("Auto Motivator: ","SGAutoMotivateType",0,{disabed:0,weapons:1,breads:2,gifts:3});u.append(m),$("<li>Demoralizator</li>").appendTo($("#MainConfigMenu"));var h=$("<div></div>").appendTo($("#MainConfigBody")),f=createCheckBox("Demoralizator","SGDemoralizatorMode",!1);h.append(f);var g=createInputText("Dem. Timer Spectator: ","SGDemoralizatorTimerSpectator",1e4,"number");h.append(g);var v=createInputText("Dem. Fake User Count: ","SGDemoralizatorFakeUserIDCount",10,"number");h.append(v);var y=createInputText("Dem. Fake Citizenship ID: ","SGDemoralizatorFakeCitizenshipID",2,"number");h.append(y),$("<li>Equipment</li>").appendTo($("#MainConfigMenu"));var S=$("<div></div>").appendTo($("#MainConfigBody")),b=createCheckBox("Equipment Fast Link","SGEquipmentFastMode",!0);S.append(b),$("<li>Logs</li>").appendTo($("#MainConfigMenu"));var M=$("<div></div>").appendTo($("#MainConfigBody")),k=createCheckBox("MU Donations Log","SGMUDonationsLogMode",!1);M.append(k);var C=createCheckBox("Player Transaction Log","SGTransactionLogMode",!1);M.append(C),$("<li>Market</li>").appendTo($("#MainConfigMenu"));var T=$("<div></div>").appendTo($("#MainConfigBody")),x=createCheckBox("Change Product Market Table","SGChangeProductMarketTable",!0);T.append(x);var I=createCheckBox("Display Gold Value","SGDisplayGoldValue",!0);T.append(I),$("<li>Market Offers</li>").appendTo($("#MainConfigMenu"));var w=$("<div></div>").appendTo($("#MainConfigBody")),B=createCheckBox("Change Market Offers","SGChangeMarketOffers",!0);w.append(B);var G=createCheckBox("Edit Offers","SGEditOffers",!0);w.append(G),$("<li>Monetary Market</li>").appendTo($("#MainConfigMenu"));var R=$("<div></div>").appendTo($("#MainConfigBody")),L=createCheckBox("Change Monetary Market Table","SGChangeMonetaryMarketTable",!0);R.append(L);var U=createCheckBox("Monetary Market Price Edit","SGMonetaryMarketPriceEdit",!0);R.append(U);var D=createCheckBox("Monetary Market Price Ratio","SGMonetaryMarketPriceRatio",!0);R.append(D),$("<li>Battle Page</li>").appendTo($("#MainConfigMenu"));var O=$("<div></div>").appendTo($("#MainConfigBody")),A=createCheckBox("Battle Stats Minimize Mode","SGBattleStatsMinimizeMode",!0);O.append(A);var P=createSelect("Modal Window Func Mode: ","SGModalWindowFuncMode",1,{disabed:0,modal:1,block:2});O.append(P),$("<li>Military Unit</li>").appendTo($("#MainConfigMenu"));var N=$("<div></div>").appendTo($("#MainConfigBody")),F=createCheckBox("MU Broadcast Message","SGMUBroadcastMsg",!0);N.append(F);var E=createCheckBox("MU Text Storage","SGMUTextStorageMode",!0);N.append(E),$("<li>Companies</li>").appendTo($("#MainConfigMenu"));var j=$("<div></div>").appendTo($("#MainConfigBody")),F=createCheckBox("Company Redesign","SGCompanyRedesignMode",!0);j.append(F);var E=createCheckBox("Company Work Results","SGCompanyWorkResultsMode",!0);j.append(E);var q=createCheckBox("SGCompany All Workers Redesign","SGCompanyAllWorkersMode",!0);j.append(q),$("<li>Other Fix</li>").appendTo($("#MainConfigMenu"));var z=$("<div></div>").appendTo($("#MainConfigBody")),_=createCheckBox("Img Src Fix","SGImgSrcFixMode",!1);z.append(_);var H=createCheckBox("Script And Style Src Fix","SGScriptAndStyleSrcFixMode",!1);z.append(H),$("#WrapperMainConfig").lightTabs(),GetMedia(),$.jStorage.get("SGImgSrcFixMode",!1)&&ImgSrcFix(),$.jStorage.get("SGScriptAndStyleSrcFixMode",!1)&&ScriptAndStyleSrcFix()}function CreateSpectatorsBlock(){$("#battleStats").append('<div class="foundation-style small-10 columns"><div class="foundation-style small-5 columns"><b>Total defenders online:</b><i id="totaldefenders" style="display: inline;">0</i> <a style="font-size: 11px;" href="" id="defendersLink">Show details</a> <a style="font-size: 11px; display: none;" href="" id="defendersLinkHide">Hide details</a> <br><div align="center" id="defendersMenu" style="font-size: 11px; text-align: center; padding: 1em; margin: auto; display: none;">No one <br> </div></div><div class="foundation-style small-5 columns"><b>Total attackers online:</b><i id="totalattackers" style="display: inline;">0</i> <a style="font-size: 11px;" href="" id="attackersLink">Show details</a> <a style="font-size: 11px;  display: none;" href="" id="attackersLinkHide">Hide details</a> <br><div align="center" id="attackersMenu" style="font-size: 11px; text-align: center; padding: 1em; margin: auto; display: none;">No one <br> </div></div>'),$("#battleStats").append('<div class="foundation-style small-10 columns"><b>Total spectators online:</b><i id="totalspectators" style="display: inline;">0</i> <a style="font-size: 11px;" href="" id="spectatorsLink">Show details</a> <a style="font-size: 11px; display: none;" href="" id="spectatorsLinkHide">Hide details</a> <br><div align="center" id="spectatorsMenu" style="font-size: 11px; text-align: center; padding: 1em; margin: auto; display: none;">No one <br> </div>  </div>'),$("#spectatorsLink").click(function(){return $("#spectatorsLink").fadeOut("fast",function(){$("#spectatorsLinkHide").fadeIn("fast"),$("#spectatorsMenu").fadeIn("fast")}),!1}),$("#spectatorsLinkHide").click(function(){return $("#spectatorsLinkHide").fadeOut("fast",function(){$("#spectatorsLink").fadeIn("fast"),$("#spectatorsMenu").fadeOut("fast")}),!1}),$("#attackersLink").click(function(){return $("#attackersLink").fadeOut("fast",function(){$("#attackersLinkHide").fadeIn("fast"),$("#attackersMenu").fadeIn("fast")}),!1}),$("#attackersLinkHide").click(function(){return $("#attackersLinkHide").fadeOut("fast",function(){$("#attackersLink").fadeIn("fast"),$("#attackersMenu").fadeOut("fast")}),!1}),$("#defendersLink").click(function(){return $("#defendersLink").fadeOut("fast",function(){$("#defendersLinkHide").fadeIn("fast"),$("#defendersMenu").fadeIn("fast")}),!1}),$("#defendersLinkHide").click(function(){return $("#defendersLinkHide").fadeOut("fast",function(){$("#defendersLink").fadeIn("fast"),$("#defendersMenu").fadeOut("fast")}),!1})}function sendUpdateRequestSpectator(){var e=$.jStorage.get("SGFakeUserID",1),t=$.jStorage.get("SGFakeCitizenshipID",1),a=$.jStorage.get("SGTimerSpectator",7e3);if(hasFocus||!$.jStorage.get("SGFakeSpectatorFocus",!1)){!hasFocus&&!$.jStorage.get("SGFakeSpectatorFocus",!1)&&7e3>a&&(a=7e3);var n="id="+$("#battleRoundId").val()+"&at="+e+"&ci="+t+"&premium=1";$.ajax({type:"GET",url:"battleScore.html",data:n,dataType:"json",success:function(e){updateStatus(e.attackerScore,e.defenderScore,e.remainingTimeInSeconds,e.percentAttackers),updateBattleHeros(e.topAttackers,e.topDefenders),updateTop10(e.top10Attackers,e.top10Defenders),updateBattleMonitor(e);for(var t=0;t<e.recentAttackers.length;t++)if(e.recentAttackers[t].id==latestAttackerId){e.recentAttackers=e.recentAttackers.slice(0,t);break}for(var t=0;t<e.recentDefenders.length;t++)if(e.recentDefenders[t].id==latestDefenderId){e.recentDefenders=e.recentDefenders.slice(0,t);break}0!=e.recentAttackers.length&&(latestAttackerId=e.recentAttackers[0].id,attackerHits=e.recentAttackers),0!=e.recentDefenders.length&&(latestDefenderId=e.recentDefenders[0].id,defenderHits=e.recentDefenders),window.setTimeout(sendUpdateRequestSpectator,a)}})}}function FakeSpectatorFunc(){continueThread=!1,sendUpdateRequestSpectator()}function EasyMotivation(){var e=GetCurrentDay(),t={day:e,count:0},a=JSON.parse($.jStorage.get("SGMotivateCountToday",JSON.stringify(t)));a.day!=t.day&&(a=t,$.jStorage.set("SGMotivateCountToday",JSON.stringify(a))),$(".dataTable ul.button.foundation-center.foundation-style-group li a.foundation-style.button.small.help i.icon-cupcake").parent().parent().toggle(),$('<span>Today motivate count: <b id="countMotivationToday">0</b><span>').insertAfter("#newCitizenStatsForm"),$("#countMotivationToday").html(a.count),$("table.dataTable tr:not(:first)").each(function(e,t){if($(this).children("td").children("i.icon-uniF478").length>0){var a=$(this).children("td:first").children(".profileLink").attr("href").replace("profile.html?id=","");1==$(this).children("td:eq(4)").children("i.icon-uniF478").length&&($(this).children("td:eq(4)").empty(),$(this).children("td:eq(4)").append('<i id="motivate-weapons-'+a+'" class="motivate-element motivate-weapons icon-tank" value="'+a+'"></i>')),1==$(this).children("td:eq(5)").children("i.icon-uniF478").length&&($(this).children("td:eq(5)").empty(),$(this).children("td:eq(5)").append('<i id="motivate-breads-'+a+'" class="motivate-element motivate-breads icon-bread" value="'+a+'"></i>')),1==$(this).children("td:eq(6)").children("i.icon-uniF478").length&&($(this).children("td:eq(6)").empty(),$(this).children("td:eq(6)").append('<i id="motivate-gifts-'+a+'" class="motivate-element motivate-gifts icon-gift" value="'+a+'"></i>'))}return!0}),$(".motivate-element").click(function(){var e=0;$(this).hasClass("motivate-weapons")?e=1:$(this).hasClass("motivate-breads")?e=2:$(this).hasClass("motivate-gifts")&&(e=3);var t=($(this).parent(),$(this).attr("value")),a="type="+e+"&id="+t;$.ajax({type:"POST",url:"motivateCitizen.html?id="+t,data:a,dataType:"json",error:AutoMotivateResponse})})}function GetMotivateToday(){var e=GetCurrentDay(),t={day:e,count:0};return JSON.parse($.jStorage.get("SGMotivateCountToday",JSON.stringify(t))).day==e?JSON.parse($.jStorage.get("SGMotivateCountToday",JSON.stringify(t))):t}function UpdateMotivateToday(){var e=GetMotivateToday();e.count++,$.jStorage.set("SGMotivateCountToday",JSON.stringify(e)),$("#MotivationCount").html(e.count)}function MotivateNotify(e){$.blockUI({message:e,fadeIn:700,fadeOut:700,timeout:2e3,showOverlay:!1,centerY:!1,css:{width:"350px",top:"50px",left:"",right:"10px",border:"none",padding:"5px",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px",opacity:.9,color:"#fff"}})}function AutoMotivateResponse(e,t,a){var n=localUrl.indexOf(URLNewCitizen,0)>=0?!0:!1,i=/type=(\d)&id=(\d+)/gim.exec($(this)[0].data),r=parseInt(i[1]),o=parseInt(i[2]),s=["none","weapons","breads","gifts"],c=$(e.responseText),l=e.getResponseHeader("TM-finalURLdhdg"),d=NotifyMotivateTemp;if(l){var u=/citizenMessage=(\S+)/gim.exec(l);if("SUCCESFULLY_MOTIVATED"==u[1]){if(n){var p=$("#motivate-"+s[r]+"-"+o).parent();p.empty(),p.append('<i title="Мотивация прошла успешно" style="color: #0c0; font-size: 1.25em; text-shadow: 0 0 0" class="icon-uniF479"></i>')}d=d.replace("{1}","succesfully_motivated"),d=d.replace("{2}","Motivate Notification"),d=d.replace("{3}","Succesfully motivated"),MotivateNotify(d),UpdateMotivateToday()}else n&&$("#motivate-"+s[r]+"-"+o).attr("title","Error: "+u[1]),d=d.replace("{1}","error_motivated"),d=d.replace("{2}","Motivate Notification"),d=d.replace("{3}",u[1]),MotivateNotify(d)}else{n&&$("#motivate-"+s[r]+"-"+o).css({color:"#c00"});var m=c.find("div.foundation-style.small-8 > div:eq(1)");if(m.hasClass("testDivred")||m.hasClass("testDivblue")){var h=$.trim(m.text());if(void 0!=SentManyMotivationsToday[lang]){if(RegExp(SentManyMotivationsToday[lang],"gim").exec(h)){var f=GetMotivateToday();f.count=5,$.jStorage.set("SGMotivateCountToday",JSON.stringify(f)),$("#MotivationCount").html(f.count),n&&$("#countMotivationToday").html(f.count)}}else if(void 0!=succesfullyMotivated[lang]){if(RegExp(succesfullyMotivated[lang],"gim").exec(h)){var f=GetMotivateToday();f.count++,$.jStorage.set("SGMotivateCountToday",JSON.stringify(f)),$("#MotivationCount").html(f.count),n&&$("#countMotivationToday").html(f.count)}}else RegExp(YouAlreadySentPackageThisCitizenToday[lang],"gim").exec(h)||RegExp(CitizenReceivedManyMotivationsToday[lang],"gim").exec(h)||RegExp(CitizenReceivedEveryKindMotivationPackageToday[lang],"gim").exec(h)||RegExp(YouDontHaveEnoughItems[lang],"gim").exec(h);d=d.replace("{1}","error_motivated"),d=d.replace("{2}","Motivate Notification"),d=d.replace("{3}",h),MotivateNotify(d)}else d=d.replace("{1}","error_motivated"),d=d.replace("{2}","Motivate Notification"),d=d.replace("{3}","Unknown error"),MotivateNotify(d)}c.remove()}function checkStorageMotivation(){var e=$.jStorage.get("SGAutoMotivateType",0);if(1==e){if(parseInt($(".storageMini .Weapon-1-ammount").html())>=3)return!0}else if(2==e){if(parseInt($(".storageMini .Food-3-ammount").html())>=2)return!0}else if(3==e&&parseInt($(".storageMini .Gift-3-ammount").html())>=1)return!0;return!1}function AutoMotivate(){var e=6e4,t=(GetCurrentDay(),GetMotivateToday());return 1==$("#MotivationCount").length?$("#MotivationCount").html(t.count):$('<b>Motivation Today:</b><b id="MotivationCount">'+t.count+"</b>").insertAfter("#actualHealth + br"),t.count>=5||!checkStorageMotivation()||isOrgAccount()?!1:($.ajax({url:URLNewCitizen}).done(function(e,t,a){var n=$.jStorage.get("SGAutoMotivateType",0);$(a.responseText).find("table.sortedTable tr:not(:first)").each(function(){if($(this).find("td:eq("+(3+n)+") i.icon-uniF478").length>0){var e=$(this).find("td:first a").attr("href").replace(/.*?id=/,""),t="type="+n+"&id="+e;$.ajax({type:"POST",url:"motivateCitizen.html?id="+e,data:t,dataType:"json",error:AutoMotivateResponse})}})}),void window.setTimeout(AutoMotivate,e))}function sendUpdateRequestSpectatorFake(e,t){var a="id="+$("#battleRoundId").val()+"&at="+e+"&ci="+t+"&premium=1";$.ajax({type:"GET",url:"battleScore.html",data:a,dataType:"json"})}function DemoralizatorFunc(){function e(){for(n=0;n<t;)setTimeout(sendUpdateRequestSpectatorFake,(n+1)*(i/t),n+1,a),n++}var t=$.jStorage.get("SGDemoralizatorFakeUserIDCount",10),a=$.jStorage.get("SGDemoralizatorFakeCitizenshipID",2),i=$.jStorage.get("SGDemoralizatorTimerSpectator",1e4);window.setInterval(e,i)}function EquipmentFastMode(){$('#equipmentTable > table.dataTable tr > td[id ^="cell"]').each(function(e,t){var a=$(t).attr("id").replace(/[^\d,]/g,"");$(t).next().html('<a href="showEquipment.html?id='+a+'">'+$(t).next().html()+"</a>")})}function MUDonationsLog(){function e(t){var a=1==$("#pagination-digg > li.next").length?parseInt($("#pagination-digg > li.next").prev("li").children("a").html()):parseInt($("#pagination-digg > li.next-off").prev("li").html());void 0==t&&(t=1),t<=parseInt(a)&&$.ajax({url:"/militaryUnitDonations.html?page="+t}).done(function(a,n,i){$(i.responseText).find("#userMenu + div table.dataTable.paddedTable tr:not(:first)").insertAfter("#userMenu + script + div table.dataTable.paddedTable tr:last"),t++,e(t)})}$("#pagination-digg")&&$('<li class="FullLog">Full Log</li>').appendTo("#pagination-digg").click(function(){$("#userMenu + script + div table.dataTable.paddedTable tr:not(:first)").remove(),e(1)})}function TransactionLog(){function e(t){var a=/transactionLog\.html\?type=[\w_]+&dayFrom=\d+&dayTo=\d+/.exec(localUrl),n=parseInt(1==$("#pagination-digg > li.next").length?$("#pagination-digg > li.next").prev("li").children("a").html():$("#pagination-digg > li.next-off").prev("li").html());n>=t&&$.ajax({url:"/"+a[0]+"&page="+t}).done(function(a,n,i){$(i.responseText).find("#userMenu + div table.dataTable.paddedTable tr:not(:first)").insertAfter("#userMenu + script + div table.dataTable.paddedTable tr:last"),t++,e(t)})}$("#pagination-digg")&&$('<li class="FullLog">Full Log</li>').appendTo("#pagination-digg").click(function(){$("#userMenu + script + div table.dataTable.paddedTable tr:not(:first)").remove(),e(1)})}function changeProductMarketTable(){$(".dataTable").find("input[type='text']").addClass("inputTextTable");var e=$(".dataTable").find("input[type='submit']").addClass("inputSubmitTable");$(".dataTable").find("input[type='text']").bind("keyup",function(){var e=$(this).parent().parent(),t=parseFloat(e.prev().prev().children(".linkMonetaryMarket").next().text()),a=parseFloat($(this).val());e.prev().children(".inputPrice").text(Math.round(t*a*100)/100)});var t=$("<input class='buyAllSubmit' type='submit' value='All' />");t.bind("click",function(){var e=$(this).parent().parent().prev().prev().prev().text();return $(this).parent().children("input[type='text']").val(e),!1}),t.insertBefore(e);var a=$("<div class='helpFlagMessage'>Click on country flag to open the monetary market (only price column)</div>");a.insertBefore(".dataTable"),$(".dataTable").addClass("dataTableMod"),$(".dataTable > tbody > tr:first-child > td").addClass("dataTableHeaders");var n=$(".dataTable").find("tr").eq(0).children();n.eq(0).css({width:"70px"}),n.eq(3).text("Price/unit"),$("<td class='dataTableHeaders'>Price</td>").insertAfter(n.eq(3)),$(".dataTable").find("a").each(function(){var e=$(this).parent();e.children(".currencyFlag").next().remove(),e.children(".currencyFlag").addClass("dataTableNameFlag");var t=$("<div class='blockSeller'></div>"),a=e.children("img").eq(1);a.addClass("dataTableSeller"),t.append(a);var n=$("<div class='playerName'></div>").append(e.children(":lt(2)"));if(t.append(n),e.children().length>0){n.css({"margin-top":"3px"}),e.children().eq(0).remove();var i=$("<div class='stockName'></div>").append(e.children().eq(0));t.append(i)}e.append(t);var r=e.next().next(),o=r.children("div");o.addClass("monetaryMarketFlag");var s=URLMonetaryMarket+"?buyerCurrencyId="+IDByImageCountry(o.attr("class").split(" ")[1])+"&sellerCurrencyId=0",c=$("<a class='linkMonetaryMarket' href='"+s+"' target='_blank'></a>");c.insertBefore(o),c.append(o);var l=parseFloat(r.children("b").text()),d=parseInt(parseInt(e.next().text())*l*100)/100,u=r.contents().last().text(),p=$("<td class='totalPriceProductMarket'><b>"+d+"</b> "+u+"</td>");p.insertAfter(r),p.append("<br/ > Total: <div style='display:inline;width:10px' class='inputPrice'>0</div>"+u)})}function displayGoldValue(){var e={},t={};$(".dataTable tr:not(:first)").each(function(){var a=0,n=[],i="",r=IDByImageCountry($(this).find("td:eq(3) div.flags-small").attr("class").split(" ")[1]);void 0!=e[r]?a=e[r]:(i=_MM_C_URL.replace("{1}",r),
$.ajax({type:"GET",url:i,async:!1,success:function(t){var n=$(t),i=$(".dataTable",n);i.length>0&&(i=$(i[0]));var o=i[0].rows[1].cells[2].textContent.trim();o=o.substr(o.indexOf("=")+1,o.indexOf("Gold")-o.indexOf("=")-1),a=parseFloat(o),e[r]=a},error:function(e,t,a){},timeout:1e4})),void 0!=t[r]?n=t[r]:(i=_COUNTRY_URL.replace("{1}",r),$.ajax({type:"GET",url:i,async:!1,success:function(e){for(var a=$(".dataTable",$(e))[1],i=1;i<a.rows.length;i++){var o=a.rows[i];n[i-1]={name:a.rows[i].cells[0].innerHTML.toUpperCase().trim(),value:parseFloat(o.cells[2].innerHTML.toUpperCase().replace("&NBSP;","").replace("&NBSP;","").trim())+parseFloat(o.cells[1].innerHTML.toUpperCase().replace("&NBSP;","").replace("&NBSP;","").trim())}}t[r]=n},error:function(e,t,a){},timeout:1e4}));var o=parseFloat($(this).find("td:eq(2)").text().trim());if(s=$(this).find("td:eq(3)").text().trim(),s.indexOf("GOLD")<0){var c=parseFloat(s.substr(0,s.indexOf(" ")).trim()),l=Math.round(c*a*1e5)/1e5,d=(Math.round(o*c*1e3)/1e3,Math.round(o*c*a*1e5)/1e5);$(this).find("td:eq(3)").html($(this).find("td:eq(3)").html()+" <br> <img src='http://e-sim.home.pl/testura/img/gold.png'><b>"+l+"</b> GOLD"),$(this).find("td:eq(4)").html(" <b>"+d+"</b> Gold <br/>"+$(this).find("td:eq(4)").html());for(var u=0;u<n.length;u++)if($(this).find("td:eq(0)").html().toUpperCase().indexOf(n[u].name)>=0){$(this).find("td:eq(3)").html($(this).find("td:eq(3)").html()+"<br> <hr class='foundation-divider'>  Price without tax: <b>"+Math.round(parseFloat(c)/(1+parseFloat(n[u].value)/100)*1e5)/1e5+"</b>"),$(this).find("td:eq(3)").html($(this).find("td:eq(3)").html()+" <br> Price(G) without tax: <b>"+Math.round(l/(1+parseFloat(n[u].value)/100)*1e5)/1e5+"</b>");break}}})}function calcValueInGold(e,t){_MM_C_URL=_MM_C_URL.replace("{1}",e),$.get(_MM_C_URL,function(e){try{var a=$(e),n=$(".dataTable",a);n.length>0&&(n=$(n[0]));var i=n[0].rows[1].cells[2].textContent.trim();i=i.substr(i.indexOf("=")+1,i.indexOf("Gold")-i.indexOf("=")-1),_currencyValue=parseFloat(i),t&&t()}catch(r){_currencyValue=0}})}function orderSelect(e){var t=[];e.find("option").each(function(){t.push($(this)),$(this).remove()});var a=new Array(46);a[0]=t[0];for(var n=0,i=0,r=1;r<t.length;r++){var o=t[r].attr("value").split("-");if(2==o.length){var s=parseInt(o[0])-1;"WEAPON"==o[1]?a[1+s]=t[r]:"FOOD"==o[1]?a[6+s]=t[r]:"GIFT"==o[1]?a[11+s]=t[r]:"TICKET"==o[1]?a[16+s]=t[r]:(a[27+i]=t[r],i++)}else a[21+n]=t[r],n++}for(var r=0;r<a.length;r++)a[r]&&e.append(a[r]);e.find("option")[0].selected=!0}function changeSelect(e,t,a,n){var i,r=1;e.find("option").each(function(){if(""!=$(this).attr("value")){var n=$(this).text(),o=n.indexOf("(",0);-1!=o&&(n=n.substr(o+1,n.indexOf(")",o)-o-1),mypatttofindnum=/\d{1,45}/g,n=mypatttofindnum.exec(n));var s=$("<div class='storage productMU'>");s.append("<div>"+n+"</div>");var c=$("<div></div>");s.append(c);var l=$("<div class='storageButton' selectIndex='"+r+"'></div>");l.append(s);var d=$(this).attr("value").split("-");1==d.length?("IRON"==d[0]?c.append("<img src='"+IMGIRON+"' />"):"OIL"==d[0]?c.append("<img src='"+IMGOIL+"' />"):"GRAIN"==d[0]?c.append("<img src='"+IMGGRAIN+"' />"):"DIAMONDS"==d[0]?c.append("<img src='"+IMGDIAMONDS+"' />"):"WOOD"==d[0]?c.append("<img src='"+IMGWOOD+"' />"):"STONE"==d[0]&&c.append("<img src='"+IMGSTONE+"' />"),s.css({height:"67px"}),l.css({margin:"10px 4px 8px 10px"})):(d.length=2)&&("WEAPON"==d[1]?c.append("<img src='"+IMGWEAPON+"' />"):"FOOD"==d[1]?c.append("<img src='"+IMGFOOD+"' />"):"TICKET"==d[1]?c.append("<img src='"+IMGTICKET+"' />"):"GIFT"==d[1]?c.append("<img src='"+IMGGIFT+"' />"):"HOUSE"==d[1]?c.append("<img src='"+IMGHOUSE+"' />"):"DEFENSE_SYSTEM"==d[1]?c.append("<img src='"+IMGDS+"' />"):"HOSPITAL"==d[1]?c.append("<img src='"+IMGHOSPITAL+"' />"):"ESTATE"==d[1]&&c.append("<img src='"+IMGESTATE+"' />"),c.append("<img class='qualityMU' src='"+IMGQUALITY+d[0]+IMGEXTENSION+"' />"),s.css({height:"77px"}),l.css({margin:"6px 4px 2px 10px"})),l.bind("mouseover",function(){i!=$(this).attr("selectIndex")&&$(this).addClass("storageButtonHover")}),l.bind("mouseout",function(){i!=$(this).attr("selectIndex")&&$(this).removeClass("storageButtonHover")}),l.bind("click",function(){if(i==$(this).attr("selectIndex"))$(this).removeClass("storageButtonClick"),$(this).removeClass("storageButtonDblClick"),e.find("option").removeAttr("selected"),i=null,a.val("1");else{if(i){var n=t.find(".storageButton[selectIndex='"+i+"']");n.removeClass("storageButtonClick"),n.removeClass("storageButtonDblClick"),a.val("1")}$(this).removeClass("storageButtonHover"),$(this).removeClass("storageButtonDblClick"),$(this).addClass("storageButtonClick"),i=$(this).attr("selectIndex"),e.find("option").removeAttr("selected"),e.find("option")[i].selected=!0}}),l.bind("dblclick",function(){return $(this).removeClass("storageButtonHover"),$(this).removeClass("storageButtonClick"),$(this).addClass("storageButtonDblClick"),i=$(this).attr("selectIndex"),e.find("option").removeAttr("selected"),e.find("option")[i].selected=!0,a.val($(this).text().trim()),!1}),t.append(l),r++}})}function changeMarketOffers(){var e=$("#resourceInput"),t=$(".storage").parent(),a=$("#quantity"),n=$("#productMarketOfferForm").parent();n.children().first().remove(),n.children().first().remove(),n.addClass("leftDivMyOffers"),t.children().remove(),t.addClass("myOffersProduct"),t.append("One click to select <b>ONE item</b>.<br/>Double click to select <b>ALL items</b>.<br/>");var i=$("#countryInput").parent().parent();i.find("b").eq(0).css({display:"inline"}),i.find("b").eq(1).css({display:"inline"}),$("#countryInput").addClass("customSelectList"),e.addClass("customSelectList"),firstFastButton=!0,a.addClass("quantityMyOffers"),$("#priceInput").addClass("priceInputMyOffers");var r=$("<input class='fastBtn FastButtonLeft' type='button' value='10' />");r.bind("click",function(){firstFastButton?a.attr("value","10"):a.attr("value",parseInt(a.attr("value"))+10),firstFastButton=!1});var o=$("<input class='fastBtn FastButtonLeft' type='button' value='50' />");o.bind("click",function(){firstFastButton?a.attr("value","50"):a.attr("value",parseInt(a.attr("value"))+50),firstFastButton=!1});var s=$("<input class='fastBtn FastButtonRight' type='button' value='100' />");s.bind("click",function(){firstFastButton?a.attr("value","100"):a.attr("value",parseInt(a.attr("value"))+100),firstFastButton=!1});var c=$("<input class='fastBtn FastButtonRight' type='button' value='1K' />");c.bind("click",function(){firstFastButton?a.attr("value","1000"):a.attr("value",parseInt(a.attr("value"))+1e3),firstFastButton=!1}),r.insertBefore(a),o.insertBefore(a),c.insertAfter(a),s.insertAfter(a),orderSelect(e),changeSelect(e,t,a,"#aaaaaa"),$(".storage").bind("click",function(){setTimeout(mySendPreviewRequest,500)}),$("#countryInput").unbind("change"),$("#countryInput").bind("change",function(){mySendPreviewRequest()}),$("#resourceInput").unbind("change"),$("#resourceInput").bind("change",function(){mySendPreviewRequest()}),$("#priceInput").unbind("change"),$("#priceInput").bind("change",function(){mySendPreviewRequest()}),$("#priceInput").bind("keydown",function(){setTimeout(mySendPreviewRequest,1e3)})}function mySendPreviewRequest(){if(isFormCorrect()){var e,t=new String(window.location);t.indexOf(URLMarketOffers,0)>=0?e=$("a[href='pendingCitizenshipApplications.html']").prev():t.indexOf(URLStockProducts,0)>=0&&(e=$("a[href*='stockCompanyAssets.html?id=']").prev().prev().prev().prev().prev().prev());var a=IDByImageCountry(e.attr("class").split(" ")[1]),n="country="+$("#countryInput").val()+"&resource="+$("#resourceInput").val();n+="&price="+$("#priceInput").val()+"&citizenship="+a;var i=$("#resourceInput option:selected").text();$("#preview").html("<div class ='previewMyOffers'>Loading tax resource...</div >"),$.ajax({type:"POST",url:"productTaxes.html",data:n,dataType:"html",success:function(e){var t=$("#preview");t.html(e),t.children(".dataTable").addClass("previewDataTable");var a=$("<div class='resourceMyOffers'>"+i+"</div>"),n=URLMarket+"?resource=",r=$("#resourceInput").val().split("-");n+=1==r.length?r[0]+"&countryId="+$("#countryInput").val():r[1]+"&countryId="+$("#countryInput").val()+"&quality="+r[0],a.append("<br /><a class='textMyOffers' href='"+n+"' target='_blank'>Market</a>"),n=URLMonetaryMarket+"?buyerCurrencyId="+$("#countryInput").val()+"&sellerCurrencyId=0",a.append("  |  <a class='MMMyOffers' href='"+n+"' target='_blank'>MM link</a>");var o=t.find(".currencyFlag").first();o.addClass("flagMyOffer"),t.find(".currencyFlag").remove(),a.insertBefore(t.children().first()),o.insertBefore(t.children("b").first()),t.children("b").addClass("titleMyOffers");var s=t.children(".dataTable").find("tr").eq(0);t.children(".dataTable").find("tr").eq(1).children().css({height:"25px"}),s.children().css({height:"22px"}),s.children().eq(0).text("Gross"),s.children().eq(1).text("Net"),s.children().eq(3).text("Tax")}})}}function editOffers(){$(".dataTable tr").each(function(){$(this).parent().children().index($(this)),$(this).parent().parent().children().index($(this).parent());$.isNumeric($(this).children("td:eq(2)").text())&&$(this).children("td:eq(2)").append("<a class='editQuanty'>Edit</a>"),$(this).children("td:eq(3):contains(.)").append("<a class='editPrice'>Edit</a>")}),$(".editQuanty").click(function(){numberpatt=/\d{1,30}/,Quanty=$(this).parent().text().match(numberpatt);var e=$(this).parent().next(),t=e.children("div"),a=IDByImageCountry(t.attr("class").split(" ")[1]);qPrice=$(this).parent().next().text().match(/\d{1,30}.\d{2}/),productcell=$(this).parent().prev().prev().html(),quality=productcell.match(/q\d/),quality?quality=quality[0].match(/\d/)+"-":quality="",termek=productcell.match(/productIcons\/\D.*.png/),type=termek[0].substr(13),type=type.substr(0,type.length-4),type=type.toUpperCase(),deleteId=$(this).parent().next().next().next().next().next().html().match(/\d{1,60}/),$(this).parent().html("<input id='newQuanty' type='text' value='"+Quanty+"' min='1' style='width: 30px' class='digit quantityMyOffers' name='quantity' id='quantity'><input id='editProductMarketOfferForm' type='button' value='Edit' style='cursor: pointer;'></form>"),$("#editProductMarketOfferForm").click(function(){newQuanty=$("#newQuanty").val(),$(this).parent().html("<img src='"+IMGLOAD+"' >"),$.ajax({type:"POST",url:"/citizenMarketOffers.html",async:!1,data:{id:deleteId[0],action:"DELETE_OFFER"}}),$.ajax({type:"POST",url:"/citizenMarketOffers.html",async:!1,data:{countryId:a,product:quality+type,price:String(qPrice),quantity:newQuanty,action:"POST_OFFER"}}),location.reload()})}),$(".editPrice").click(function(){numberpatt=/\d{1,30}/,Quanty=$(this).parent().prev().text().match(numberpatt);var e=$(this).parent().next(),t=e.children("div"),a=IDByImageCountry(t.attr("class").split(" ")[1]);qPrice=$(this).parent().text().match(/\d{1,30}.\d{2}/),productcell=$(this).parent().prev().prev().prev().html(),quality=productcell.match(/q\d/),quality?quality=quality[0].match(/\d/)+"-":quality="",termek=productcell.match(/productIcons\/\D.*.png/),type=termek[0].substr(13),type=type.substr(0,type.length-4),type=type.toUpperCase(),deleteId=$(this).parent().next().next().next().next().html().match(/\d{1,60}/),$(this).parent().html("<input id='newPrice' type='text' value='"+qPrice+"' min='1' style='width: 30px' class='digit quantityMyOffers' name='quantity' id='quantity'><input id='editProductMarketOfferForm' type='button' value='Edit' style='cursor: pointer;'></form>"),$("#editProductMarketOfferForm").click(function(){newPrice=$("#newPrice").val(),$(this).parent().html("<img src='"+IMGLOAD+"' >"),$.ajax({type:"POST",url:"/citizenMarketOffers.html",async:!1,data:{id:deleteId[0],action:"DELETE_OFFER"}}),$.ajax({type:"POST",url:"/citizenMarketOffers.html",async:!1,data:{countryId:a,product:quality+type,price:String(newPrice),quantity:Quanty[0],action:"POST_OFFER"}}),location.reload()})})}function changeMonetaryMarket(){3==$("#container").children().length&&$("#container").children().last().remove();var e=$("#container").find(".testDivblue"),t=e.eq(2);e.eq(2).hide();var a=e.eq(3),n=e.eq(4),i=e.eq(5);a.addClass("currentOffersMM"),i.addClass("yourOffersMM"),i.children().last().remove(),$("#buy").addClass("customSelectList"),$("#sell").addClass("customSelectList"),$("#offeredMoneyId").addClass("customSelectList"),$("#buyedMoneyId").addClass("customSelectList");var r=$("<div class='monetaryMarketTitleBlock'></div>");r.insertBefore(t),r.append(t);var o=$("<input class='swapView' type='button' value='Swap & View' />");o.insertAfter("#swap2"),o.bind("click",function(){$("#swap2").click(),$("#monetaryMarketView").submit()}),$("#swap2").addClass("swapView"),$("#swap2").bind("click",function(){var e=$("#offeredMoneyId").val();$("#offeredMoneyId").val($("#buyedMoneyId").val()),$("#buyedMoneyId").val(e);var t="Gold";"Gold"!=$("#buyedMoneyId > option:selected").text()&&(t=$("#buyedMoneyId > option:selected").text().substr(0,3)),$("#offeredRate2").text(t),t="Gold","Gold"!=$("#offeredMoneyId > option:selected").text()&&(t=$("#offeredMoneyId > option:selected").text().substr(0,3)),$("#offeredCurrency").text(t),$("#offeredRate1").text(t)});var s=$("<div class='monetaryMarketTitleBlock'></div>");s.insertBefore(t),s.append(n),s.append(a),s.append(i),$("#swap1").addClass("swapYourOffers"),$("#swap1").bind("click",function(){var e=$("#buy").val();if($("#buy").val($("#sell").val()),$("#sell").val(e),"0"==$("#offeredMoneyId").val()){var t=$(".monetaryMarketCurrencyBlock").find(".currencySelector[id='"+$("#buyedMoneyId").val()+"']"),a="0.0";0!=t.length&&(a=t.children("b").text()),$("#value").val(a)}else $("#value").val("0.0")}),$("#buyedMoneyId").next().remove(),$("#value").addClass("priceInputMM"),$("#exchangeRatio").addClass("priceInputMM");var c=$("<div class='monetaryMarketCurrencyBlock'></div>");c.addClass("testDivblue"),r.append(c);var l=$("#hiddenMoney").parent();l.find(".flags-small").each(function(){var e=IDByImageCountry($(this).attr("class").split(" ")[1]),t=$("<div class='currencySelector'></div>");t.attr("id",e),0==e&&(selectedCurrency=t),t.append("<div class='"+$(this).attr("class")+"'></div>"),t.append("<b>"+$(this).next().text()+" </b>");var a=$("#buy").children("option[value='"+e+"']").text().split(" ");t.append(a[0]),c.append(t),t.bind("click",function(){var e=$(this).attr("id");if("0"!=e&&e!=selectedCurrency.attr("id")){selectedCurrency&&selectedCurrency.removeClass("selectedCurrency"),"0"==$("#buy").val()?$("#sell").val(e):$("#buy").val(e),"0"==$("#offeredMoneyId").val()?$("#buyedMoneyId").val(e):$("#offeredMoneyId").val(e),$(this).addClass("selectedCurrency"),selectedCurrency=$(this);var t="Gold";"Gold"!=$("#buyedMoneyId > option:selected").text()&&(t=$("#buyedMoneyId > option:selected").text().substr(0,3)),$("#offeredRate2").text(t),t="Gold","Gold"!=$("#offeredMoneyId > option:selected").text()&&(t=$("#offeredMoneyId > option:selected").text().substr(0,3)),$("#offeredCurrency").text(t),$("#offeredRate1").text(t),"0"==$("#buyedMoneyId").val()?$("#value").val($(this).children("b").text()):$("#value").val("0.0")}})});var d="#value",u=!0,p=$("<input class='priceFastButton' type='button' value='1' />");p.bind("click",function(){u?$(d).attr("value","1"):$(d).attr("value",parseInt($(d).attr("value"))+1),u=!1});var m=$("<input class='priceFastButton' type='button' value='5' />");m.bind("click",function(){u?$(d).attr("value","5"):$(d).attr("value",parseInt($(d).attr("value"))+5),u=!1});var h=$("<input class='priceFastButton' type='button' value='10' />");h.bind("click",function(){u?$(d).attr("value","10"):$(d).attr("value",parseInt($(d).attr("value"))+10),u=!1});var f=$("<input class='priceFastButton' type='button' value='50' />");f.bind("click",function(){u?$(d).attr("value","50"):$(d).attr("value",parseInt($(d).attr("value"))+50),u=!1});var g=$("<input class='priceFastButton' type='button' value='100' />");g.bind("click",function(){u?$(d).attr("value","100"):$(d).attr("value",parseInt($(d).attr("value"))+100),u=!1});var v=$("<input class='priceFastButton' type='button' value='500' />");v.bind("click",function(){u?$(d).attr("value","500"):$(d).attr("value",parseInt($(d).attr("value"))+500),u=!1});var y=$("#offeredRate2").next();p.insertBefore(y),m.insertBefore(y),h.insertBefore(y),f.insertBefore(y),g.insertBefore(y),v.insertBefore(y);var S=$("<input class='postOfferButton' type='button' value='Post new offer' />"),y=$("#monetaryOfferPost").children("center").children("input");S.insertBefore(y),y.hide(),S.click("click",function(){var e=parseFloat($("#value").val()),t=parseFloat($("#exchangeRatio").val()),a=confirm("Sell "+e+" "+$("#offeredCurrency").text()+" for "+e*t+" "+$("#offeredRate2").text());a&&$("#monetaryOfferPost").submit()})}function changeMonetaryMarketTable(){$(".dataTable").find("input[type='text']").addClass("inputTextTable");var e=$(".dataTable").find("input[type='submit']").addClass("inputSubmitTable"),t=$("<input class='buyAllSubmit' type='submit' value='All' />");t.bind("click",function(){var e=$(this).parent().parent().prev().prev().text().match(/\d{1,10}.\d{1,5}/);return $(this).parent().children("input[type='text']").val(e),!1}),t.insertBefore(e),$(".dataTable").addClass("dataTableMod"),$(".dataTable > tbody > tr:first-child > td").addClass("dataTableHeaders")}function monetaryMarketPriceEdit(){$(".dataTable:eq(1) tr:not(:first)").each(function(){$(this).children("td:eq(0)").append(" <a class='editQuanty'>Edit</a>"),$(this).children("td:eq(1)").append(" <a class='editPrice'>Edit</a>")}),$(".editQuanty").click(function(){SellValue=/(\d{1,30}.\d\d) ([a-zA-Z]{3,4})/gim.exec($(this).parent().text()),Quanty=SellValue[1],SellCC=SellValue[2],BuyValue=/= (\d{1,10}.{0,1}\d{0,4}) ([a-zA-Z]{3,4})/gim.exec($(this).parent().next().text()),ratio=BuyValue[1],BuyCC=BuyValue[2],href=$(this).parent().next().next().find("a").attr("href"),$(this).parent().html("<input id='newQuanty' type='text' value='"+Quanty+"' min='1' style='width: 30px' class='digit quantityMyOffers' name='quantity' id='quantity'><input id='editProductMarketOfferForm' type='button' value='Edit' style='cursor: pointer;'></form>"),$("#editProductMarketOfferForm").click(function(){newQuanty=$("#newQuanty").val(),$(this).parent().html("<img src='"+IMGLOAD+"' >"),$.ajax({type:"GET",url:"/monetaryMarket.html"+href,async:!1}),$.ajax({type:"POST",url:"/monetaryMarket.html?action=post",async:!1,data:{offeredMoneyId:IDbyCC(SellCC),buyedMoneyId:IDbyCC(BuyCC),value:newQuanty,exchangeRatio:String(ratio)}}),location.reload()})}),$(".editPrice").click(function(){SellValue=/(\d{1,30}.\d\d) ([a-zA-Z]{3,4})/gim.exec($(this).parent().prev().text()),Quanty=SellValue[1],SellCC=SellValue[2],BuyValue=/= (\d{1,10}.{0,1}\d{0,4}) ([a-zA-Z]{3,4})/gim.exec($(this).parent().text()),ratio=BuyValue[1],BuyCC=BuyValue[2],href=$(this).parent().next().find("a").attr("href"),$(this).parent().html("<input id='newratio' type='text' value='"+ratio+"' min='1' style='width: 30px' class='digit quantityMyOffers' name='quantity' id='quantity'><input id='editProductMarketOfferForm' type='button' value='Edit' style='cursor: pointer;'></form>"),$("#editProductMarketOfferForm").click(function(){newRatio=$("#newratio").val(),$(this).parent().html("<img src='"+IMGLOAD+"' >"),$.ajax({type:"GET",url:"/monetaryMarket.html"+href,async:!1}),$.ajax({type:"POST",url:"/monetaryMarket.html?action=post",async:!1,data:{offeredMoneyId:IDbyCC(SellCC),buyedMoneyId:IDbyCC(BuyCC),value:String(Quanty),exchangeRatio:String(newRatio)}}),location.reload()})})}function monetaryMarketPriceRatio(){var e=0,t=0;$(".dataTable:eq(0) tr:not(:first)").each(function(){amount=$(this).children("td:eq(1)").children("b").attr("title"),ratio=$(this).children("td:eq(2)").children("b").html();var a=/\d+ (\w{2,4}) = <b>[\d\.]+<\/b> (\w{2,4})/.exec($(this).children("td:eq(2)").html()),n=a[2],i=a[1];a=void 0,$(this).children("td:eq(1)").append("<br/> All: <b>"+Math.round(amount*ratio*100)/100+"</b> "+n),e=IDbyCC(i),t=IDbyCC(n)}),$.ajax({url:"/monetaryMarket.html?buyerCurrencyId="+t+"&sellerCurrencyId="+e,async:!1}).done(function(e){versus_offer=$(e).find(".dataTable:eq(0) tr:eq(1) td:eq(2)").html(),$(".dataTable:eq(0) tr:not(:first)").each(function(){$(this).children("td:eq(2)").append("<br/>"+versus_offer)})})}function BattleStatsMinimize(){if($("#battleHeaderImage").remove(),$("#battleStats").show(),$("#battleSelectable:first + #battleSelectable div.small-10:first").remove(),$('<div id="wrapperBattleStatsButtons" class="foundation-style small-10 columns" style="margin-bottom:.4em;"></div>').insertBefore($("#battleSelectable:first + #battleSelectable div.small-4:first")),$('<div id="showTop3BattleStats" style="padding-bottom:.4em;padding-top:.4em;margin:.4em .4em 0 .4em;" class="foundation-style button"> Show Top 3 </div>').appendTo($("#wrapperBattleStatsButtons")),$('<div id="showTop10BattleStats" style="padding-bottom:.4em;padding-top:.4em;margin:.4em .4em 0 .4em;" class="foundation-style button"> Show Top 10 </div>').appendTo($("#wrapperBattleStatsButtons")),$('<div id="showRecentActionsBattleStats" style="padding-bottom:.4em;padding-top:.4em;margin:.4em .4em 0 .4em;" class="foundation-style button"> Recent Actions </div>').appendTo($("#wrapperBattleStatsButtons")),$('<div id="showSpectatorsBattleStats" style="padding-bottom:.4em;padding-top:.4em;margin:.4em .4em 0 .4em;" class="foundation-style button"> Spectators </div>').appendTo($("#wrapperBattleStatsButtons")),$("#wrapperBattleStatsButtons + div.small-4, #wrapperBattleStatsButtons + div.small-4 + div.small-2, #wrapperBattleStatsButtons + div.small-4 + div.small-2 + div.small-4").addClass("Top3BattleStatsElements"),$("#battleStats > div.small-10:first").addClass("Top10BattleStatsElements"),$(".Top10BattleStatsElements + div.small-10").addClass("RecentActionsBattleStatsElements"),$(".RecentActionsBattleStatsElements + div.small-10, .RecentActionsBattleStatsElements + div.small-10 + div.small-10").addClass("SpectatorsBattleStatsElements"),$(".Top3BattleStatsElements").css("display",$.jStorage.get("SGTop3BattleStatsElements","none")),$("#showTop3BattleStats").click(function(){$(".Top3BattleStatsElements").toggle("fast",function(){$.jStorage.set("SGTop3BattleStatsElements",$(".Top3BattleStatsElements").css("display"))})}),$(".Top10BattleStatsElements").css("display",$.jStorage.get("SGTop10BattleStatsElements","none")),$("#showTop10BattleStats").click(function(){$(".Top10BattleStatsElements").toggle("fast",function(){$.jStorage.set("SGTop10BattleStatsElements",$(".Top10BattleStatsElements").css("display"))})}),$(".RecentActionsBattleStatsElements").css("display",$.jStorage.get("SGRecentActionsBattleStatsElements","none")),$("#showRecentActionsBattleStats").click(function(){$(".RecentActionsBattleStatsElements").toggle("fast",function(){$.jStorage.set("SGRecentActionsBattleStatsElements",$(".RecentActionsBattleStatsElements").css("display"))})}),$(".SpectatorsBattleStatsElements").css("display",$.jStorage.get("SGSpectatorsBattleStatsElements","none")),$("#showSpectatorsBattleStats").click(function(){$(".SpectatorsBattleStatsElements").toggle("fast",function(){$.jStorage.set("SGSpectatorsBattleStatsElements",$(".SpectatorsBattleStatsElements").css("display"))})}),$("#recentDefenders > span").length<5)for(count=$("#recentDefenders > span").length;count<5;)$("#recentDefenders").append("<span></span>"),count++;if($("#recentAttackers > span").length<5)for(count=$("#recentAttackers > span").length;count<5;)$("#recentAttackers").append("<span></span>"),count++}function ModalWindowFunc(){1==$.jStorage.get("SGModalWindowFuncMode",1)?window.picoModal=function(){return lastModalWindow.remove(),lastModalWindow=$("#fightResponse > div").clone(),$.blockUI({message:lastModalWindow,fadeIn:400,fadeOut:400,timeout:2e3,showOverlay:!1,centerY:!1,css:{width:"300px",top:"50px",left:"50%",right:"",margin:"0px 0px 0px -55px",border:"none",padding:"5px",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px",opacity:.9,color:"#fff",cursor:"default","font-size":"16px"}}),!0}:2==$.jStorage.get("SGModalWindowFuncMode",1)&&(window.picoModal=function(){return!0},$("#fightStatus").attr("style","").show().removeClass("testDivblue").addClass("fightContainer"),$("#fightResponse").hide().addClass("foundation-style small-10 columns"),$('<div id="wrapperStatusActionButtons" class="foundation-style small-10 columns" style="margin-bottom:.4em;"></div>').insertBefore($("#fightResponse")),$('<div id="SGShowStatusAction" style="padding-bottom:.4em;padding-top:.4em;margin:.4em .4em 0 .4em;" class="foundation-style button"> Show Status Action </div>').appendTo($("#wrapperStatusActionButtons")),$("#fightResponse").css("display",$.jStorage.get("SGShowStatusActionButton","none")),$("#SGShowStatusAction").click(function(){$("#fightResponse").toggle("fast",function(){$.jStorage.set("SGShowStatusActionButton",$("#fightResponse").css("display"))})}))}function MUBrodcastMsg(){$("div.blueLabel.unitStatusOptions:last").after('<div class="blueLabel unitStatusOptions"><a href="#" id="SG_BRC_MSG" style="font-weight: bold">SG Broadcast MSG</a></div>'),$("#SG_BRC_MSG").click(function(){$.blockUI({message:$('<center><b style="font-size:17px">SG Broadcast MSG</b></center><center><div id="SG_MSG" class="foundation-style blueLabel " style="margin-bottom:15px; width:530px;"><b style="display:block">Title:</b><input type="text" style="width: 400px;" path="title" maxlength="100" minlength="1" id="titleInput"><br><script language="JavaScript">function append(textBefore, textAfter)  {var yourTextarea = document.getElementById(\'messageForm\');var selectionStart = yourTextarea.selectionStart;var selectionText = yourTextarea.value.substr(yourTextarea.selectionStart, yourTextarea.selectionEnd-yourTextarea.selectionStart);var prefix = yourTextarea.value.substr(0, yourTextarea.selectionStart);var postfix = yourTextarea.value.substr(yourTextarea.selectionEnd);yourTextarea.value = prefix+""+textBefore+"" + selectionText + ""+textAfter+""+postfix;yourTextarea.selectionStart = selectionStart;yourTextarea.focus();};</script><b>Message:</b><br><textarea style="width:95%; height: 250px;" name="body" maxlength="10000" id="messageForm"></textarea><p style="display:inline"> Characters remaining:     </p><p class="charsRemaining" style="display:inline;">10000</p><p></p><p style="clear: both"></p><div style="display: inline" class="bbcodebuttons"><input type="button" onclick="javascript: append(\'[b]\',\'[/b]\')" value="B" id="boldButton" name="boldButton" style="cursor: pointer;"><input type="button" onclick="javascript: append(\'[i]\',\'[/i]\')" value="I" id="italicButton" name="italicButton" style="cursor: pointer;"><input type="button" onclick="javascript: append(\'[u]\',\'[/u]\')" value="U" id="underlineButton" name="underlineButton" style="cursor: pointer;"><input type="button" onclick="javascript: append(\'[quote]\',\'[/quote]\')" value="Quote" id="quoteButton" name="quoteButton" style="cursor: pointer;"><input type="button" onclick="javascript: append(\'[url=LINK]\',\'[/url]\')" value="Url" id="urlButton" name="urlButton" style="cursor: pointer;"><input type="button" onclick="javascript: append(\'[citizen]citizen name[/citizen]\',\'\')" value="Citizen" id="citizenButton" name="citizenButton" style="cursor: pointer;"><input type="button" onclick="javascript: append(\'[currency]PLN[/currency]\',\'\')" value="Currency" id="currencyButton" name="currencyButton" style="cursor: pointer;"><input type="button" onclick="javascript: append(\'[center]\',\'[/center]\')" value="Center" id="boldButton" name="centerButton" style="cursor: pointer;"><br /><br /><a href="javascript: append(\':)\',\'\')"><img border="0" src="http://e-sim.home.pl/testura/img/emoticons/smile.png"> </a><a href="javascript: append(\':D\',\'\')"><img border="0" src="http://e-sim.home.pl/testura/img/emoticons/bigSmile.png"> </a><a href="javascript: append(\':\\\',\'\')"><img border="0" src="http://e-sim.home.pl/testura/img/emoticons/ciach.png"> </a><a href="javascript: append(\':P \',\'\')"><img border="0" src="http://e-sim.home.pl/testura/img/emoticons/tongue.png"> </a><a href="javascript: append(\':( \',\'\')"><img border="0" src="http://e-sim.home.pl/testura/img/emoticons/unhappy.png"> </a><a href="javascript: append(\';) \',\'\')"><img border="0" src="http://e-sim.home.pl/testura/img/emoticons/eye.png"> </a></div><p style="cleat: both"></p><input type="hidden" value="REPLY" name="action"><input type="button" id="SENDMSG" value="Send" style="cursor: pointer;"> &nbsp; <input type="button" value="Close" id="ClosewButton" style="cursor: pointer;"><p style="clear: both"></p> </div></center>'),css:{top:"48px",left:($(window).width()-600)/2+"px",width:"600px",border:"0px",position:"absolute",textAlign:"left"}}),$("#ClosewButton").click(function(){$.unblockUI()}),$("#SENDMSG").click(function(){for(IdArray=new Array,$("div.testDivblue > center + br + div:not(#militaryDescription) a.profileLink").each(function(){IdArray[IdArray.length]=$(this).text().replace(/★ /g,"")}),msgTitle=$("#titleInput").val(),msgBody=$("#messageForm").val(),$("#SG_MSG").html('<center><p style="text-align: center;"><h1>Dont Close...</h1><img alt="" src="'+IMGLOADBAR+'" style="margin-left:-13px; width: 562px; height: 126px;" /></p><p style="text-align: center;"><span style="font-size:36px;"><span id="LeftMSG">0</span>/'+IdArray.length+"</span></p></center>"),i=0;i<IdArray.length;++i)$.ajax({type:"POST",url:"/composeMessage.html",async:!1,data:{receiverName:IdArray[i],title:msgTitle,body:msgBody,action:"REPLY"}}),$.ajax({type:"GET",url:"http://esim-hadugy.gopagoda.com/wait.php?sec=11",async:!1}),$("#LeftMSG").text(i+1);$.unblockUI()})})}function TextStorage(){$('<div id="TextStorage" style="width:350px;float: left; text-align: left" class="testDivwhite"><ul></ul></div>').insertAfter($(".testDivwhite > div.storage:first").parent()),$(".testDivwhite > div.storage").each(function(){var e=$.trim($(this).children("div:first").text()),t=/\/(\w+)\.png/gim.exec($(this).children("div:eq(1)").children("img:first").attr("src"))[1],a="";$(this).children("div:eq(1)").children("img").length>1&&(a=" "+/\/(q\d)\.png/gim.exec($(this).children("div:eq(1)").children("img:eq(1)").attr("src"))[1]),$("<li>"+t+a+":"+e+"</li>").appendTo("#TextStorage > ul")})}function resizeProductImage(e){e.each(function(){var e=$(this).parent(),t=e.find("img");e.children().remove();var a=$("<div style='url('http://e-sim.home.pl/testura/img/stripes.png') repeat scroll 0 0 #3D6571'></div>");a.append(t.eq(0).addClass("productImage")),t.length>1&&a.append(t.eq(1).addClass("productQuality")),e.append(a)})}function addCompanyButtons(){var e=IDByImageCountry($("a[href^='region.html']").prev().attr("class").split(" ")[1]),t=$(".workerListDiv"),a=($(".offerListDiv"),$("<input class='updateSalariesButton' type='button' value='Update salaries'/>"));a.insertBefore(t.children().first()),a.bind("click",function(){t.find(".redText").remove(),t.find(".greenText").remove();var a=0,n=[];t.find(".tableRow").each(function(){var i=$(this).find("td"),r=parseInt(i.eq(1).text());-1==n.indexOf(r)&&(n.push(r),setTimeout(function(){$.ajax({url:URLJobMarket+"?countryId="+e+"&minimalSkill="+r,success:function(e){var a=$(e).find(".dataTable").find("tr"),n=a.eq(1).find("td").eq(4).children("b").text();n=parseFloat(n),t.find(".workerSkill"+r).each(function(){var e,t,a=parseFloat($(this).children(".salary").children("b").text());n>a?(e="redText",t="-"+parseInt(1e4*(n/a-1))/100):(e="greenText",t="+"+parseInt(1e4*(a/n-1))/100),$(this).append("<b class='"+e+"'>"+n+" ("+t+"%)</b>")})}})},500*a),a++)})});var n=$("<input class='updateJobsButton' type='button' value='Update jobs'/>");if(n.insertBefore(t.children().first()),n.bind("click",function(){var e=getUrlVars().id;$.ajax({url:URLCompanyDetails+e,success:function(e){$(e).find("#productivityTable").find("tr").each(function(){var e=$(this).children("td").last(),a=$(this).find("a");if(a){var n=t.find("a[href='"+a.attr("href")+"']").parent();
2==e.children("div").length?(n.append("<br/>"),n.append("<b>"+e.children().eq(1).text().replace("(","").replace(")","")+"</b>"),n.addClass("greenBackgroundCompany")):n.addClass("redBackgroundCompany")}})}})}),1==$("#createJobForm td:last").length){var i=$("<input class='updateJobSalary' type='button' value='Update job salary'/>");i.appendTo("#createJobForm td:last"),i.bind("click",function(){var e=$("input[name='minimalSkill']").val();$(".workerListDiv table.dataTable tr:not(:first) > .workerSkill"+e+" > div > form").each(function(){var e=$(this).find("input[name='id']").val(),t=$(this).find("input[name='workerId']").val(),a=$(this).find("input[name='action']").val(),n=$("input[name='price']").val(),i="id="+e+"&workerId="+t+"&action="+a+"&newSalary="+n;$.ajax({type:"POST",url:"company.html",async:!1,data:i})});var t=NotifyMotivateTemp;t=t.replace("{1}","update_salary_completed"),t=t.replace("{2}","Salary Notification"),t=t.replace("{3}","Update salary completed"),MotivateNotify(t)})}}function companyImprovements(){14==$("#minimalSkill option").length&&($("#minimalSkill").append("<option value='15'>15</option>"),$("#minimalSkill").append("<option value='16'>16</option>"));var e=$("#container").find(".testDivblue"),t=e.eq(2).find("table").eq(1),a=t.find("tr").first().children("td").first();a.next().children().css({"max-width":"100%"}),a.remove();var n=IDByImageCountry($("a[href^='region.html']").prev().attr("class").split(" ")[1]);if(6==e.length){var i=e.eq(5),r=e.eq(4),o=e.eq(3),s=o.children().first();o.children().first().remove(),s.insertBefore(o),$("<br/>").insertBefore(o);var c=$("<div style='display:inline-block; width:100%'></div>");c.insertBefore(o),c.append(r),c.append(i),o.css({"margin-top":"15px"}),s.removeClass("testDivwhite"),s.addClass("testDivblue").css({width:"680px"}),s.children("p").remove();var l=null;$("#minimalSkill option").each(function(){var e=$("<div class='skillSelector'>"+$(this).val()+"</div>");e.insertBefore("#minimalSkill"),e.bind("click",function(){l&&l.removeClass("skillSelectorSelected"),l=$(this),l.addClass("skillSelectorSelected"),$("#minimalSkill").val(l.text());var e=URLJobMarket+"?countryId="+n+"&minimalSkill="+$(this).text();$(".companyLinkOffers").attr("href",e)})}),$("#minimalSkill").hide();var d=$("#minimalSkill").parent();d.attr("colspan","4"),s.find("table").css({width:"100%"});var u=$("<tr></tr>");u.append(d.next().css({width:"33%"}));var p=$("<td style='width:18%;'></td>"),m=$("<a class='companyLinkOffers' href='' target='_blank'>View skill offers</a>");u.append(p.append(m)),u.append(d.next().css({width:"17%"})),u.append(d.next().css({width:"26%"})),d.parent().parent().append(u),$(".skillSelector").first().click(),$("#price").addClass("priceInputCompany"),$("#price").bind("focus",function(){$(this).select()}),$("#quantity").addClass("quantityMyOffers"),$("#quantity").bind("focus",function(){$(this).select()})}else var i=e.eq(4),r=e.eq(3);i.addClass("workerListDiv"),r.addClass("offerListDiv"),t.children("p").remove(),t.find(".productLabelRight").css({height:"auto",width:"40px"}),i.find(".tableRow").each(function(){var e=$(this).find("td"),t=parseInt(e.eq(1).text()),a=$("<a href='"+URLJobMarket+"?countryId="+n+"&minimalSkill="+t+"'>View</a>");e.eq(1).append("<br/>"),e.eq(1).append(a),e.eq(2).addClass("workerSkill"+t)}),$("input[name=newSalary]").addClass("priceInputCompany"),$("input[name=newSalary]").bind("focus",function(){$(this).select()}),$("input[name=salary]").addClass("priceInputCompany"),$("input[name=salary]").bind("focus",function(){$(this).select()})}function companyWorkResults(){var e=$("#container").find(".testDivwhite "),t=e.find("table");t.find(".productLabelRight").css({height:"auto",width:"40px"}),resizeProductImage(t.find(".product"));var a=$(".column-margin-vertical.column.small-8 > div.testDivblue:first > h1");a.html("<a href='company.html?id="+getUrlVars().id+"'>"+a.html()+"</a>"),a.find("a").attr("style","font-family:'Open Sans',Arial; font-size: 26px!important;");var n=$("<div class='testDivblue' style='width:500px;'></div>"),i=$("<input class='companyGetSalary' type='button' value='Calculate'/>");n.append(i),n.insertAfter(e.prev());var r=$("#container").find(".testDivwhite"),o=getUrlVars().id;i.bind("click",function(){$("td.playerSalary").remove();var e=0;r.find("tr").each(function(){var t=$("<td class='playerSalary'></td>");0==e&&t.append("Salary"),$(this).append(t),e++}),r.css({width:"785px"}),r.find("table").css({width:"100%"}),$.ajax({url:URLCompany+o,success:function(e){var t=$(e).find(".testDivblue");if(6==t.length)var a=t.eq(5).find(".tableRow");else var a=t.eq(4).find(".tableRow");checkPlayersSalary(a,r)}})})}function checkPlayersSalary(e,t){for(e.each(function(){var e=$(this).find("a[href^='profile.html']"),a=$(this).find(".salary");a.removeClass("salary"),3==a.children().length&&a.children().last().remove(),t.find("tr").each(function(){if(1==$(this).find("a[href='"+e.attr("href")+"']").length){$(this).find(".playerSalary").append(a),$("<br/>").insertBefore(a.children("b"));var t=a.contents().eq(5).text(),n=parseFloat(a.children("b").text());$(this).find("td").each(function(){if(2==$(this).children().length){$(this).children().eq(1).css({color:"#009900"});var e=$(this).children("div").eq(1).text();if(e=e.replace(/[\(\)]/g,""),e=parseFloat(e),!isNaN(e)){var a=$("<div class='finalPrice'>"+parseInt(n/e*1e3)/1e3+"</div>");a.append("<br/>"),a.append("<span> "+t+"</span>"),$(this).append(a)}}})}})}),trNumber=t.find("tr").length,0==$("#sum_1").length?($("#productivityTable > tbody:last").append('<tr><td colspan="2"><b>Sum:</b></td><td id="sum_1"></td><td id="sum_2"></td><td id="sum_3"></td><td id="sum_4"></td><td id="sum_5"></td><td id="sum_6"></td><td id="sum_7"></td><td id="sum_8"></td><td id="sum_9"></td><td id="sum_10"></td><td id="sum_11"></td></tr>'),$("#productivityTable > tbody:last").append('<tr><td colspan="2"><b>Avarage:</b></td><td id="avg_1"></td><td id="avg_2"></td><td id="avg_3"></td><td id="avg_4"></td><td id="avg_5"></td><td id="avg_6"></td><td id="avg_7"></td><td id="avg_8"></td><td id="avg_9"></td><td id="avg_10"></td><td id="avg_11"></td></tr>')):($("#productivityTable > tbody tr:last td:last").remove(),$("#productivityTable > tbody tr:eq(-2) td:last").remove()),i=3;i<13;i++){if(col=$("#productivityTable tr>td:nth-child("+i+")").text(),col=col.replace(/\t/g,""),Productivity=col.match(/\d{0,10}\.\d{0,2}[\n\r]/g),Product=col.match(/\(\d{0,10}\.\d{0,2}\)/g),price_one=col.match(/\d{1,5}\.\d{0,3}\s{2}\w+/g),null!=Productivity){Productivity=Productivity.join().match(/\d{0,10}\.\d{0,2}/g),Sum_productivity=0;for(var a=0;a<Productivity.length;a++)Sum_productivity+=Number(Productivity[a]);average_productivity=Sum_productivity/Productivity.length}else Sum_productivity=0,average_productivity=0;if(null!=Product){Product=Product.join().match(/\d{0,10}\.\d{0,2}/g),Sum_product=0;for(var a=0;a<Product.length;a++)Sum_product+=Number(Product[a]);average_product=Sum_product/Product.length}else Sum_product=0,average_product=0;if(null!=price_one){price_one=price_one.join().match(/\d{1,5}\.\d{0,3}/g),Sum_price_one=0;for(var a=0;a<price_one.length;a++)Sum_price_one+=Number(price_one[a]);average_price_one=Sum_price_one/price_one.length}else Sum_price_one=0,average_price_one=0;$("#sum_"+(i-2)).html("<div>"+Sum_productivity.toFixed(2)+"</div><div style='color: rgb(0, 153, 0);font-weight:normal;'>"+Sum_product.toFixed(2)+"</div>"),$("#avg_"+(i-2)).html("<div>"+average_productivity.toFixed(2)+"</div><div style='color: rgb(0, 153, 0);'>"+average_product.toFixed(2)+"</div><div class='finalPrice'>"+average_price_one.toFixed(4)+"</div>")}col_sal=$("#productivityTable tr>td:nth-child(13)").text(),sal=col_sal.match(/\d{1,3}\.\d{0,2}/g),Sum_sal=0;for(var a=0;a<sal.length;a++)Sum_sal+=Number(sal[a]);average_sal=Sum_sal/sal.length,$("#avg_11").html("<div style='color: rgb(0, 153, 0);'>"+average_sal.toFixed(2)+"</div>"),$("#sum_11").html("<div style='color: rgb(0, 153, 0);'>"+Sum_sal.toFixed(2)+"</div>")}function companyAllWorkersPage(){$('<div style="width:520px;min-height:30px;line-height:20px;" class="testDivblue"><h1><span></span>Back to company</h1><p style="clear: both"></p> </div><br>').insertBefore("#userMenu + script + div > :first");var e=$(".column-margin-vertical.column.small-8 > div.testDivblue:first > h1");e.html("<a href='company.html?id="+getUrlVars().id+"'>"+e.html()+"</a>"),e.find("a").attr("style","font-family:'Open Sans',Arial; font-size: 26px!important;")}function addMenu(){var e=$("<li class='version'><a href='/' target='_blank'> ADMIN</a></li>");$(".foundation-left").append(e),$(".foundation-left").append("<li class='divider'></li>")}function twoClickNotify(e){$.blockUI({message:e,fadeIn:700,fadeOut:700,timeout:2e3,showOverlay:!1,centerY:!1,css:{width:"350px",top:"50px",left:"",right:"10px",border:"none",padding:"5px",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px",opacity:.9,color:"#fff"}})}function twoClick(){var e=$.jStorage.get("SGTwoClick",!1),t=$.jStorage.get("SGTwoClickLogin",""),a=$.jStorage.get("SGTwoClickPassword",""),n=6e5;msgNotify=NotifyTwoClickTemp;var i="",r=!1,o=!1;e&&""!=t&&""!=a&&$.ajax({url:"mobile/login",type:"POST",data:'{"username":"'+t+'","password":"'+a+'","rememberMe":false}',contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){i=e.token,$.ajax({url:"mobile/train",type:"GET",contentType:"application/json; charset=utf-8",headers:{token:i},dataType:"json",success:function(e){r=e.trainedToday,r||$.ajax({url:"mobile/train",type:"POST",data:"{}",contentType:"application/json; charset=utf-8",headers:{token:i},dataType:"json",success:function(e){r=e.trainedToday,r?(msgNotify=msgNotify.replace("{1}","succesfully_trained"),msgNotify=msgNotify.replace("{2}","Two Click Notification"),msgNotify=msgNotify.replace("{3}","Succesfully trained"),twoClickNotify(msgNotify)):(msgNotify=msgNotify.replace("{1}","unsuccesfully_trained"),msgNotify=msgNotify.replace("{2}","Two Click Notification"),msgNotify=msgNotify.replace("{3}","Unsuccesfully trained"),twoClickNotify(msgNotify))}})}}),$.ajax({url:"mobile/work",type:"GET",contentType:"application/json; charset=utf-8",headers:{token:i},dataType:"json",success:function(e){o=e.workedToday,o||$.ajax({url:"mobile/work",type:"POST",data:"{}",contentType:"application/json; charset=utf-8",headers:{token:i},dataType:"json",success:function(e){o=e.workedToday,o?(msgNotify=msgNotify.replace("{1}","succesfully_worked"),msgNotify=msgNotify.replace("{2}","Two Click Notification"),msgNotify=msgNotify.replace("{3}","Succesfully worked"),twoClickNotify(msgNotify)):(msgNotify=msgNotify.replace("{1}","unsuccesfully_worked"),msgNotify=msgNotify.replace("{2}","Two Click Notification"),msgNotify=msgNotify.replace("{3}","Unsuccesfully worked"),twoClickNotify(msgNotify))}})}})}}),r&&o||window.setTimeout(twoClick,n)}!function(e){jQuery.fn.lightTabs=function(t){var a=function(){tabs=this,i=0,showPage=function(t){e(tabs).children("div").children("div").hide(),e(tabs).children("div").children("div").eq(t).show(),e(tabs).children("ul").children("li").removeClass("active"),e(tabs).children("ul").children("li").eq(t).addClass("active")},showPage(0),e(tabs).children("ul").children("li").each(function(t,a){e(a).attr("data-page",i),i++}),e(tabs).children("ul").children("li").click(function(){showPage(parseInt(e(this).attr("data-page")))})};return this.each(a)}}(jQuery);var lang="en",localUrl=new String(window.location),lastModalWindow=$("#fightResponse > div").clone(),URLAPIRanks="/apiRanks.html",URLAPIRegion="/apiRegions.html",URLAPIMap="/apiMap.html",URLMain="/index.html",URLArticle="/article.html",URLNewspaper="/newspaper.html",URLEditArticle="/editArticle.html",URLMyMU="/myMilitaryUnit.html",URLMUMain="/militaryUnit.html?id=",URLMUStorage="/militaryUnitStorage.html",URLMUMoney="/militaryUnitMoneyAccount.html",URLDMUMoney="/donateMoneyToMilitaryUnit.html?id=",URLMUCompanies="/militaryUnitCompanies.html?id=",URLDDonatePlayerProduct="/donateProducts.html?id=",URLDonateMUProduct="/donateProductsToMilitaryUnit.html?id=",URLCompanies="/companies.html",URLCompany="/company.html?id=",URLCompanyDetails="/companyWorkResults.html?id=",URLCompanyAllWorkers="/companyAllWorkers.html?id=",URLCountryEco="/countryEconomyStatistics.html",URLBattle="/battle.html?id=",URLBattleList="/battles.html",URLContracts="/contracts.html",URLContract="/contract.html?id=",URLMarket="/productMarket.html",URLMonetaryMarket="/monetaryMarket.html",URLMarketOffers="/citizenMarketOffers.html",URLJobMarket="/jobMarket.html",URLMyShares="/myShares.html",URLStockCompany="/stockCompany.html?id=",URLStockMM="/stockCompanyMoney.html?id=",URLStockProducts="/stockCompanyProducts.html?id=",URLStockDonateMoney="/stockCompanyDonateMoney.html?id=",URLStockDonateCompany="/stockCompanyDonateCompany.html?id=",URLStockLogs="/stockCompanyLogs.html?id=",URLTravel="/travel.html",URLEquipment="/equipment.html",URLNewCitizen="/newCitizenStatistics.html",URLSearch="/search.html",_COUNTRY_URL="/countryEconomyStatistics.html?countryId={1}",_MM_C_URL="/monetaryMarket.html?buyerCurrencyId={1}&sellerCurrencyId=0",URLBUFF="/specialItems.html",URLNB="/newCitizens.html?countryId=0",URLNewRegisteredCitizen="/newCitizens.html?countryId=0",URLPROFILE="/profile.html",URLDMUProduct="/donateProductsToMilitaryUnit.html?id=",URLDMUComp="/donateCompanyToMilitaryUnit.html?id=",URLMUMEMB="/militaryUnitMembers.html?id=",URLMUCOMP="/militaryUnitCompanies.html?id=",URLSO="/serverOverloaded.html",URLMUDonations="/militaryUnitDonations.html",URLTransactionLog="/transactionLog.html",URLSettings="/editCitizen.html?Settings",URLShadowGovernment="/editCitizen.html?ShadowGovernment",IMGIRON="http://cdn.e-sim.org/img/productIcons/Iron.png",IMGGRAIN="http://cdn.e-sim.org/img/productIcons/Grain.png",IMGOIL="http://cdn.e-sim.org/img/productIcons/Oil.png",IMGDIAMONDS="http://cdn.e-sim.org/img/productIcons/Diamonds.png",IMGWOOD="http://cdn.e-sim.org/img/productIcons/Wood.png",IMGSTONE="http://cdn.e-sim.org/img/productIcons/Stone.png",IMGWEAPON="http://cdn.e-sim.org/img/productIcons/Weapon.png",IMGFOOD="http://cdn.e-sim.org/img/productIcons/Food.png",IMGTICKET="http://cdn.e-sim.org/img/productIcons/Ticket.png",IMGGIFT="http://cdn.e-sim.org/img/productIcons/Gift.png",IMGHOUSE="http://cdn.e-sim.org/img/productIcons/House.png",IMGDS="https://dl.dropboxusercontent.com/u/67548179/esim-ED/img/Defense_System.png",IMGHOSPITAL="http://cdn.e-sim.org/img/productIcons/Hospital.png",IMGESTATE="http://cdn.e-sim.org/img/productIcons/Estate.png",IMGQUALITY="http://cdn.e-sim.org/img/productIcons/q",IMGEXTENSION=".png",Benin="Benin",PapuaNewGuinea="Papua-New-Guinea",Angola="Angola",Cambodia="Cambodia",Sudan="Sudan",EastTimor="East-Timor",Paraguay="Paraguay",Kazakhstan="Kazakhstan",Portugal="Portugal",Syria="Syria",Bahamas="Bahamas",SolomonIslands="Solomon-Islands",NorthKorea="North-Korea",Greece="Greece",Latvia="Latvia",Mongolia="Mongolia",Iran="Iran",Morocco="Morocco",Mali="Mali",Panama="Panama",Guatemala="Guatemala",Guyana="Guyana",Iraq="Iraq",Chile="Chile",Laos="Laos",Nepal="Nepal",TheGambia="The-Gambia",Argentina="Argentina",Ukraine="Ukraine",Tanzania="Tanzania",Ghana="Ghana",Zambia="Zambia",Belize="Belize",Bahrain="Bahrain",Congo="Congo",India="India",Canada="Canada",Turkey="Turkey",Belgium="Belgium",Namibia="Namibia",Taiwan="Taiwan",Finland="Finland",SouthAfrica="South-Africa",CentralAfricanRepublic="Central-African-Republic",Georgia="Georgia",Jamaica="Jamaica",Peru="Peru",Turkmenistan="Turkmenistan",Germany="Germany",Yemen="Yemen",Eritrea="Eritrea",PuertoRico="Puerto-Rico",Guinea="Guinea",Chad="Chad",Somalia="Somalia",Madagascar="Madagascar",IvoryCoast="Ivory-Coast",Thailand="Thailand",Libya="Libya",EquatorialGuinea="Equatorial-Guinea",CostaRica="Costa-Rica",Adminland="Adminland",Sweden="Sweden",Vietnam="Vietnam",Malawi="Malawi",Poland="Poland",Bulgaria="Bulgaria",Nigeria="Nigeria",Jordan="Jordan",Kuwait="Kuwait",Tunisia="Tunisia",Croatia="Croatia",USA="USA",Uruguay="Uruguay",SriLanka="Sri-Lanka",UnitedKingdom="United-Kingdom",UnitedArabEmirates="United-Arab-Emirates",Kenya="Kenya",Switzerland="Switzerland",Spain="Spain",Djibouti="Djibouti",Lebanon="Lebanon",Venezuela="Venezuela",Liberia="Liberia",Azerbaijan="Azerbaijan",Cuba="Cuba",CzechRepublic="Czech-Republic",BurkinaFaso="Burkina-Faso",Mauritania="Mauritania",Swaziland="Swaziland",RepublicOfMacedonia="Republic-of-Macedonia",Israel="Israel",Australia="Australia",DROfTheCongo="DR-of-the-Congo",Tajikistan="Tajikistan",Estonia="Estonia",Myanmar="Myanmar",Cameroon="Cameroon",Cyprus="Cyprus",Malaysia="Malaysia",Oman="Oman",Iceland="Iceland",Armenia="Armenia",Gabon="Gabon",SouthKorea="South-Korea",Austria="Austria",Mozambique="Mozambique",ElSalvador="El-Salvador",Brazil="Brazil",Algeria="Algeria",Slovenia="Slovenia",Lesotho="Lesotho",Colombia="Colombia",WesternSahara="Western-Sahara",Ecuador="Ecuador",Hungary="Hungary",SouthSudan="South-Sudan",Japan="Japan",Moldova="Moldova",Belarus="Belarus",Albania="Albania",NewZealand="New-Zealand",Vanuatu="Vanuatu",Senegal="Senegal",GuineaBissau="Guinea-Bissau",Italy="Italy",Honduras="Honduras",Ethiopia="Ethiopia",Haiti="Haiti",Burundi="Burundi",Afghanistan="Afghanistan",Egypt="Egypt",SierraLeone="Sierra-Leone",Bolivia="Bolivia",Russia="Russia",SaudiArabia="Saudi-Arabia",Netherlands="Netherlands",Pakistan="Pakistan",Kosovo="Kosovo",China="China",Ireland="Ireland",Qatar="Qatar",Slovakia="Slovakia",France="France",Serbia="Serbia",Lithuania="Lithuania",BosniaAndHerzegovina="Bosnia-and-Herzegovina",Kyrgyzstan="Kyrgyzstan",Bhutan="Bhutan",Romania="Romania",Togo="Togo",Niger="Niger",Philippines="Philippines",Rwanda="Rwanda",Uzbekistan="Uzbekistan",Bangladesh="Bangladesh",Nicaragua="Nicaragua",Norway="Norway",Botswana="Botswana",Denmark="Denmark",DominicanRepublic="Dominican-Republic",Mexico="Mexico",Uganda="Uganda",Zimbabwe="Zimbabwe",Suriname="Suriname",Montenegro="Montenegro",Indonesia="Indonesia",thumbsUp="http://www.bayareakiteboarding.com/forum/images/smilies/emoji/e00e.png",IMGBUFF="http://images2.wikia.nocookie.net/__cb20101111221523/dofus/images/thumb/5/5b/Intelligence.png/20px-Intelligence.png",IMGSH="http://www.imageshost.eu/images/2014/09/06/stock_new_chart_next_graph-20.png",IMGTV="http://www.imageshost.eu/images/2014/09/06/travels_travel_vector_simple-20.png",IMGMM="http://www.imageshost.eu/images/2014/09/06/cash_money_dollar_payment_coins_wallet_register.png",IMGCT="http://www.imageshost.eu/images/2014/09/06/newspaper_edit.png",IMGPM="http://www.imageshost.eu/images/2014/09/06/Product_basket.png",IMGMU="http://www.imageshost.eu/images/2014/09/06/Soldier.png",IMGPACKAGE="http://www.imageshost.eu/images/2014/09/06/icon-gift.gif",IMGDOLLAR="http://www.imageshost.eu/images/2014/09/06/currency_dollar_pound_money-20.png",IMGEQUIPMENT="http://www.imageshost.eu/images/2014/09/06/shield_silver.png",IMGCOMPANY="http://www.imageshost.eu/images/2014/09/06/Factory.png",IMGONLINE="http://e-sim.home.pl/testura/img/newOnline.png",IMGOFFLINE="http://e-sim.home.pl/testura/img/newOffline.png",IMGPRODBG="http://e-sim.home.pl/testura/img/productIcons/background.png",IMGCRITICAL="http://e-sim.home.pl/testura/img/equipmentIcons/criticalHit.png",IMGMISS="http://e-sim.home.pl/testura/img/equipmentIcons/reduceMiss.png",IMGAVOID="http://e-sim.home.pl/testura/img/equipmentIcons/avoidDamage.png",IMGLOAD="https://dl.dropboxusercontent.com/u/67548179/esim-ED/img/WorkInProgress.gif",noDebuff="http://cdn.rivierarentalguide.com/images/messages/booking_panel/ok.png",IMGLOADBAR="https://dl.dropboxusercontent.com/u/67548179/esim-ED/img/loading_bar.gif",IMGDMUMy="http://www.imageshost.eu/images/2014/09/06/help-donate_32.png",IMGDMUPR="http://www.imageshost.eu/images/2014/09/06/TreasureChest.png",IMGDMUCP="http://www.imageshost.eu/images/2014/09/06/Factory_company_production.png",IMGMUMEMB="http://www.imageshost.eu/images/2014/09/06/members.gif",IMGMUCOMP="http://www.imageshost.eu/images/2014/09/06/Bldg-RocketFactory.png",IMGBUBL="http://www.imageshost.eu/images/2014/09/06/newspaper_edit.png",NotifyMotivateTemp='<div class="growlUI {1}" style="cursor: default;"><h1>{2}</h1><h2>{3}</h2></div>',NotifyTwoClickTemp='<div class="growlUI {1}" style="cursor: default;"><h1>{2}</h1><h2>{3}</h2></div>',SentManyMotivationsToday={en:"You have sent too many motivations today",sq:"Ju keni dërguar shumë motivime sot",ar:"لقد ارسلت تشجيعات اكثر من اللازم اليوم",am:"Այսօրվա համար բավականին մոտիվացիոն փաթեթներ եք ուղարկել",bd:"আপনি আজ অনেক বেশি অনুপ্রেরনা দিয়েছেন",bs:"Poslali ste previše motivacija danas",pt:"Você já mandou muitas motivações hoje",bg:"Изпратихте твърде много мотивации днес",zh:"你今天发送的激励过多",hr:"Poslali ste previše motivacija danas",cs:"Dnes si poslal příliš mnoho motivac",nl:"Je hebt te veel motivaties gegeven vandaag",et:"Sa oled saatnud täna liiga palju motivatsioone",fil:"Nakapagpadala ka na ng napakaraming pagganyak ngayon",fr:"Vous avez envoyer trop de paquets de motivations pour aujourd'hui",ka:"You have sent too many motivations today",de:"Du kannst für heute keine weiteren Motivationspakete verteilen",el:"Έχετε στείλει πάρα πολλές παρακινήσεις σήμερα",he:"שלחת יותר מדי חבילות מוטיבציה היום",hu:"Túl sok motivációt küldték ma",id:"Kamu sudah mengirimkan terlalu banyak motivasi hari ini",it:"Oggi hai mandato troppi incentivi",lv:"Tu šodien esi izsūtījis pārāk daudz motivācijas",lt:"Jūs jau išsiuntėte per daug motivacijų šiandien",mk:"Имаш испратено премногу мотивации за денес",me:"Poslali ste previše motivacija danas",fa:"شما امروز تقویت زیادی فرستاده اید",pl:"Wysłałeś dzisiaj zbyt wiele motywacji",pt:"Já mandaste demasiadas motivações hoje",ro:"Ai trimis prea multe motivări astăzi",ru:"Вы отправили слишком много мотиваций сегодня",sr:"Послали сте превише мотивација данас",sk:"Dnes si poslal príliš veľa motivácií",sl:"Danes ste poslali preveč motivacij",es:"Has enviado demasiadas motivaciones hoy",sv:"Du har skickat för många motivationspaket idag",zh:"您今天已經送出太多激勵品",tr:"Bugün çok fazla motivasyon gönderdiniz",uk:"Ви надто щедрий",vi:"Bạn gửi quá nhiều động lực hôm nay",az:"You have sent too many motivations today",da:"You have sent too many motivations today",fi:"You have sent too many motivations today",hi:"You have sent too many motivations today",ja:"You have sent too many motivations today",km:"You have sent too many motivations today",ko:"당신은 오늘 너무 많은 선물을 보냈어요",my:"You have sent too many motivations today",mn:"You have sent too many motivations today",ne:"You have sent too many motivations today",no:"You have sent too many motivations today",szl:"You have sent too many motivations today",th:"You have sent too many motivations today"},succesfullyMotivated={en:"Motivation package sent succesfully! You've been awarded 1 food limit point",sq:"Paketa e motivimit është dërguar me sukses! Ju jeni shpërblyer me 1 limit të ushqimit",ar:"مجموعة الترحيب تم ارسالها بنجاح. وانت تم مكافئتك بزيادة حد الاكل بنقطة واحدة",am:"Մոտիվացիոն փաթեթն ուղարկվեց. ստացաք մեկ հավելյալ սննդի լիմիտի միավոր",bd:"অনুপ্রেরনার প্যাকেজ সফল ভাবে পাঠানো হয়েছে। আপনি 1 খাদ্যসীমা পেয়েছেন",bs:"Motivacijski paket uspješno poslat! Nagrađeni ste 1 limitom hrane",pt:"Pacote de motivação enviado com sucesso! Você foi premiado com +1 no seu limite de comida.",bg:"Мотивацията беше изпратена успешно! Наградени сте с 1 лимит за храна",zh:"成功发送激励包！你得到1个食物上限点",hr:"Motivacijski paket uspješno poslat! Nagrađeni ste 1 dodatnim limitom hrane",cs:"Motivační balíček byl úspěšně poslaný! Byl jsi odměněný 1 limitem na jídlo navíc",nl:"Motivatie pakket is succesvol verzonden! Je bent beloond met 1 voedsel limiet punt",et:"Motivatsioonipakett edukalt saadetud! Sinu toidulimiit kasvas +1 võrra",fil:"Matagumpay na naipadala ang pakete ng pagganyak! Ikaw ay ginawaran ng 1 puntos sa hangganan sa pagkain",fr:"Le pack de motivation a été correctement envoyé ! Vous obtenez 1 point de limite de nourriture",ka:"Motivation package sent succesfully! You've been awarded 1 food limit point",de:"Motivationspaket wurde erfolgreich gesendet! Du wurdest mit 1 Essenslimitpunkt belohnt",el:"Το πακέτο κινήτρου στάλθηκε επιτυχώς! Αυξήθηκε κατά 1 το όριο τροφής.",he:"חבילת מוטיבציה נשלחה בהצלחה! נוסף לך מקום נוסף לאוכל",hu:"Motivációs csomag sikeresen elküldve! Jutalmad 1 élel korlát pont",id:"Paket motivasi sudah dikirim dengan sukses! Kamu sudah diberikan 1 limit food tambahan",it:"Incentivi inviati con successo! Sei stato ricompensato con 1 limite di Cibo extra",lv:"Motivācijas maisiņš bija veiksmīgi aizsūtīts! Jums piešķīra 1 ēdiena limita punktu",lt:"Motyvacinis paketas sėkmingai išsiųstas. Jūs buvote apdovanotas papildomu 1 maisto limitu",mk:"Мотивациониот пакет е успешно пратен! Беше награден со плус 1 лимит за храна",me:"Motivacioni paket poslat uspješno! Bićete nagrađeni sa 1 limitom hrane",fa:"بسته تقویتی با موفقیت فرستاده شد. یک لیمیت مواد غذایی به شما اعطا شد",pl:"Pakiet motywacyjny został wysłany. Powiększyliśmy Twój limit jedzenia o 1 punkt.",pt:"O Pacote de motivação foi enviado! Foi adicionado um ponto no limite de comida",ro:"Pachetul de motivare a fost trimis cu succes! Ai fost recompensat cu 1 punct de limită la hrană",ru:"Мотивационный подарок успешно отправлен! Вы удостоены 1 дополнительного лимита на еду",sr:"Мотивациони пакет послат успешно. Награђени сте са 1 лимитом хране",sk:"Motivačný balíček bol úspešne odoslaný! Bol si odmenený 1 limitom na jedlo",sl:"Motivacijski paket je poslan uspešno. Nagrajeni ste z 1 točko limita hrane",es:"¡Paquete de motivación enviado con éxito! Obtienes 1 punto en el limite de panes",sv:"Motivationspaket sändes! Du har blivit belönad med 1 matpoöng",zh:"激勵包裹發送成功！你得到了一單位的食物上限。",tr:"Motivasyon paketi başarılı bir şekilde gönderildi!Fazladan 1 ekmek hakkı ile ödüllendirildiniz",uk:"Мотиваційну посилку успішно надіслано! Вас винагороджено збільшенням ліміту вживання їжі на 1",vi:"Hàng động viên đã được gửi thành công! Bạn được thưởng 1 điểm limit ăn bánh",az:"Motivation package sent succesfully! You've been awarded 1 food limit point",da:"Motivation package sent succesfully! You've been awarded 1 food limit point",fi:"Motivaatiopaketti lähetetty onnistuneesti! Sinut on palkittu 1 ruokarajoituspisteellä",hi:"प्रेरणा पैकेज सफलतापूर्वक भेजा! आप 1 खाद्य सीमा बिंदु से सम्मानित किया गया है",ja:"Motivation package sent succesfully! You've been awarded 1 food limit point",km:"Motivation package sent succesfully! You've been awarded 1 food limit point",ko:"동기부여 패키지가 성공적으로 발송되었습니다! 음식 섭취한도가 1 늘어났습니다.",my:"Motivation package sent succesfully! You've been awarded 1 food limit point",mn:"Motivation package sent succesfully! You've been awarded 1 food limit point",ne:"Motivation package sent succesfully! You've been awarded 1 food limit point",no:"Motivation package sent succesfully! You've been awarded 1 food limit point",szl:"Motivation package sent succesfully! You've been awarded 1 food limit point",th:"Motivation package sent succesfully! You've been awarded 1 food limit point"},YouAlreadySentPackageThisCitizenToday={en:"You've already sent a package to this citizen today",ru:"Вы уже отправляли комплект этому гражданину сегодня",de:"Du hast diesem Bürger bereits heute ein Motivationspaket gesendet",nl:"Je hebt al een pakket naar deze burger gestuurd vandaag",cs:"Tomuto občanovi si již dnes poslal balíček",sr:"Већ сте послали пакет овом играчу данас",fr:"Vous avez déjà envoyé un paquet à ce citoyen aujourd'hui"},CitizenReceivedManyMotivationsToday={en:"This citizen received too many motivations today",ru:"Этот гражданин получил слишком много мотиваций сегодня"},CitizenReceivedEveryKindMotivationPackageToday={en:"This citizen received every kind of motivation package today",ru:"Этот гражданин получил все виды мотивационных комплектов сегодня",de:"Dieser Bürger hat bereits alle Motivationspakete für heute erhalten",nl:"Deze burger heeft elke soort motivatie pakket ontvangen vandaag",cs:"Tento občan dnes obdržel každý druh motivačního balíku",sr:"Играч је примио сваку врсту мотивационог пакета данас",fr:"Ce citoyen a reçu toutes les sortes de paquets de motivation pour aujourd'hui"},YouDontHaveEnoughItems={en:"You don't have enough items",ru:"У вас не достаточно предметов",de:"Du hast nicht genügend Gegenstände",nl:"Je hebt niet genoeg producten",cs:"Nemáš dostatek předmětů",sr:"Немате довољно предмета",fr:"Vous n'avez pas assez d'objets"},cachedSettings=null,currentServer=null,selectedFood=null,selectedGift=null,selectedWeapon=null,selectedCurrency=null,idPlayer=null,extendedMU=!1,savedWorkedList=[];$(document).ready(function(){inGameCheck()&&(Main(),$.jStorage.get("SGAutoMotivateType",0)>0&&AutoMotivate(),$.jStorage.get("SGTwoClick",0)>0&&twoClick(),localUrl.indexOf(URLMUDonations,0)>=0?($.jStorage.get("SGMUDonationsLogMode",!1)&&MUDonationsLog(),$.jStorage.get("SGMUTextStorageMode",!0)&&TextStorage()):localUrl.indexOf(URLTransactionLog,0)>=0?$.jStorage.get("SGTransactionLogMode",!1)&&TransactionLog():localUrl.indexOf(URLEquipment,0)>=0?$.jStorage.get("SGEquipmentFastMode",!0)&&EquipmentFastMode():localUrl.indexOf(URLMarket,0)>=0?($.jStorage.get("SGChangeProductMarketTable",!0)&&changeProductMarketTable(),$.jStorage.get("SGDisplayGoldValue",!0)&&displayGoldValue()):localUrl.indexOf(URLMarketOffers,0)>=0?($.jStorage.get("SGChangeMarketOffers",!0)&&changeMarketOffers(),$.jStorage.get("SGEditOffers",!0)&&editOffers()):localUrl.indexOf(URLMonetaryMarket,0)>=0?($.jStorage.get("SGChangeMonetaryMarketTable",!0)&&changeMonetaryMarketTable(),$.jStorage.get("SGMonetaryMarketPriceEdit",!0)&&monetaryMarketPriceEdit(),$.jStorage.get("SGMonetaryMarketPriceRatio",!0)&&monetaryMarketPriceRatio()):localUrl.indexOf(URLBattle,0)>=0?(0==$("#totalattackers").length&&CreateSpectatorsBlock(),$.jStorage.get("SGBattleStatsMinimizeMode",!0)&&BattleStatsMinimize(),$.jStorage.get("SGModalWindowFuncMode",1)>0&&ModalWindowFunc(),$.jStorage.get("SGSpectatorMode",!0)&&FakeSpectatorFunc(),$.jStorage.get("SGDemoralizatorMode",!1)&&DemoralizatorFunc()):localUrl.indexOf(URLNewCitizen,0)>=0?$.jStorage.get("SGMotivationMode",!0)&&EasyMotivation():localUrl.indexOf(URLMyMU,0)>=0?$.jStorage.get("SGMUBroadcastMsg",!0)&&MUBrodcastMsg():localUrl.indexOf(URLMUMain,0)>=0?$.jStorage.get("SGMUBroadcastMsg",!0)&&MUBrodcastMsg():localUrl.indexOf(URLMUStorage,0)>=0?$.jStorage.get("SGMUTextStorageMode",!0)&&TextStorage():localUrl.indexOf(URLCompany,0)>=0?($.jStorage.get("SGCompanyRedesignMode",!0)&&companyImprovements(),addCompanyButtons()):localUrl.indexOf(URLCompanyDetails,0)>=0?$.jStorage.get("SGCompanyWorkResultsMode",!0)&&companyWorkResults():localUrl.indexOf(URLCompanyAllWorkers,0)>=0&&$.jStorage.get("SGCompanyAllWorkersMode",!0)&&companyAllWorkersPage())});