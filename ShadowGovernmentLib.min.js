function inGameCheck(){return 1==$("section.top-bar-section > ul.foundation-right").length}function GetCurrentDay(){var a=/\d+/gim.exec($("#userMenu div div.panel.callout b:eq(2)").html());return a?parseInt(a[0]):0}function itsOrgAccount(){return 1==parseInt($("#actualXp").html())}function createCheckBox(a,b,c){var d=$("<div></div>"),e=$.jStorage.get(b,c)?"checked='checked'":"";return d.append("<input class='configCheckbox' type='checkbox' "+e+" />"),d.children("input").bind("change",function(){$.jStorage.set(b,"checked"==$(this).attr("checked"))}),d.append("<span class='configLabelCheckbox'>"+a+"</span>"),d.children("span").bind("click",function(){d.children("input").click(),d.children("input").change()}),d}function createInputText(a,b,c,d){var e=$("<div></div>");return e.append("<span class='configLabelInputText'>"+a+"</span>"),e.append("<input class='configInputText' type='text' value='"+$.jStorage.get(b,c)+"' />"),e.children("input").bind("keyup change",function(){"number"==d&&$(this).attr("value",$(this).attr("value").replace(/[^\d,]/g,"")),""!=$(this).attr("value")&&$.jStorage.set(b,$(this).attr("value"))}),e}function createSelect(a,b,c,d){var e=$("<div></div>");e.append("<span class='configLabelSelect'>"+a+"</span>"),e.append('<select class="configSelect"></select>');for(var f in d){var g=$.jStorage.get(b,c)==d[f]?"selected ":"";e.children("select").append("<option "+g+'value="'+d[f]+'">'+f+"</option>")}return e.children("select").bind("change",function(){$.jStorage.set(b,parseInt($(this).attr("value")))}),e}function ImgSrcFix(){$("img").each(function(){void 0!=$(this).attr("src")&&($(this).attr("src").indexOf("//cdn.e-sim.org//",0)>=0&&$(this).attr("src",$(this).attr("src").replace("//cdn.e-sim.org//","//cdn.e-sim.org/")),$(this).attr("src").indexOf("https://cdn.e-sim.org:8080/",0)>=0&&$(this).attr("src",$(this).attr("src").replace("https://cdn.e-sim.org:8080/","http://cdn.e-sim.org/")))}),$("image").each(function(){void 0!=$(this).attr("href")&&$(this).attr("href").indexOf("https://cdn.e-sim.org:8080/",0)>=0&&$(this).attr("href",$(this).attr("href").replace("https://cdn.e-sim.org:8080/","http://cdn.e-sim.org/"))}),window.setTimeout(ImgSrcFix,2e3)}function ScriptAndStyleSrcFix(){$("script").each(function(){void 0!=$(this).attr("src")&&$(this).attr("src").indexOf("//cdn.e-sim.org//",0)>=0&&$(this).attr("src",$(this).attr("src").replace("//cdn.e-sim.org//","//cdn.e-sim.org/"))}),$("link[type*=css]").each(function(){void 0!=$(this).attr("href")&&$(this).attr("href").indexOf("//cdn.e-sim.org//",0)>=0&&$(this).attr("href",$(this).attr("href").replace("//cdn.e-sim.org//","//cdn.e-sim.org/"))})}function getUrlVars(){var a={};window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(b,c,d){a[c]=d});return a}function getLang(){if(1==$("#userMenu > div > form > button > img").length){var a=/flags\/small\/(\S+).png/.exec($("#userMenu > div > form > button > img").attr("src"))[1];lang=LangByCC[a]}}function Main(){getLang(),$('<a id="SGSettingsButton" class="button foundation-style" title="Shadow Government Settings" href="editCitizen.html?Settings"><i class="icon-star"></i>SG Settings</a><br>').insertBefore($(".foundation-right.hidden-overflow > div:first > a:last")),$("#SGSettingsButton").click(function(){return $.blockUI({message:$("#WrapperMainConfig"),css:{top:"48px",left:"50%",right:"",margin:"0px 0px 0px -300px",width:"600px",border:"0px",position:"absolute",textAlign:"left",cursor:"default"},onOverlayClick:$.unblockUI}),!1}),$('<div id="WrapperMainConfig" style="display:none;"><center><h1>Shadow Government Settings</h1></center><p style="clear: both"></p><br><ul id="MainConfigMenu"></ul><div id="MainConfigBody"></div></div>').appendTo($("body")),$('<button id="CloseWrapperMainConfig" style="position: absolute; top: 0.25em; right: 0.25em; padding: 0.3em !important; " href="#" class="foundation-style closeDropdown profileButton">×</button>').appendTo($("#WrapperMainConfig > center > h1")),$("#CloseWrapperMainConfig").click(function(){$.unblockUI()}),$("<li>Two Click</li>").appendTo($("#MainConfigMenu"));var a=$("<div></div>").appendTo($("#MainConfigBody")),b=createCheckBox("Two Click Auto","SGTwoClick",!1);a.append(b);var c=createInputText("Two Click Login: ","SGTwoClickLogin","","login");a.append(c);var d=createInputText("Two Click Password: ","SGTwoClickPassword","","passwd");a.append(d),$("<li>Spectator</li>").appendTo($("#MainConfigMenu"));var e=$("<div></div>").appendTo($("#MainConfigBody")),f=createCheckBox("Custom Spectator","SGSpectatorMode",!0);e.append(f);var g=createInputText("Timer Spectator: ","SGTimerSpectator",7e3,"number");e.append(g);var h=createInputText("Fake User ID: ","SGFakeUserID",1,"number");e.append(h);var i=createInputText("Fake Citizenship ID: ","SGFakeCitizenshipID",1,"number");e.append(i);var j=createCheckBox("Fake Spectator Focus","SGFakeSpectatorFocus",!1);e.append(j),$("<li>Motivator</li>").appendTo($("#MainConfigMenu"));var k=$("<div></div>").appendTo($("#MainConfigBody")),l=createCheckBox("Easy Motivator","SGMotivationMode",!0);k.append(l);var m=createSelect("Auto Motivator: ","SGAutoMotivateType",0,{disabed:0,weapons:1,breads:2,gifts:3});k.append(m),$("<li>Demoralizator</li>").appendTo($("#MainConfigMenu"));var n=$("<div></div>").appendTo($("#MainConfigBody")),o=createCheckBox("Demoralizator","SGDemoralizatorMode",!1);n.append(o);var p=createInputText("Dem. Timer Spectator: ","SGDemoralizatorTimerSpectator",1e4,"number");n.append(p);var q=createInputText("Dem. Fake User Count: ","SGDemoralizatorFakeUserIDCount",10,"number");n.append(q);var r=createInputText("Dem. Fake Citizenship ID: ","SGDemoralizatorFakeCitizenshipID",2,"number");n.append(r),$("<li>Equipment</li>").appendTo($("#MainConfigMenu"));var s=$("<div></div>").appendTo($("#MainConfigBody")),t=createCheckBox("Equipment Fast Link","SGEquipmentFastMode",!0);s.append(t),$("<li>Logs</li>").appendTo($("#MainConfigMenu"));var u=$("<div></div>").appendTo($("#MainConfigBody")),v=createCheckBox("MU Donations Log","SGMUDonationsLogMode",!1);u.append(v);var w=createCheckBox("Player Transaction Log","SGTransactionLogMode",!1);u.append(w),$("<li>Market</li>").appendTo($("#MainConfigMenu"));var x=$("<div></div>").appendTo($("#MainConfigBody")),y=createCheckBox("New Table Product Market","SGNewTableProductMarket",!0);x.append(y);var z=createCheckBox("Change Product Market Table(OLD TABLE)","SGChangeProductMarketTable",!0);x.append(z);var A=createCheckBox("Display Gold Value","SGDisplayGoldValue(OLD TABLE)",!0);x.append(A),$("<li>Market Offers</li>").appendTo($("#MainConfigMenu"));var B=$("<div></div>").appendTo($("#MainConfigBody")),C=createCheckBox("Change Market Offers","SGChangeMarketOffers",!0);B.append(C);var D=createCheckBox("Edit Offers","SGEditOffers",!0);B.append(D),$("<li>Monetary Market</li>").appendTo($("#MainConfigMenu"));var E=$("<div></div>").appendTo($("#MainConfigBody")),F=createCheckBox("Change Monetary Market Table","SGChangeMonetaryMarketTable",!0);E.append(F);var G=createCheckBox("Monetary Market Price Edit","SGMonetaryMarketPriceEdit",!0);E.append(G);var H=createCheckBox("Monetary Market Price Ratio","SGMonetaryMarketPriceRatio",!0);E.append(H),$("<li>Battle Page</li>").appendTo($("#MainConfigMenu"));var I=$("<div></div>").appendTo($("#MainConfigBody")),J=createCheckBox("Battle Stats Minimize Mode","SGBattleStatsMinimizeMode",!0);I.append(J);var K=createSelect("Modal Window Func Mode: ","SGModalWindowFuncMode",1,{disabed:0,modal:1,block:2});I.append(K),$("<li>Military Unit</li>").appendTo($("#MainConfigMenu"));var L=$("<div></div>").appendTo($("#MainConfigBody")),M=createCheckBox("MU Broadcast Message","SGMUBroadcastMsg",!0);L.append(M);var N=createCheckBox("MU Text Storage","SGMUTextStorageMode",!0);L.append(N),$("<li>Companies</li>").appendTo($("#MainConfigMenu"));var O=$("<div></div>").appendTo($("#MainConfigBody")),M=createCheckBox("Company Redesign","SGCompanyRedesignMode",!0);O.append(M);var N=createCheckBox("Company Work Results","SGCompanyWorkResultsMode",!0);O.append(N);var P=createCheckBox("SGCompany All Workers Redesign","SGCompanyAllWorkersMode",!0);O.append(P),$("<li>Statistics</li>").appendTo($("#MainConfigMenu"));var Q=$("<div></div>").appendTo($("#MainConfigBody")),R=createCheckBox("Citizen Broadcast MSG","SGCitizenBroadcastMSG",!0);Q.append(R),$("<li>Other Fix</li>").appendTo($("#MainConfigMenu"));var S=$("<div></div>").appendTo($("#MainConfigBody")),T=createCheckBox("Img Src Fix","SGImgSrcFixMode",!1);S.append(T);var U=createCheckBox("Script And Style Src Fix","SGScriptAndStyleSrcFixMode",!1);S.append(U),$("#WrapperMainConfig").lightTabs()}function CreateSpectatorsBlock(){$("#battleStats").append('<div class="foundation-style small-10 columns"><div class="foundation-style small-5 columns"><b>Total defenders online:</b><i id="totaldefenders" style="display: inline;">0</i> <a style="font-size: 11px;" href="" id="defendersLink">Show details</a> <a style="font-size: 11px; display: none;" href="" id="defendersLinkHide">Hide details</a> <br><div align="center" id="defendersMenu" style="font-size: 11px; text-align: center; padding: 1em; margin: auto; display: none;">No one <br> </div></div><div class="foundation-style small-5 columns"><b>Total attackers online:</b><i id="totalattackers" style="display: inline;">0</i> <a style="font-size: 11px;" href="" id="attackersLink">Show details</a> <a style="font-size: 11px;  display: none;" href="" id="attackersLinkHide">Hide details</a> <br><div align="center" id="attackersMenu" style="font-size: 11px; text-align: center; padding: 1em; margin: auto; display: none;">No one <br> </div></div>'),$("#battleStats").append('<div class="foundation-style small-10 columns"><b>Total spectators online:</b><i id="totalspectators" style="display: inline;">0</i> <a style="font-size: 11px;" href="" id="spectatorsLink">Show details</a> <a style="font-size: 11px; display: none;" href="" id="spectatorsLinkHide">Hide details</a> <br><div align="center" id="spectatorsMenu" style="font-size: 11px; text-align: center; padding: 1em; margin: auto; display: none;">No one <br> </div>  </div>'),$("#spectatorsLink").click(function(){return $("#spectatorsLink").fadeOut("fast",function(){$("#spectatorsLinkHide").fadeIn("fast"),$("#spectatorsMenu").fadeIn("fast")}),!1}),$("#spectatorsLinkHide").click(function(){return $("#spectatorsLinkHide").fadeOut("fast",function(){$("#spectatorsLink").fadeIn("fast"),$("#spectatorsMenu").fadeOut("fast")}),!1}),$("#attackersLink").click(function(){return $("#attackersLink").fadeOut("fast",function(){$("#attackersLinkHide").fadeIn("fast"),$("#attackersMenu").fadeIn("fast")}),!1}),$("#attackersLinkHide").click(function(){return $("#attackersLinkHide").fadeOut("fast",function(){$("#attackersLink").fadeIn("fast"),$("#attackersMenu").fadeOut("fast")}),!1}),$("#defendersLink").click(function(){return $("#defendersLink").fadeOut("fast",function(){$("#defendersLinkHide").fadeIn("fast"),$("#defendersMenu").fadeIn("fast")}),!1}),$("#defendersLinkHide").click(function(){return $("#defendersLinkHide").fadeOut("fast",function(){$("#defendersLink").fadeIn("fast"),$("#defendersMenu").fadeOut("fast")}),!1})}function sendUpdateRequestSpectator(){var a=$.jStorage.get("SGFakeUserID",1),b=$.jStorage.get("SGFakeCitizenshipID",1),c=$.jStorage.get("SGTimerSpectator",7e3);if(hasFocus||!$.jStorage.get("SGFakeSpectatorFocus",!1)){!hasFocus&&!$.jStorage.get("SGFakeSpectatorFocus",!1)&&c<7e3&&(c=7e3);var d="id="+$("#battleRoundId").val()+"&at="+a+"&ci="+b+"&premium=1";$.ajax({type:"GET",url:"battleScore.html",data:d,dataType:"json",success:function(a){updateStatus(a.attackerScore,a.defenderScore,a.remainingTimeInSeconds,a.percentAttackers),updateBattleHeros(a.topAttackers,a.topDefenders),updateTop10(a.top10Attackers,a.top10Defenders),updateBattleMonitor(a);for(var b=0;b<a.recentAttackers.length;b++)if(a.recentAttackers[b].id==latestAttackerId){a.recentAttackers=a.recentAttackers.slice(0,b);break}for(var b=0;b<a.recentDefenders.length;b++)if(a.recentDefenders[b].id==latestDefenderId){a.recentDefenders=a.recentDefenders.slice(0,b);break}0!=a.recentAttackers.length&&(latestAttackerId=a.recentAttackers[0].id,attackerHits=a.recentAttackers),0!=a.recentDefenders.length&&(latestDefenderId=a.recentDefenders[0].id,defenderHits=a.recentDefenders),window.setTimeout(sendUpdateRequestSpectator,c)}})}}function FakeSpectatorFunc(){continueThread=!1,sendUpdateRequestSpectator()}function citizenBroadcastMSG(){function e(){$.blockUI({message:$('<center><b style="font-size:17px">SG Broadcast MSG</b></center><center><div id="SG_MSG" class="foundation-style blueLabel " style="margin-bottom:15px; width:530px;"><b style="display:block">Title:</b><input type="text" style="width: 400px;" path="title" maxlength="100" minlength="1" id="titleInput"><br><script language="JavaScript">function append(textBefore, textAfter)  {var yourTextarea = document.getElementById(\'messageForm\');var selectionStart = yourTextarea.selectionStart;var selectionText = yourTextarea.value.substr(yourTextarea.selectionStart, yourTextarea.selectionEnd-yourTextarea.selectionStart);var prefix = yourTextarea.value.substr(0, yourTextarea.selectionStart);var postfix = yourTextarea.value.substr(yourTextarea.selectionEnd);yourTextarea.value = prefix+""+textBefore+"" + selectionText + ""+textAfter+""+postfix;yourTextarea.selectionStart = selectionStart;yourTextarea.focus();};</script><b>Message:</b><br><textarea style="width:95%; height: 250px;" name="body" maxlength="10000" id="messageForm"></textarea><p style="display:inline"> Characters remaining:     </p><p class="charsRemaining" style="display:inline;">10000</p><p></p><p style="clear: both"></p><div style="display: inline" class="bbcodebuttons"><input type="button" onclick="javascript: append(\'[b]\',\'[/b]\')" value="B" id="boldButton" name="boldButton" style="cursor: pointer;"><input type="button" onclick="javascript: append(\'[i]\',\'[/i]\')" value="I" id="italicButton" name="italicButton" style="cursor: pointer;"><input type="button" onclick="javascript: append(\'[u]\',\'[/u]\')" value="U" id="underlineButton" name="underlineButton" style="cursor: pointer;"><input type="button" onclick="javascript: append(\'[quote]\',\'[/quote]\')" value="Quote" id="quoteButton" name="quoteButton" style="cursor: pointer;"><input type="button" onclick="javascript: append(\'[url=LINK]\',\'[/url]\')" value="Url" id="urlButton" name="urlButton" style="cursor: pointer;"><input type="button" onclick="javascript: append(\'[citizen]citizen name[/citizen]\',\'\')" value="Citizen" id="citizenButton" name="citizenButton" style="cursor: pointer;"><input type="button" onclick="javascript: append(\'[currency]PLN[/currency]\',\'\')" value="Currency" id="currencyButton" name="currencyButton" style="cursor: pointer;"><input type="button" onclick="javascript: append(\'[center]\',\'[/center]\')" value="Center" id="boldButton" name="centerButton" style="cursor: pointer;"><br /><br /><a href="javascript: append(\':)\',\'\')"><img border="0" src="'+IMGSMILE+'"> </a><a href="javascript: append(\':D\',\'\')"><img border="0" src="'+IMGBIGSMILE+'"> </a><a href="javascript: append(\':\\\',\'\')"><img border="0" src="'+IMGCIACH+'"> </a><a href="javascript: append(\':P \',\'\')"><img border="0" src="'+IMGTONQUE+'"> </a><a href="javascript: append(\':( \',\'\')"><img border="0" src="'+IMGUNHAPPY+'"> </a><a href="javascript: append(\';) \',\'\')"><img border="0" src="'+IMGEYE+'"> </a></div><p style="cleat: both"></p><input type="hidden" value="REPLY" name="action"><input type="button" id="SENDMSG" value="Send" style="cursor: pointer;"> &nbsp; <input type="button" value="Close" id="ClosewButton" style="cursor: pointer;"><p style="clear: both"></p> </div></center>'),css:{top:"48px",left:($(window).width()-600)/2+"px",width:"600px",border:"0px",position:"absolute",textAlign:"left"}}),$("#ClosewButton").click(function(){$.unblockUI()}),$("#SENDMSG").click(function(){msgTitle=$("#titleInput").val(),msgBody=$("#messageForm").val(),$("#SG_MSG").html('<center><p style="text-align: center;"><h1>Dont Close...</h1><img alt="" src="'+IMGLOADBAR+'" style="margin-left:-13px; width: 562px; height: 126px;" /></p><p style="text-align: center;"><span style="font-size:36px;"><span id="LeftMSG">0</span>/<span id="AllMSG">'+a.length+"</span></span></p></center>"),a.forEach(function(a,b,c){var d=11e3*b;SendMSG(a,msgTitle,msgBody,d)})})}var a=[],b=/^(.*?)(\d+)$/gim.exec($("#pagination-digg >.next").prev("li").find("a").attr("href")),c="",d=1;b?(c=b[1],d=b[2]):c=/(.*?\.html.*?)$/gim.exec(localUrl)[1],$('<hr class="littleDashedLine"><div id="citizenProgressWrap"></div><p style="clear: both"></p>').appendTo(".small-8 > .testDivblue"),$("#citizenProgressWrap").append('<input type="submit" id="CitizenBroadcastMSG" value="Citizen Broadcast MSG">'),$("#CitizenBroadcastMSG").click(function(){if(a.length<1){$("#citizenProgressWrap").append('<div id="citizenProgressBarWrap"><center><p style="text-align: center;"><img alt="" src="'+IMGLOAD+'" style="margin-right: 10px;" /><span style="font-size:36px;"><span id="CountPage">0</span>/<span id="AllPage">'+d+"</span></span></p></center></div>");for(var b=1;b<=d;b++){var f=1==d?c:c+b;$.ajax({type:"GET",url:f,success:function(b){$(".dataTable a",b).each(function(){a[a.length]=$(this).text().replace(/★ /g,"")}),$(b).empty().remove(),b="undefined",$("#CountPage").text(parseInt($("#CountPage").text())+1),parseInt($("#CountPage").text())==parseInt($("#AllPage").text())&&($("#citizenProgressBarWrap").empty().remove(),e())},error:function(a,b,c){},timeout:5e3})}}else 0==$("#citizenProgressBarWrap").length&&e()})}function EasyMotivation(){var a=GetMotivateToday(),b=$(".dataTable tr:eq(1) > td:first a.profileLink");1==b.length&&NewestCitizen(b.attr("href").replace("profile.html?id=","")),BruteForceCitizenForm(),$(".dataTable ul.button.foundation-center.foundation-style-group li a.foundation-style.button.small.help i.icon-cupcake").parent().parent().toggle(),$('<span>Today motivate count: <b id="countMotivationToday">0</b><span>').insertAfter("#newCitizenStatsForm"),$("#countMotivationToday").html(a.count),$("table.dataTable tr:not(:first)").each(function(a,b){if($(this).children("td").children("i.icon-uniF478").length>0){var c=$(this).children("td:first").children(".profileLink").attr("href").replace("profile.html?id=","");1==$(this).children("td:eq(4)").children("i.icon-uniF478").length&&($(this).children("td:eq(4)").empty(),$(this).children("td:eq(4)").append('<i id="motivate-weapons-'+c+'" class="motivate-element motivate-weapons icon-tank" value="'+c+'"></i>')),1==$(this).children("td:eq(5)").children("i.icon-uniF478").length&&($(this).children("td:eq(5)").empty(),$(this).children("td:eq(5)").append('<i id="motivate-breads-'+c+'" class="motivate-element motivate-breads icon-bread" value="'+c+'"></i>')),1==$(this).children("td:eq(6)").children("i.icon-uniF478").length&&($(this).children("td:eq(6)").empty(),$(this).children("td:eq(6)").append('<i id="motivate-gifts-'+c+'" class="motivate-element motivate-gifts icon-gift" value="'+c+'"></i>'))}return!0}),$(".motivate-element").click(function(){var a=0;$(this).hasClass("motivate-weapons")?a=1:$(this).hasClass("motivate-breads")?a=2:$(this).hasClass("motivate-gifts")&&(a=3);var c=($(this).parent(),$(this).attr("value")),d="type="+a+"&id="+c;$.ajax({type:"POST",url:"motivateCitizen.html?id="+c,data:d,dataType:"json",error:AutoMotivateResponse})})}function BruteForceCitizenForm(){$('<br><br><b>Bruteforce motivate by user id</b>:<br><input id="BruteforceCitizenNuber" class="foundation-style" type="text" name="BruteforceCitizenNuber" placeholder="Enter User ID"><select id="BruteforceMotivateType" class="configSelect"><option selected="" value="1">weapons</option><option value="2">breads</option><option value="3">gifts</option></select><button id="BruteforceCitizenButton" class="postfix only-icon button foundation-style" style="width: 40px;" type="button"><i class="icon-muffin"></i></button>').insertAfter("#newCitizenStatsForm");var a=$("#BruteforceCitizenNuber"),b=$("#BruteforceCitizenButton"),c=$("#BruteforceMotivateType");a.val($.jStorage.get("SGMotivateTopCitizen",0)),b.click(function(){var b=parseInt(a.val()),d=parseInt(c.val()),e="type="+d+"&id="+b,f=GetMotivateToday();if(f.count>=5||!checkStorageMotivation(d)||itsOrgAccount()){if(itsOrgAccount()){var g=NotifyMotivateTemp;g=g.replace("{1}","error_motivated"),g=g.replace("{2}","Motivate Notification"),g=g.replace("{3}","It's Org account"),MotivateNotify(g)}if(!checkStorageMotivation(d)){var g=NotifyMotivateTemp;g=g.replace("{1}","error_motivated"),g=g.replace("{2}","Motivate Notification"),g=g.replace("{3}","Don't have supply for motivate"),MotivateNotify(g)}if(f.count>=5){var g=NotifyMotivateTemp;g=g.replace("{1}","error_motivated"),g=g.replace("{2}","Motivate Notification"),g=g.replace("{3}","Motivate limit: 5"),MotivateNotify(g)}return!1}for(;f.count<5;){var e="type="+d+"&id="+b;$.ajax({type:"POST",async:!1,url:"motivateCitizen.html?id="+b,data:e,dataType:"json",error:AutoMotivateResponse}),b--,f=GetMotivateToday()}})}function NewestCitizen(a){$.jStorage.get("SGMotivateTopCitizen",0)<a&&$.jStorage.set("SGMotivateTopCitizen",a)}function GetMotivateToday(){var a=GetCurrentDay(),b={day:a,count:0};return JSON.parse($.jStorage.get("SGMotivateCountToday",JSON.stringify(b))).day==a?JSON.parse($.jStorage.get("SGMotivateCountToday",JSON.stringify(b))):b}function UpdateMotivateToday(){var a=GetMotivateToday();a.count++,$.jStorage.set("SGMotivateCountToday",JSON.stringify(a)),$("#MotivationCount").html(a.count)}function MotivateNotify(a){$.blockUI({message:a,fadeIn:700,fadeOut:700,timeout:2e3,showOverlay:!1,centerY:!1,css:{width:"350px",top:"50px",left:"",right:"10px",border:"none",padding:"5px",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px",opacity:.9,color:"#fff"}})}function AutoMotivateResponse(a,b,c){var d=localUrl.indexOf(URLNewCitizen,0)>=0,e=/type=(\d)&id=(\d+)/gim.exec($(this)[0].data),f=parseInt(e[1]),g=parseInt(e[2]),h=["none","weapons","breads","gifts"],i=$(a.responseText),j=a.getResponseHeader("TM-finalURLdhdg"),k=NotifyMotivateTemp;if(j){var l=/citizenMessage=(\S+)/gim.exec(j);if(l&&"SUCCESFULLY_MOTIVATED"==l[1]){if(d){var m=$("#motivate-"+h[f]+"-"+g).parent();m.empty(),m.append('<i title="Мотивация прошла успешно" style="color: #0c0; font-size: 1.25em; text-shadow: 0 0 0" class="icon-uniF479"></i>')}k=k.replace("{1}","succesfully_motivated"),k=k.replace("{2}","Motivate Notification"),k=k.replace("{3}","Succesfully motivated"),MotivateNotify(k),UpdateMotivateToday()}else l&&(d&&$("#motivate-"+h[f]+"-"+g).attr("title","Error: "+l[1]),k=k.replace("{1}","error_motivated"),k=k.replace("{2}","Motivate Notification"),k=k.replace("{3}",l[1]),MotivateNotify(k))}else{d&&$("#motivate-"+h[f]+"-"+g).css({color:"#c00"});var n=i.find("div.foundation-style.small-8 > div:eq(1)");if(n.hasClass("testDivred")||n.hasClass("testDivblue")){var o=$.trim(n.text());if(void 0!=SentManyMotivationsToday[lang]){if(RegExp(SentManyMotivationsToday[lang],"gim").exec(o)){var p=GetMotivateToday();p.count=5,$.jStorage.set("SGMotivateCountToday",JSON.stringify(p)),$("#MotivationCount").html(p.count),d&&$("#countMotivationToday").html(p.count)}}else if(void 0!=succesfullyMotivated[lang]){if(RegExp(succesfullyMotivated[lang],"gim").exec(o)){var p=GetMotivateToday();p.count++,$.jStorage.set("SGMotivateCountToday",JSON.stringify(p)),$("#MotivationCount").html(p.count),d&&$("#countMotivationToday").html(p.count)}}else RegExp(YouAlreadySentPackageThisCitizenToday[lang],"gim").exec(o)||RegExp(CitizenReceivedManyMotivationsToday[lang],"gim").exec(o)||RegExp(CitizenReceivedEveryKindMotivationPackageToday[lang],"gim").exec(o)||RegExp(YouDontHaveEnoughItems[lang],"gim").exec(o);k=k.replace("{1}","error_motivated"),k=k.replace("{2}","Motivate Notification"),k=k.replace("{3}",o),MotivateNotify(k)}else k=k.replace("{1}","error_motivated"),k=k.replace("{2}","Motivate Notification"),k=k.replace("{3}","Unknown error"),MotivateNotify(k)}i.remove()}function GetUserStorage(){var a={};return $.ajax({type:"GET",url:URLUserStorage+"?storageType=PRODUCT",async:!1,success:function(b){$(b).find("#storageProductsTab .storage").each(function(){var b=parseInt($.trim($(this).children("div:first").text())),c=/\/(\w+)\.png/gim.exec($(this).children("div:eq(1)").children("img:first").attr("src"))[1],d=0;$(this).children("div:eq(1)").children("img").length>1&&(d=parseInt(/\/q(\d)\.png/gim.exec($(this).children("div:eq(1)").children("img:eq(1)").attr("src"))[1])),void 0===a[c]&&(a[c]={}),a[c][d]=b})}}),a}function checkStorageMotivation(a){void 0===a&&(a=$.jStorage.get("SGAutoMotivateType",0));var b=GetUserStorage();return 1==a&&"object"==typeof b.Weapon&&b.Weapon[1]>=3||(2==a&&"object"==typeof b.Food&&b.Food[3]>=2||3==a&&"object"==typeof b.Gift&&b.Gift[3]>=1)}function AutoMotivate(){var a=6e4,c=(GetCurrentDay(),GetMotivateToday());return 1==$("#MotivationCount").length?$("#MotivationCount").html(c.count):$('<b>Motivation Today:</b><b id="MotivationCount">'+c.count+"</b>").insertAfter("#actualHealth + br"),!(c.count>=5||!checkStorageMotivation()||itsOrgAccount())&&($.ajax({url:URLNewCitizen}).done(function(a,b,c){var d=$.jStorage.get("SGAutoMotivateType",0);$(c.responseText).find("table.dataTable  tr:not(:first)").each(function(){if($(this).find("td:eq("+(3+d)+") i.icon-uniF478").length>0){var a=$(this).find("td:first a").attr("href").replace(/.*?id=/,""),b="type="+d+"&id="+a;$.ajax({type:"POST",url:"motivateCitizen.html?id="+a,data:b,dataType:"json",error:AutoMotivateResponse})}})}),void window.setTimeout(AutoMotivate,a))}function sendUpdateRequestSpectatorFake(a,b){var c="id="+$("#battleRoundId").val()+"&at="+a+"&ci="+b+"&premium=1";$.ajax({type:"GET",url:"battleScore.html",data:c,dataType:"json"})}function DemoralizatorFunc(){function d(){for(n=0;n<a;)setTimeout(sendUpdateRequestSpectatorFake,(n+1)*(c/a),n+1,b),n++}var a=$.jStorage.get("SGDemoralizatorFakeUserIDCount",10),b=$.jStorage.get("SGDemoralizatorFakeCitizenshipID",2),c=$.jStorage.get("SGDemoralizatorTimerSpectator",1e4);window.setInterval(d,c)}function EquipmentFastMode(){$('#equipmentTable > table.dataTable tr > td[id ^="cell"]').each(function(a,b){var c=$(b).attr("id").replace(/[^\d,]/g,"");$(b).next().html('<a href="showEquipment.html?id='+c+'">'+$(b).next().html()+"</a>")})}function MUDonationsLog(){function a(b){var c=1==$("#pagination-digg > li.next").length?parseInt($("#pagination-digg > li.next").prev("li").children("a").html()):parseInt($("#pagination-digg > li.next-off").prev("li").html());void 0==b&&(b=1),b<=parseInt(c)&&$.ajax({url:"/militaryUnitDonations.html?page="+b}).done(function(c,d,e){$(e.responseText).find("#userMenu + div table.dataTable.paddedTable tr:not(:first)").insertAfter("#userMenu + script + div table.dataTable.paddedTable tr:last"),b++,a(b)})}$("#pagination-digg")&&$('<li class="FullLog">Full Log</li>').appendTo("#pagination-digg").click(function(){$("#userMenu + script + div table.dataTable.paddedTable tr:not(:first)").remove(),a(1)})}function TransactionLog(){function a(b){var c=/transactionLog\.html\?type=[\w_]+&dayFrom=\d+&dayTo=\d+/.exec(localUrl),d=parseInt(1==$("#pagination-digg > li.next").length?$("#pagination-digg > li.next").prev("li").children("a").html():$("#pagination-digg > li.next-off").prev("li").html());b<=d&&$.ajax({url:"/"+c[0]+"&page="+b}).done(function(c,d,e){$(e.responseText).find("#userMenu + div table.dataTable.paddedTable tr:not(:first)").insertAfter("#userMenu + script + div table.dataTable.paddedTable tr:last"),b++,a(b)})}$("#pagination-digg")&&$('<li class="FullLog">Full Log</li>').appendTo("#pagination-digg").click(function(){$("#userMenu + script + div table.dataTable.paddedTable tr:not(:first)").remove(),a(1)})}function changeProductMarketTable(){$(".dataTable").find("input[type='text']").addClass("inputTextTable");var a=$(".dataTable").find("input[type='submit']").addClass("inputSubmitTable");$(".dataTable").find("input[type='text']").bind("keyup",function(){var a=$(this).parent().parent(),b=parseFloat(a.prev().prev().children(".linkMonetaryMarket").next().text()),c=parseFloat($(this).val());a.prev().children(".inputPrice").text(Math.round(b*c*100)/100)});var b=$("<input class='buyAllSubmit' type='submit' value='All' />");b.bind("click",function(){var a=$(this).parent().parent().prev().prev().prev().text();return $(this).parent().children("input[type='text']").val(a),!1}),b.insertBefore(a);var c=$("<div class='helpFlagMessage'>Click on country flag to open the monetary market (only price column)</div>");c.insertBefore(".dataTable"),$(".dataTable").addClass("dataTableMod"),$(".dataTable > tbody > tr:first-child > td").addClass("dataTableHeaders");var d=$(".dataTable").find("tr").eq(0).children();d.eq(0).css({width:"70px"}),d.eq(3).text("Price/unit"),$("<td class='dataTableHeaders'>Price</td>").insertAfter(d.eq(3)),$(".dataTable").find("a").each(function(){var a=$(this).parent();a.children(".currencyFlag").next().remove(),a.children(".currencyFlag").addClass("dataTableNameFlag");var b=$("<div class='blockSeller'></div>"),c=a.children("img").eq(1);c.addClass("dataTableSeller"),b.append(c);var d=$("<div class='playerName'></div>").append(a.children(":lt(2)"));if(b.append(d),a.children().length>0){d.css({"margin-top":"3px"}),a.children().eq(0).remove();var e=$("<div class='stockName'></div>").append(a.children().eq(0));b.append(e)}a.append(b);var f=a.next().next(),g=f.children("div");g.addClass("monetaryMarketFlag");var h=URLMonetaryMarket+"?buyerCurrencyId="+IDByImageCountry[g.attr("class").split(" ")[1]]+"&sellerCurrencyId=0",i=$("<a class='linkMonetaryMarket' href='"+h+"' target='_blank'></a>");i.insertBefore(g),i.append(g);var j=parseFloat(f.children("b").text()),k=parseInt(parseInt(a.next().text())*j*100)/100,l=f.contents().last().text(),m=$("<td class='totalPriceProductMarket'><b>"+k+"</b> "+l+"</td>");m.insertAfter(f),m.append("<br/ > Total: <div style='display:inline;width:10px' class='inputPrice'>0</div>"+l)})}function displayGoldValue(){var a={},b={};$(".dataTable tr:not(:first)").each(function(){var c=0,d=[],f=IDByImageCountry[$(this).find("td:eq(3) div.flags-small").attr("class").split(" ")[1]];void 0!=a[f]?c=a[f]:(a[f]=getCurrencyPriceGold(f),c=a[f]),void 0!=b[f]?d=b[f]:(b[f]=getTaxByCurrency(f),d=b[f]);var g=parseFloat($(this).find("td:eq(2)").text().trim());if(s=$(this).find("td:eq(3)").text().trim(),s.indexOf("GOLD")<0){var h=parseFloat(s.substr(0,s.indexOf(" ")).trim()),i=Math.round(h*c*1e5)/1e5,k=(Math.round(g*h*1e3)/1e3,Math.round(g*h*c*1e5)/1e5);$(this).find("td:eq(3)").html($(this).find("td:eq(3)").html()+' <br> <div class="flags-small Gold"></div><b>'+i+"</b> GOLD"),$(this).find("td:eq(4)").html(" <b>"+k+"</b> Gold <br/>"+$(this).find("td:eq(4)").html());for(var l=0;l<d.length;l++)if($(this).find("td:eq(0)").html().toLowerCase().indexOf(d[l].name)>=0){var m=sellerCountryID!=f?d[l].import+d[l].vat:d[l].vat;$(this).find("td:eq(3)").html($(this).find("td:eq(3)").html()+"<br> <hr class='foundation-divider'>  Price without tax: <b title=\"VAT: "+d[l].vat+"; Import Tax: "+d[l].import+'">'+Math.round(parseFloat(h)*(1-parseFloat(m)/100)*1e5)/1e5+"</b>"),$(this).find("td:eq(3)").html($(this).find("td:eq(3)").html()+" <br> Price(G) without tax: <b>"+Math.round(i*(1-parseFloat(m)/100)*1e5)/1e5+"</b>");break}}})}function calcValueInGold(a,b){_MM_C_URL=_MM_C_URL.replace("{1}",a),$.get(_MM_C_URL,function(a){try{var c=$(a),d=$(".dataTable",c);d.length>0&&(d=$(d[0]));var e=d[0].rows[1].cells[2].textContent.trim();e=e.substr(e.indexOf("=")+1,e.indexOf("Gold")-e.indexOf("=")-1),_currencyValue=parseFloat(e),b&&b()}catch(a){_currencyValue=0}})}function changeNewPMTable(){$("#myTablePM").find("input[type='text']").addClass("inputTextTable");var a=$("#myTablePM").find("input[type='submit']").addClass("inputSubmitTable");$("#myTablePM").find("input[type='text']").bind("keyup",function(){var a=$(this).parent().parent(),b=parseFloat(a.prev().prev().prev().children(".linkMonetaryMarket").next().text()),c=parseFloat($(this).val().trim());
a.prev().children(".inputPrice").text(Math.round(b*c*100)/100)});var b=$("<input class='buyAllSubmit' type='submit' value='All' />");b.bind("click",function(){var a=$(this).parent().parent().prev().prev().prev().prev().text();return $(this).parent().children("input[type='text']").val(a).keyup(),!1}),b.insertBefore(a)}function createTablePM(){var a=[],b=/^(.*?)(\d+)$/gim.exec($("#pagination-digg >.next").prev("li").find("a").attr("href")),c="",d=1;b?(c=b[1],d=b[2]):c=/(.*?\.html.*?)$/gim.exec(localUrl)[1],$('<hr class="littleDashedLine"><div id="productProgressWrap"><center><p style="text-align: center;"><img alt="" src="'+IMGLOAD+'" style="margin-right: 10px;" /><span style="font-size:36px;"><span id="CountPage">0</span>/<span id="AllPage">'+d+'</span></span></p></center></div><p style="clear: both"></p>').appendTo(".small-8 > .testDivblue");var e='<div id="pager" class="pager"><form><img src="'+IMGFIRSTBTN+'" class="first"/><img src="'+IMGPREVBTN+'" class="prev"/><input type="text" class="pagedisplay"/><img src="'+IMGNEXTBTN+'" class="next"/><img src="'+IMGLASTBTN+'" class="last"/><select class="pagesize"><option selected="selected"  value="10">10</option><option value="20">20</option><option value="30">30</option><option  value="40">40</option></select></form></div>';$(".dataTable tr:first td").each(function(){a[a.length]=$(this).text()}),$(".dataTable").parent().after('<table id="myTablePM" class="tablesorter"><thead><tr></tr></thead><tbody></tbody></table>'+e+'<div id="urlLastPage" class="hiddenDiv">'+c+'</div><div id="idLastPage" class="hiddenDiv">'+d+"</div>").remove(),a.forEach(function(a,b,c){3==b?($("<th>Price/Unit</th>").appendTo("#myTablePM > thead > tr"),$("<th>Gold/Unit</th>").appendTo("#myTablePM > thead > tr"),$("<th>Price</th>").appendTo("#myTablePM > thead > tr")):$("<th>"+a+"</th>").appendTo("#myTablePM > thead > tr")})}function addPMTableRow(){var a=0,b=IDByImageCountry[$(this).find("td:eq(3) div.flags-small").attr("class").split(" ")[1]],c=$("<div>").append($(this).find("td:first > div.product > div:eq(0) > img:first").clone(),"<br>",$(this).find("td:first > div.product > div:eq(0) > img:not(:first)").clone()),d=/\/([\w\s]+)\.png/gim.exec(c.find("img:eq(0)").attr("src"));if(!d)return!1;var e=d[1];c.find("img").length>1&&(e=e+" "+/\/(q\d)\.png/gim.exec(c.find("img:eq(1)").attr("src"))[1]);var f=$(this).find("td:eq(1)"),g=$(this).find("td:eq(2)").html().trim(),h=$(this).find("td:eq(3)");a=Math.round(g*parseFloat(h.children("b").text().trim())*1e5)/1e5;var i=h.children("div");i.addClass("monetaryMarketFlag");var j=URLMonetaryMarket+"?buyerCurrencyId="+IDByImageCountry[i.attr("class").split(" ")[1]]+"&sellerCurrencyId=0",k=$("<a class='linkMonetaryMarket' href='"+j+"' target='_blank'></a>");k.insertBefore(i),k.append(i);var l=$(this).find("td:eq(4)");$('<tr style="text-align:center;"><td><b style="display:none;">'+e+"</b>"+c.html()+"</td><td>"+f.html()+"</td><td>"+g+"</td><td>"+h.html()+"</td><td></td><td><b>"+a+"</b> "+CCbyID[b]+' <br/> Total: <div style="display:inline;width:10px" class="inputPrice">0</div> '+CCbyID[b]+"</td><td>"+l.html()+"</td></tr>").appendTo("#myTablePM")}function getCurrencyPriceGold(a){var b=0,c=0,d=_MM_C_URL.replace("{1}",a);return $.ajax({type:"GET",url:d,async:!1,success:function(a){var d=$(a),e=$(".dataTable",d);e.length>0&&(e=$(e[0]));var f=e[0].rows[1].cells[2];f?(f=f.textContent.trim(),f=f.substr(f.indexOf("=")+1,f.indexOf("Gold")-f.indexOf("=")-1),b=parseFloat(f),c=parseFloat($(".dataTable tr:eq(1) td:eq(1) > b:first",d).html().trim())):b=-1,d="undefined",$(a).empty().remove()},error:function(a,b,c){},timeout:5e3}),[b,c]}function getTaxByCurrency(a){var b=[],c=_COUNTRY_URL.replace("{1}",a);return $.ajax({type:"GET",url:c,async:!1,success:function(a){for(var c=$(".dataTable",$(a))[1],d=1;d<c.rows.length;d++){var e=c.rows[d];b[d-1]={name:TaxNameByID[d],import:parseFloat(e.cells[2].innerHTML.toUpperCase().replace("&NBSP;","").replace("&NBSP;","").trim()),vat:parseFloat(e.cells[1].innerHTML.toUpperCase().replace("&NBSP;","").replace("&NBSP;","").trim())}}$(a).empty().remove()},error:function(a,b,c){},timeout:5e3}),b}function CalcValuePMProcess(a,b){$("#myTablePM tr:not(:first)").each(function(){var c=[],d=[],f=IDByImageCountry[$(this).find("td:eq(1) div.flags-small").attr("class").split(" ")[1]],g=IDByImageCountry[$(this).find("td:eq(3) div.flags-small").attr("class").split(" ")[1]];if(a[g]!=g){c=a[g];var h=parseFloat($(this).find("td:eq(2)").text().trim());if(s=$(this).find("td:eq(3)").text().trim(),s.indexOf("GOLD")<0&&c[0]>=0){var i=parseFloat(s.substr(0,s.indexOf(" ")).trim()),j=Math.round(i*c[0]*1e5)/1e5,l=(Math.round(h*i*1e3)/1e3,Math.round(h*i*c[0]*1e5)/1e5);if($(this).find("td:eq(4)").html('<div class="flags-small Gold"></div><b>'+j+"</b> Gold<br/> <b>(Ratio: "+c[0]+" "+CCbyID[0]+", Amount: "+c[1]+" "+CCbyID[g]+")</b>"),$(this).find("td:eq(5)").html("<b>"+l+"</b> Gold <br/>"+$(this).find("td:eq(5)").html()),a[g]!=g){d=b[g];for(var m in d)if($(this).find("td:eq(0)").html().toLowerCase().indexOf(d[m].name)>=0){var n=f!=g?d[m].import+d[m].vat:d[m].vat;$(this).find("td:eq(3)").html($(this).find("td:eq(3)").html()+"<br> <hr class='foundation-divider'>  Price without tax: <b title=\"VAT: "+d[m].vat+"; Import Tax: "+d[m].import+'">'+Math.round(parseFloat(i)*(1-parseFloat(n)/100)*1e5)/1e5+"</b>"),$(this).find("td:eq(3)").html($(this).find("td:eq(3)").html()+" <br> Price(G) without tax: <b>"+Math.round(j*(1-parseFloat(n)/100)*1e5)/1e5+"</b>");break}}}}}),$("#myTablePM").tablesorter({sortList:[[4,0]],widthFixed:!0,widgets:["zebra"]}).tablesorterPager({container:$("#pager")})}function CalcValuePM(){function c(c,d){setTimeout(function(){var c=0,e=0,f=_MM_C_URL.replace("{1}",d);$.ajax({type:"GET",url:f,success:function(f){var g=$(f),h=$(".dataTable",g);h.length>0&&(h=$(h[0]));var i=h[0].rows[1].cells[2];i?(i=i.textContent.trim(),i=i.substr(i.indexOf("=")+1,i.indexOf("Gold")-i.indexOf("=")-1),c=parseFloat(i),e=parseFloat($(".dataTable tr:eq(1) td:eq(1) > b:first",g).html().trim())):c=-1,a[d]=[c,e],g="undefined",$(f).empty().remove(),$("#CountCurrency").text(parseInt($("#CountCurrency").text())+1),parseInt($("#CountCurrency").text())==parseInt($("#AllCurrency").text())&&($("#currencyProgressWrap").empty().remove(),0==$("#taxesProgressWrap").length&&0==$("#currencyProgressWrap").length&&CalcValuePMProcess(a,b))},error:function(c,d,e){$("#CountCurrency").text(parseInt($("#CountCurrency").text())+1),parseInt($("#CountCurrency").text())==parseInt($("#AllCurrency").text())&&($("#currencyProgressWrap").empty().remove(),0==$("#taxesProgressWrap").length&&0==$("#currencyProgressWrap").length&&CalcValuePMProcess(a,b))},timeout:5e3})},300*d)}function d(c,d){setTimeout(function(){var c=[],e=_COUNTRY_URL.replace("{1}",d);$.ajax({type:"GET",url:e,success:function(e){for(var f=$(".dataTable",$(e))[1],g=1;g<f.rows.length;g++){var h=f.rows[g];c[g-1]={name:TaxNameByID[g],import:parseFloat(h.cells[2].innerHTML.toUpperCase().replace("&NBSP;","").replace("&NBSP;","").trim()),vat:parseFloat(h.cells[1].innerHTML.toUpperCase().replace("&NBSP;","").replace("&NBSP;","").trim())}}b[d]=c,$(e).empty().remove(),$("#CountTax").text(parseInt($("#CountTax").text())+1),parseInt($("#CountTax").text())==parseInt($("#AllTax").text())&&($("#taxesProgressWrap").empty().remove(),0==$("#taxesProgressWrap").length&&0==$("#currencyProgressWrap").length&&CalcValuePMProcess(a,b))},error:function(c,d,e){$("#CountTax").text(parseInt($("#CountTax").text())+1),parseInt($("#CountTax").text())==parseInt($("#AllTax").text())&&($("#taxesProgressWrap").empty().remove(),0==$("#taxesProgressWrap").length&&0==$("#currencyProgressWrap").length&&CalcValuePMProcess(a,b))},timeout:5e3})},300*d+2e3)}var a={},b={};$("#myTablePM tr:not(:first)").each(function(){var c=IDByImageCountry[$(this).find("td:eq(3) div.flags-small").attr("class").split(" ")[1]];a[c]=c,b[c]=c}),$('<div id="currencyProgressWrap"><center><p style="text-align: center;"><img alt="" src="'+IMGLOAD+'" style="margin-right: 10px;" /><span style="font-size:36px;"><span id="CountCurrency">0</span>/<span id="AllCurrency">'+Object.keys(a).length+'</span></span></p></center></div><p style="clear: both"></p>').appendTo(".small-8 > .testDivblue"),$('<div id="taxesProgressWrap"><center><p style="text-align: center;"><img alt="" src="'+IMGLOAD+'" style="margin-right: 10px;" /><span style="font-size:36px;"><span id="CountTax">0</span>/<span id="AllTax">'+Object.keys(b).length+'</span></span></p></center></div><p style="clear: both"></p>').appendTo(".small-8 > .testDivblue");var e=0;for(var f in a)c(e,f),e++;e=0;for(var f in b)d(e,f),e++}function NewTableProductMarket(){createTablePM();for(var a=$("#urlLastPage").text().trim(),b=parseInt($("#idLastPage").text().trim()),c=1;c<=b;c++){var d=1==b?a:a+c;$.ajax({type:"GET",url:d,success:function(a){$(a).find(".dataTable tr:not(:first)").each(addPMTableRow).empty().remove(),a="undefined",$("#CountPage").text(parseInt($("#CountPage").text())+1),parseInt($("#CountPage").text())==parseInt($("#AllPage").text())&&($("#productProgressWrap").empty().remove(),changeNewPMTable(),CalcValuePM())},error:function(a,b,c){$("#CountPage").text(parseInt($("#CountPage").text())+1),parseInt($("#CountPage").text())==parseInt($("#AllPage").text())&&($("#productProgressWrap").empty().remove(),changeNewPMTable(),CalcValuePM())},timeout:5e3})}}function orderSelect(a){var b=[];a.find("option").each(function(){b.push($(this)),$(this).remove()});var c=new Array(46);c[0]=b[0];for(var d=0,e=0,f=1;f<b.length;f++){var g=b[f].attr("value").split("-");if(2==g.length){var h=parseInt(g[0])-1;"WEAPON"==g[1]?c[1+h]=b[f]:"FOOD"==g[1]?c[6+h]=b[f]:"GIFT"==g[1]?c[11+h]=b[f]:"TICKET"==g[1]?c[16+h]=b[f]:(c[27+e]=b[f],e++)}else c[21+d]=b[f],d++}for(var f=0;f<c.length;f++)c[f]&&a.append(c[f]);a.find("option")[0].selected=!0}function changeSelect(a,b,c,d){var e,f=1;a.find("option").each(function(){if(""!=$(this).attr("value")){var d=$(this).text(),g=d.indexOf("(",0);g!=-1&&(d=d.substr(g+1,d.indexOf(")",g)-g-1),mypatttofindnum=/\d{1,45}/g,d=mypatttofindnum.exec(d));var h=$("<div class='storage productMU'>");h.append("<div>"+d+"</div>");var i=$("<div></div>");h.append(i);var j=$("<div class='storageButton' selectIndex='"+f+"'></div>");j.append(h);var k=$(this).attr("value").split("-");1==k.length?("IRON"==k[0]?i.append("<img src='"+IMGIRON+"' />"):"OIL"==k[0]?i.append("<img src='"+IMGOIL+"' />"):"GRAIN"==k[0]?i.append("<img src='"+IMGGRAIN+"' />"):"DIAMONDS"==k[0]?i.append("<img src='"+IMGDIAMONDS+"' />"):"WOOD"==k[0]?i.append("<img src='"+IMGWOOD+"' />"):"STONE"==k[0]&&i.append("<img src='"+IMGSTONE+"' />"),h.css({height:"67px"}),j.css({margin:"10px 4px 8px 10px"})):(k.length=2)&&("WEAPON"==k[1]?i.append("<img src='"+IMGWEAPON+"' />"):"FOOD"==k[1]?i.append("<img src='"+IMGFOOD+"' />"):"TICKET"==k[1]?i.append("<img src='"+IMGTICKET+"' />"):"GIFT"==k[1]?i.append("<img src='"+IMGGIFT+"' />"):"HOUSE"==k[1]?i.append("<img src='"+IMGHOUSE+"' />"):"DEFENSE_SYSTEM"==k[1]?i.append("<img src='"+IMGDS+"' />"):"HOSPITAL"==k[1]?i.append("<img src='"+IMGHOSPITAL+"' />"):"ESTATE"==k[1]&&i.append("<img src='"+IMGESTATE+"' />"),i.append("<img class='qualityMU' src='"+IMGQUALITY+k[0]+IMGEXTENSION+"' />"),h.css({height:"77px"}),j.css({margin:"6px 4px 2px 10px"})),j.bind("mouseover",function(){e!=$(this).attr("selectIndex")&&$(this).addClass("storageButtonHover")}),j.bind("mouseout",function(){e!=$(this).attr("selectIndex")&&$(this).removeClass("storageButtonHover")}),j.bind("click",function(){if(e==$(this).attr("selectIndex"))$(this).removeClass("storageButtonClick"),$(this).removeClass("storageButtonDblClick"),a.find("option").removeAttr("selected"),e=null,c.val("1");else{if(e){var d=b.find(".storageButton[selectIndex='"+e+"']");d.removeClass("storageButtonClick"),d.removeClass("storageButtonDblClick"),c.val("1")}$(this).removeClass("storageButtonHover"),$(this).removeClass("storageButtonDblClick"),$(this).addClass("storageButtonClick"),e=$(this).attr("selectIndex"),a.find("option").removeAttr("selected"),a.find("option")[e].selected=!0}}),j.bind("dblclick",function(){return $(this).removeClass("storageButtonHover"),$(this).removeClass("storageButtonClick"),$(this).addClass("storageButtonDblClick"),e=$(this).attr("selectIndex"),a.find("option").removeAttr("selected"),a.find("option")[e].selected=!0,c.val($(this).text().trim()),!1}),b.append(j),f++}})}function changeMarketOffers(){var a=$("#resourceInput"),b=$(".storage").parent(),c=$("#quantity"),d=$("#productMarketOfferForm").parent();d.children().first().remove(),d.children().first().remove(),d.addClass("leftDivMyOffers"),b.children().remove(),b.addClass("myOffersProduct"),b.append("One click to select <b>ONE item</b>.<br/>Double click to select <b>ALL items</b>.<br/>");var e=$("#countryInput").parent().parent();e.find("b").eq(0).css({display:"inline"}),e.find("b").eq(1).css({display:"inline"}),$("#countryInput").addClass("customSelectList"),a.addClass("customSelectList"),firstFastButton=!0,c.addClass("quantityMyOffers"),$("#priceInput").addClass("priceInputMyOffers");var f=$("<input class='fastBtn FastButtonLeft' type='button' value='10' />");f.bind("click",function(){firstFastButton?c.attr("value","10"):c.attr("value",parseInt(c.attr("value"))+10),firstFastButton=!1});var g=$("<input class='fastBtn FastButtonLeft' type='button' value='50' />");g.bind("click",function(){firstFastButton?c.attr("value","50"):c.attr("value",parseInt(c.attr("value"))+50),firstFastButton=!1});var h=$("<input class='fastBtn FastButtonRight' type='button' value='100' />");h.bind("click",function(){firstFastButton?c.attr("value","100"):c.attr("value",parseInt(c.attr("value"))+100),firstFastButton=!1});var i=$("<input class='fastBtn FastButtonRight' type='button' value='1K' />");i.bind("click",function(){firstFastButton?c.attr("value","1000"):c.attr("value",parseInt(c.attr("value"))+1e3),firstFastButton=!1}),f.insertBefore(c),g.insertBefore(c),i.insertAfter(c),h.insertAfter(c),orderSelect(a),changeSelect(a,b,c,"#aaaaaa"),$(".storage").bind("click",function(){setTimeout(mySendPreviewRequest,500)}),$("#countryInput").unbind("change"),$("#countryInput").bind("change",function(){mySendPreviewRequest()}),$("#resourceInput").unbind("change"),$("#resourceInput").bind("change",function(){mySendPreviewRequest()}),$("#priceInput").unbind("change"),$("#priceInput").bind("change",function(){mySendPreviewRequest()}),$("#priceInput").bind("keydown",function(){setTimeout(mySendPreviewRequest,1e3)})}function mySendPreviewRequest(){if(isFormCorrect()){var a,b=new String(window.location);b.indexOf(URLMarketOffers,0)>=0?a=$("a[href='pendingCitizenshipApplications.html']").prev():b.indexOf(URLStockProducts,0)>=0&&(a=$("a[href*='stockCompanyAssets.html?id=']").prev().prev().prev().prev().prev().prev());var c=IDByImageCountry[a.attr("class").split(" ")[1]],d="country="+$("#countryInput").val()+"&resource="+$("#resourceInput").val();d+="&price="+$("#priceInput").val()+"&citizenship="+c;var e=$("#resourceInput option:selected").text();$("#preview").html("<div class ='previewMyOffers'>Loading tax resource...</div >"),$.ajax({type:"POST",url:"productTaxes.html",data:d,dataType:"html",success:function(a){var b=$("#preview");b.html(a),b.children(".dataTable").addClass("previewDataTable");var c=$("<div class='resourceMyOffers'>"+e+"</div>"),d=URLMarket+"?resource=",f=$("#resourceInput").val().split("-");d+=1==f.length?f[0]+"&countryId="+$("#countryInput").val():f[1]+"&countryId="+$("#countryInput").val()+"&quality="+f[0],c.append("<br /><a class='textMyOffers' href='"+d+"' target='_blank'>Market</a>"),d=URLMonetaryMarket+"?buyerCurrencyId="+$("#countryInput").val()+"&sellerCurrencyId=0",c.append("  |  <a class='MMMyOffers' href='"+d+"' target='_blank'>MM link</a>");var g=b.find(".currencyFlag").first();g.addClass("flagMyOffer"),b.find(".currencyFlag").remove(),c.insertBefore(b.children().first()),g.insertBefore(b.children("b").first()),b.children("b").addClass("titleMyOffers");var h=b.children(".dataTable").find("tr").eq(0);b.children(".dataTable").find("tr").eq(1).children().css({height:"25px"}),h.children().css({height:"22px"}),h.children().eq(0).text("Gross"),h.children().eq(1).text("Net"),h.children().eq(3).text("Tax")}})}}function editOffers(){$(".dataTable tr").each(function(){$(this).parent().children().index($(this)),$(this).parent().parent().children().index($(this).parent());$.isNumeric($(this).children("td:eq(2)").text())&&$(this).children("td:eq(2)").append("<a class='editQuanty'>Edit</a>"),$(this).children("td:eq(3):contains(.)").append("<a class='editPrice'>Edit</a>")}),$(".editQuanty").click(function(){numberpatt=/\d{1,30}/,Quanty=$(this).parent().text().match(numberpatt);var a=$(this).parent().next(),b=a.children("div"),c=IDByImageCountry[b.attr("class").split(" ")[1]];qPrice=$(this).parent().next().text().match(/\d{1,30}.\d{2}/),productcell=$(this).parent().prev().prev().html(),quality=productcell.match(/q\d/),quality?quality=quality[0].match(/\d/)+"-":quality="",termek=productcell.match(/productIcons\/\D.*.png/),type=termek[0].substr(13),type=type.substr(0,type.length-4),type=type.toUpperCase(),deleteId=$(this).parent().next().next().next().next().next().html().match(/\d{1,60}/),$(this).parent().html("<input id='newQuanty' type='text' value='"+Quanty+"' min='1' style='width: 30px' class='digit quantityMyOffers' name='quantity' id='quantity'><input id='editProductMarketOfferForm' type='button' value='Edit' style='cursor: pointer;'></form>"),$("#editProductMarketOfferForm").click(function(){newQuanty=$("#newQuanty").val(),$(this).parent().html("<img src='"+IMGLOAD+"' >"),$.ajax({type:"POST",url:"/citizenMarketOffers.html",async:!1,data:{id:deleteId[0],action:"DELETE_OFFER"}}),$.ajax({type:"POST",url:"/citizenMarketOffers.html",async:!1,data:{countryId:c,product:quality+type,price:String(qPrice),quantity:newQuanty,action:"POST_OFFER"}}),location.reload()})}),$(".editPrice").click(function(){numberpatt=/\d{1,30}/,Quanty=$(this).parent().prev().text().match(numberpatt);var a=$(this).parent().next(),b=a.children("div"),c=IDByImageCountry[b.attr("class").split(" ")[1]];qPrice=$(this).parent().text().match(/\d{1,30}.\d{2}/),productcell=$(this).parent().prev().prev().prev().html(),quality=productcell.match(/q\d/),quality?quality=quality[0].match(/\d/)+"-":quality="",termek=productcell.match(/productIcons\/\D.*.png/),type=termek[0].substr(13),type=type.substr(0,type.length-4),type=type.toUpperCase(),deleteId=$(this).parent().next().next().next().next().html().match(/\d{1,60}/),$(this).parent().html("<input id='newPrice' type='text' value='"+qPrice+"' min='1' style='width: 30px' class='digit quantityMyOffers' name='quantity' id='quantity'><input id='editProductMarketOfferForm' type='button' value='Edit' style='cursor: pointer;'></form>"),$("#editProductMarketOfferForm").click(function(){newPrice=$("#newPrice").val(),$(this).parent().html("<img src='"+IMGLOAD+"' >"),$.ajax({type:"POST",url:"/citizenMarketOffers.html",async:!1,data:{id:deleteId[0],action:"DELETE_OFFER"}}),$.ajax({type:"POST",url:"/citizenMarketOffers.html",async:!1,data:{countryId:c,product:quality+type,price:String(newPrice),quantity:Quanty[0],action:"POST_OFFER"}}),location.reload()})})}function changeMonetaryMarket(){3==$("#container").children().length&&$("#container").children().last().remove();var a=$("#container").find(".testDivblue"),b=a.eq(2);a.eq(2).hide();var c=a.eq(3),d=a.eq(4),e=a.eq(5);c.addClass("currentOffersMM"),e.addClass("yourOffersMM"),e.children().last().remove(),$("#buy").addClass("customSelectList"),$("#sell").addClass("customSelectList"),$("#offeredMoneyId").addClass("customSelectList"),$("#buyedMoneyId").addClass("customSelectList");var f=$("<div class='monetaryMarketTitleBlock'></div>");f.insertBefore(b),f.append(b);var g=$("<input class='swapView' type='button' value='Swap & View' />");g.insertAfter("#swap2"),g.bind("click",function(){$("#swap2").click(),$("#monetaryMarketView").submit()}),$("#swap2").addClass("swapView"),$("#swap2").bind("click",function(){var a=$("#offeredMoneyId").val();$("#offeredMoneyId").val($("#buyedMoneyId").val()),$("#buyedMoneyId").val(a);var b="Gold";"Gold"!=$("#buyedMoneyId > option:selected").text()&&(b=$("#buyedMoneyId > option:selected").text().substr(0,3)),$("#offeredRate2").text(b),b="Gold","Gold"!=$("#offeredMoneyId > option:selected").text()&&(b=$("#offeredMoneyId > option:selected").text().substr(0,3)),$("#offeredCurrency").text(b),$("#offeredRate1").text(b)});var h=$("<div class='monetaryMarketTitleBlock'></div>");h.insertBefore(b),h.append(d),h.append(c),h.append(e),$("#swap1").addClass("swapYourOffers"),$("#swap1").bind("click",function(){var a=$("#buy").val();if($("#buy").val($("#sell").val()),$("#sell").val(a),"0"==$("#offeredMoneyId").val()){var b=$(".monetaryMarketCurrencyBlock").find(".currencySelector[id='"+$("#buyedMoneyId").val()+"']"),c="0.0";0!=b.length&&(c=b.children("b").text()),$("#value").val(c)}else $("#value").val("0.0")}),$("#buyedMoneyId").next().remove(),$("#value").addClass("priceInputMM"),$("#exchangeRatio").addClass("priceInputMM");var i=$("<div class='monetaryMarketCurrencyBlock'></div>");i.addClass("testDivblue"),f.append(i);var j=$("#hiddenMoney").parent();j.find(".flags-small").each(function(){var a=IDByImageCountry[$(this).attr("class").split(" ")[1]],b=$("<div class='currencySelector'></div>");b.attr("id",a),0==a&&(selectedCurrency=b),b.append("<div class='"+$(this).attr("class")+"'></div>"),b.append("<b>"+$(this).next().text()+" </b>");var c=$("#buy").children("option[value='"+a+"']").text().split(" ");b.append(c[0]),i.append(b),b.bind("click",function(){var a=$(this).attr("id");if("0"!=a&&a!=selectedCurrency.attr("id")){selectedCurrency&&selectedCurrency.removeClass("selectedCurrency"),"0"==$("#buy").val()?$("#sell").val(a):$("#buy").val(a),"0"==$("#offeredMoneyId").val()?$("#buyedMoneyId").val(a):$("#offeredMoneyId").val(a),$(this).addClass("selectedCurrency"),selectedCurrency=$(this);var b="Gold";"Gold"!=$("#buyedMoneyId > option:selected").text()&&(b=$("#buyedMoneyId > option:selected").text().substr(0,3)),$("#offeredRate2").text(b),b="Gold","Gold"!=$("#offeredMoneyId > option:selected").text()&&(b=$("#offeredMoneyId > option:selected").text().substr(0,3)),$("#offeredCurrency").text(b),$("#offeredRate1").text(b),"0"==$("#buyedMoneyId").val()?$("#value").val($(this).children("b").text()):$("#value").val("0.0")}})});var k="#value",l=!0,m=$("<input class='priceFastButton' type='button' value='1' />");m.bind("click",function(){l?$(k).attr("value","1"):$(k).attr("value",parseInt($(k).attr("value"))+1),l=!1});var n=$("<input class='priceFastButton' type='button' value='5' />");n.bind("click",function(){l?$(k).attr("value","5"):$(k).attr("value",parseInt($(k).attr("value"))+5),l=!1});var o=$("<input class='priceFastButton' type='button' value='10' />");o.bind("click",function(){l?$(k).attr("value","10"):$(k).attr("value",parseInt($(k).attr("value"))+10),l=!1});var p=$("<input class='priceFastButton' type='button' value='50' />");p.bind("click",function(){l?$(k).attr("value","50"):$(k).attr("value",parseInt($(k).attr("value"))+50),l=!1});var q=$("<input class='priceFastButton' type='button' value='100' />");q.bind("click",function(){l?$(k).attr("value","100"):$(k).attr("value",parseInt($(k).attr("value"))+100),l=!1});var r=$("<input class='priceFastButton' type='button' value='500' />");r.bind("click",function(){l?$(k).attr("value","500"):$(k).attr("value",parseInt($(k).attr("value"))+500),l=!1});var s=$("#offeredRate2").next();m.insertBefore(s),n.insertBefore(s),o.insertBefore(s),p.insertBefore(s),q.insertBefore(s),r.insertBefore(s);var t=$("<input class='postOfferButton' type='button' value='Post new offer' />"),s=$("#monetaryOfferPost").children("center").children("input");t.insertBefore(s),s.hide(),t.click("click",function(){var a=parseFloat($("#value").val()),b=parseFloat($("#exchangeRatio").val()),c=confirm("Sell "+a+" "+$("#offeredCurrency").text()+" for "+a*b+" "+$("#offeredRate2").text());c&&$("#monetaryOfferPost").submit()})}function changeMonetaryMarketTable(){$(".dataTable").find("input[type='text']").addClass("inputTextTable");var a=$(".dataTable").find("input[type='submit']").addClass("inputSubmitTable"),b=$("<input class='buyAllSubmit' type='submit' value='All' />");b.bind("click",function(){var a=$(this).parent().parent().prev().prev().text().match(/\d{1,10}.\d{1,5}/);return $(this).parent().children("input[type='text']").val(a),!1}),b.insertBefore(a),$(".dataTable").addClass("dataTableMod"),$(".dataTable > tbody > tr:first-child > td").addClass("dataTableHeaders")}function monetaryMarketPriceEdit(){$(".dataTable:eq(1) tr:not(:first)").each(function(){$(this).children("td:eq(0)").append(" <a class='editQuanty'>Edit</a>"),$(this).children("td:eq(1)").append(" <a class='editPrice'>Edit</a>")}),$(".editQuanty").click(function(){SellValue=/(\d{1,30}.\d\d) ([a-zA-Z]{3,4})/gim.exec($(this).parent().text()),Quanty=SellValue[1],SellCC=SellValue[2],BuyValue=/= (\d{1,10}.{0,1}\d{0,4}) ([a-zA-Z]{3,4})/gim.exec($(this).parent().next().text()),ratio=BuyValue[1],BuyCC=BuyValue[2],href=$(this).parent().next().next().find("a").attr("href"),$(this).parent().html("<input id='newQuanty' type='text' value='"+Quanty+"' min='1' style='width: 30px' class='digit quantityMyOffers' name='quantity' id='quantity'><input id='editProductMarketOfferForm' type='button' value='Edit' style='cursor: pointer;'></form>"),$("#editProductMarketOfferForm").click(function(){newQuanty=$("#newQuanty").val(),$(this).parent().html("<img src='"+IMGLOAD+"' >"),$.ajax({type:"GET",url:"/monetaryMarket.html"+href,async:!1}),$.ajax({type:"POST",url:"/monetaryMarket.html?action=post",async:!1,data:{offeredMoneyId:IDbyCC[SellCC],buyedMoneyId:IDbyCC[BuyCC],value:newQuanty,exchangeRatio:String(ratio)}}),location.reload()})}),$(".editPrice").click(function(){SellValue=/(\d{1,30}.\d\d) ([a-zA-Z]{3,4})/gim.exec($(this).parent().prev().text()),Quanty=SellValue[1],SellCC=SellValue[2],BuyValue=/= (\d{1,10}.{0,1}\d{0,4}) ([a-zA-Z]{3,4})/gim.exec($(this).parent().text()),ratio=BuyValue[1],BuyCC=BuyValue[2],href=$(this).parent().next().find("a").attr("href"),$(this).parent().html("<input id='newratio' type='text' value='"+ratio+"' min='1' style='width: 30px' class='digit quantityMyOffers' name='quantity' id='quantity'><input id='editProductMarketOfferForm' type='button' value='Edit' style='cursor: pointer;'></form>"),$("#editProductMarketOfferForm").click(function(){newRatio=$("#newratio").val(),$(this).parent().html("<img src='"+IMGLOAD+"' >"),$.ajax({type:"GET",url:"/monetaryMarket.html"+href,async:!1}),$.ajax({type:"POST",url:"/monetaryMarket.html?action=post",async:!1,data:{offeredMoneyId:IDbyCC[SellCC],buyedMoneyId:IDbyCC[BuyCC],value:String(Quanty),exchangeRatio:String(newRatio)}}),location.reload()})})}function monetaryMarketPriceRatio(){var a=0,b=0;$(".dataTable:eq(0) tr:not(:first)").each(function(){amount=$(this).children("td:eq(1)").children("b").attr("title"),ratio=$(this).children("td:eq(2)").children("b").html();var c=/\d+ (\w{2,4}) = <b>[\d\.]+<\/b> (\w{2,4})/.exec($(this).children("td:eq(2)").html()),d=c[2],e=c[1];c=void 0,$(this).children("td:eq(1)").append("<br/> All: <b>"+Math.round(amount*ratio*100)/100+"</b> "+d),a=IDbyCC[e],b=IDbyCC[d]}),$.ajax({url:"/monetaryMarket.html?buyerCurrencyId="+b+"&sellerCurrencyId="+a,async:!1}).done(function(a){versus_offer=$(a).find(".dataTable:eq(0) tr:eq(1) td:eq(2)").html(),$(".dataTable:eq(0) tr:not(:first)").each(function(){$(this).children("td:eq(2)").append("<br/>"+versus_offer)})})}function BattleStatsMinimize(){if($("#battleHeaderImage").remove(),$("#battleStats").show(),$("#battleSelectable:first + #battleSelectable div.small-10:first > #moreBattleStats").remove(),$("#battleSelectable:first + #battleSelectable div.small-10:first").css({"padding-bottom":"1px"}),$("#battleStats").insertBefore($("#battleSelectable:first + #battleSelectable div.small-10:first")),$('<div id="wrapperBattleStatsButtons" class="foundation-style small-10 columns" style="margin-bottom:.4em;"></div>').insertBefore($("#battleSelectable:first + #battleSelectable div.small-4:first")),$('<div id="showTop3BattleStats" style="padding-bottom:.4em;padding-top:.4em;margin:.4em .4em 0 .4em;" class="foundation-style button"> Show Top 3 </div>').appendTo($("#wrapperBattleStatsButtons")),$('<div id="showTop10BattleStats" style="padding-bottom:.4em;padding-top:.4em;margin:.4em .4em 0 .4em;" class="foundation-style button"> Show Top 10 </div>').appendTo($("#wrapperBattleStatsButtons")),$('<div id="showRecentActionsBattleStats" style="padding-bottom:.4em;padding-top:.4em;margin:.4em .4em 0 .4em;" class="foundation-style button"> Recent Actions </div>').appendTo($("#wrapperBattleStatsButtons")),$('<div id="showSpectatorsBattleStats" style="padding-bottom:.4em;padding-top:.4em;margin:.4em .4em 0 .4em;" class="foundation-style button"> Spectators </div>').appendTo($("#wrapperBattleStatsButtons")),$("#wrapperBattleStatsButtons + div.small-4, #wrapperBattleStatsButtons + div.small-4 + div.small-2, #wrapperBattleStatsButtons + div.small-4 + div.small-2 + div.small-4").addClass("Top3BattleStatsElements"),$("#battleStats > div.small-10:first").addClass("Top10BattleStatsElements"),$(".Top10BattleStatsElements + div.small-10").addClass("RecentActionsBattleStatsElements"),$(".RecentActionsBattleStatsElements + div.small-10, .RecentActionsBattleStatsElements + div.small-10 + div.small-10").addClass("SpectatorsBattleStatsElements"),$(".Top3BattleStatsElements").css("display",$.jStorage.get("SGTop3BattleStatsElements","none")),$("#showTop3BattleStats").click(function(){$(".Top3BattleStatsElements").toggle("fast",function(){$.jStorage.set("SGTop3BattleStatsElements",$(".Top3BattleStatsElements").css("display"))})}),$(".Top10BattleStatsElements").css("display",$.jStorage.get("SGTop10BattleStatsElements","none")),$("#showTop10BattleStats").click(function(){$(".Top10BattleStatsElements").toggle("fast",function(){$.jStorage.set("SGTop10BattleStatsElements",$(".Top10BattleStatsElements").css("display"))})}),$(".RecentActionsBattleStatsElements").css("display",$.jStorage.get("SGRecentActionsBattleStatsElements","none")),$("#showRecentActionsBattleStats").click(function(){$(".RecentActionsBattleStatsElements").toggle("fast",function(){$.jStorage.set("SGRecentActionsBattleStatsElements",$(".RecentActionsBattleStatsElements").css("display"))})}),$(".SpectatorsBattleStatsElements").css("display",$.jStorage.get("SGSpectatorsBattleStatsElements","none")),$("#showSpectatorsBattleStats").click(function(){$(".SpectatorsBattleStatsElements").toggle("fast",function(){$.jStorage.set("SGSpectatorsBattleStatsElements",$(".SpectatorsBattleStatsElements").css("display"))})}),$("#recentDefenders > span").length<5)for(count=$("#recentDefenders > span").length;count<5;)$("#recentDefenders").append("<span></span>"),count++;if($("#recentAttackers > span").length<5)for(count=$("#recentAttackers > span").length;count<5;)$("#recentAttackers").append("<span></span>"),count++}function ModalWindowFunc(a){switch(a){case 1:window.picoModal=function(){return lastModalWindow.remove(),lastModalWindow=$("#fightResponse > div").clone(),$.blockUI({message:lastModalWindow,fadeIn:400,fadeOut:400,timeout:2e3,showOverlay:!1,centerY:!1,css:{width:"300px",top:"50px",left:"50%",right:"",margin:"0px 0px 0px -55px",border:"none",padding:"5px",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px",opacity:.9,color:"#fff",cursor:"default","font-size":"16px"}}),!0};break;case 2:window.picoModal=function(){return!0},$("#fightStatus").attr("style","").show().removeClass("testDivblue").addClass("fightContainer"),$("#fightResponse").hide().addClass("foundation-style small-10 columns"),$('<div id="wrapperStatusActionButtons" class="foundation-style small-10 columns" style="margin-bottom:.4em;"></div>').insertBefore($("#fightResponse")),$('<div id="SGShowStatusAction" style="padding-bottom:.4em;padding-top:.4em;margin:.4em .4em 0 .4em;" class="foundation-style button"> Show Status Action </div>').appendTo($("#wrapperStatusActionButtons")),
$("#fightResponse").css("display",$.jStorage.get("SGShowStatusActionButton","none")),$("#SGShowStatusAction").click(function(){$("#fightResponse").toggle("fast",function(){$.jStorage.set("SGShowStatusActionButton",$("#fightResponse").css("display"))})})}}function SendMSG(a,b,c,d){setTimeout(function(){$.ajax({type:"POST",url:"/composeMessage.html",data:{receiverName:a,title:b,body:c,action:"REPLY"},success:function(){$("#LeftMSG").text(parseInt($("#LeftMSG").text())+1),parseInt($("#LeftMSG").text())==parseInt($("#AllMSG").text())&&$.unblockUI()}})},d)}function MUBrodcastMsg(){$("div.blueLabel.unitStatusOptions:last").after('<div class="blueLabel unitStatusOptions"><a href="#" id="SG_BRC_MSG" style="font-weight: bold">SG Broadcast MSG</a></div>'),$("#SG_BRC_MSG").click(function(){$.blockUI({message:$('<center><b style="font-size:17px">SG Broadcast MSG</b></center><center><div id="SG_MSG" class="foundation-style blueLabel " style="margin-bottom:15px; width:530px;"><b style="display:block">Title:</b><input type="text" style="width: 400px;" path="title" maxlength="100" minlength="1" id="titleInput" value="Broadcast from military unit"><br><script language="JavaScript">function append(textBefore, textAfter)  {var yourTextarea = document.getElementById(\'messageForm\');var selectionStart = yourTextarea.selectionStart;var selectionText = yourTextarea.value.substr(yourTextarea.selectionStart, yourTextarea.selectionEnd-yourTextarea.selectionStart);var prefix = yourTextarea.value.substr(0, yourTextarea.selectionStart);var postfix = yourTextarea.value.substr(yourTextarea.selectionEnd);yourTextarea.value = prefix+""+textBefore+"" + selectionText + ""+textAfter+""+postfix;yourTextarea.selectionStart = selectionStart;yourTextarea.focus();};</script><b>Message:</b><br><textarea style="width:95%; height: 250px;" name="body" maxlength="10000" id="messageForm"></textarea><p style="display:inline"> Characters remaining:     </p><p class="charsRemaining" style="display:inline;">10000</p><p></p><p style="clear: both"></p><div style="display: inline" class="bbcodebuttons"><input type="button" onclick="javascript: append(\'[b]\',\'[/b]\')" value="B" id="boldButton" name="boldButton" style="cursor: pointer;"><input type="button" onclick="javascript: append(\'[i]\',\'[/i]\')" value="I" id="italicButton" name="italicButton" style="cursor: pointer;"><input type="button" onclick="javascript: append(\'[u]\',\'[/u]\')" value="U" id="underlineButton" name="underlineButton" style="cursor: pointer;"><input type="button" onclick="javascript: append(\'[quote]\',\'[/quote]\')" value="Quote" id="quoteButton" name="quoteButton" style="cursor: pointer;"><input type="button" onclick="javascript: append(\'[url=LINK]\',\'[/url]\')" value="Url" id="urlButton" name="urlButton" style="cursor: pointer;"><input type="button" onclick="javascript: append(\'[citizen]citizen name[/citizen]\',\'\')" value="Citizen" id="citizenButton" name="citizenButton" style="cursor: pointer;"><input type="button" onclick="javascript: append(\'[currency]PLN[/currency]\',\'\')" value="Currency" id="currencyButton" name="currencyButton" style="cursor: pointer;"><input type="button" onclick="javascript: append(\'[center]\',\'[/center]\')" value="Center" id="boldButton" name="centerButton" style="cursor: pointer;"><br /><br /><a href="javascript: append(\':)\',\'\')"><img border="0" src="'+IMGSMILE+'"> </a><a href="javascript: append(\':D\',\'\')"><img border="0" src="'+IMGBIGSMILE+'"> </a><a href="javascript: append(\':\\\',\'\')"><img border="0" src="'+IMGCIACH+'"> </a><a href="javascript: append(\':P \',\'\')"><img border="0" src="'+IMGTONQUE+'"> </a><a href="javascript: append(\':( \',\'\')"><img border="0" src="'+IMGUNHAPPY+'"> </a><a href="javascript: append(\';) \',\'\')"><img border="0" src="'+IMGEYE+'"> </a></div><p style="cleat: both"></p><input type="hidden" value="REPLY" name="action"><input type="button" id="SENDMSG" value="Send" style="cursor: pointer;"> &nbsp; <input type="button" value="Close" id="ClosewButton" style="cursor: pointer;"><p style="clear: both"></p> </div></center>'),css:{top:"48px",left:($(window).width()-600)/2+"px",width:"600px",border:"0px",position:"absolute",textAlign:"left"}}),$("#ClosewButton").click(function(){$.unblockUI()}),$("#SENDMSG").click(function(){IdArray=new Array,$("div.testDivblue > center + br + div > div > a.profileLink").each(function(){"rgb(55, 135, 234)"==$(this).css("color")&&(IdArray[IdArray.length]=$(this).text().replace(/★ /g,""))}),msgTitle=$("#titleInput").val(),msgBody=$("#messageForm").val(),$("#SG_MSG").html('<center><p style="text-align: center;"><h1>Dont Close...</h1><img alt="" src="'+IMGLOADBAR+'" style="margin-left:-13px; width: 562px; height: 126px;" /></p><p style="text-align: center;"><span style="font-size:36px;"><span id="LeftMSG">0</span>/<span id="AllMSG">'+IdArray.length+"</span></span></p></center>"),IdArray.forEach(function(a,b,c){var d=11e3*b;SendMSG(a,msgTitle,msgBody,d)})})})}function TextStorage(){$('<div id="TextStorage" style="width:350px;float: left; text-align: left" class="testDivwhite"><ul></ul></div>').insertAfter($(".testDivwhite > div.storage:first").parent()),$(".testDivwhite > div.storage").each(function(){var a=$.trim($(this).children("div:first").text()),b=/\/(\w+)\.png/gim.exec($(this).children("div:eq(1)").children("img:first").attr("src"))[1],c="";$(this).children("div:eq(1)").children("img").length>1&&(c=" "+/\/(q\d)\.png/gim.exec($(this).children("div:eq(1)").children("img:eq(1)").attr("src"))[1]),$("<li>"+b+c+":"+a+"</li>").appendTo("#TextStorage > ul")})}function resizeProductImage(a){a.each(function(){var a=$(this).parent(),b=a.find("img");a.children().remove();var c=$("<div style='url('"+IMGSTRIPS+"') repeat scroll 0 0 #3D6571'></div>");c.append(b.eq(0).addClass("productImage")),b.length>1&&c.append(b.eq(1).addClass("productQuality")),a.append(c)})}function addCompanyButtons(){var a=IDByImageCountry[$("a[href^='region.html']").prev().attr("class").split(" ")[1]],b=$(".workerListDiv"),d=($(".offerListDiv"),$("<input class='updateSalariesButton' type='button' value='Update salaries'/>"));d.insertBefore(b.children().first()),d.bind("click",function(){b.find(".redText").remove(),b.find(".greenText").remove();var c=0,d=[];b.find(".tableRow").each(function(){var e=$(this).find("td"),f=parseInt(e.eq(1).text());d.indexOf(f)==-1&&(d.push(f),setTimeout(function(){$.ajax({url:URLJobMarket+"?countryId="+a+"&minimalSkill="+f,success:function(a){var c=$(a).find(".dataTable").find("tr"),d=c.eq(1).find("td").eq(4).children("b").text();d=parseFloat(d),b.find(".workerSkill"+f).each(function(){var a,b,c=parseFloat($(this).children(".salary").children("b").text());c<d?(a="redText",b="-"+parseInt(1e4*(d/c-1))/100):(a="greenText",b="+"+parseInt(1e4*(c/d-1))/100),$(this).append("<b class='"+a+"'>"+d+" ("+b+"%)</b>")})}})},500*c),c++)})});var e=$("<input class='updateJobsButton' type='button' value='Update jobs'/>");if(e.insertBefore(b.children().first()),e.bind("click",function(){var a=getUrlVars().id;$.ajax({url:URLCompanyDetails+a,success:function(a){$(a).find("#productivityTable").find("tr").each(function(){var a=$(this).children("td").last(),c=$(this).find("a");if(c){var d=b.find("a[href='"+c.attr("href")+"']").parent();2==a.children("div").length?(d.append("<br/>"),d.append("<b>"+a.children().eq(1).text().replace("(","").replace(")","")+"</b>"),d.addClass("greenBackgroundCompany")):d.addClass("redBackgroundCompany")}})}})}),1==$("#createJobForm td:last").length){var f=$("<input class='updateJobSalary' type='button' value='Update job salary'/>");f.appendTo("#createJobForm td:last"),f.bind("click",function(){var a=$("input[name='minimalSkill']").val();$(".workerListDiv table.dataTable tr:not(:first) > .workerSkill"+a+" > div > form").each(function(){var a=$(this).find("input[name='id']").val(),b=$(this).find("input[name='workerId']").val(),c=$(this).find("input[name='action']").val(),d=$("input[name='price']").val(),e="id="+a+"&workerId="+b+"&action="+c+"&newSalary="+d;$.ajax({type:"POST",url:"company.html",async:!1,data:e})});var b=NotifyMotivateTemp;b=b.replace("{1}","update_salary_completed"),b=b.replace("{2}","Salary Notification"),b=b.replace("{3}","Update salary completed"),MotivateNotify(b)})}}function companyImprovements(){14==$("#minimalSkill option").length&&($("#minimalSkill").append("<option value='15'>15</option>"),$("#minimalSkill").append("<option value='16'>16</option>"));var a=$("#container").find(".testDivblue"),b=a.eq(2).find("table").eq(1),c=b.find("tr").first().children("td").first();c.next().children().css({"max-width":"100%"}),c.remove();var d=IDByImageCountry[$("a[href^='region.html']").prev().attr("class").split(" ")[1]];if(6==a.length){var e=a.eq(5),f=a.eq(4),g=a.eq(3),h=g.children().first();g.children().first().remove(),h.insertBefore(g),$("<br/>").insertBefore(g);var i=$("<div style='display:inline-block; width:100%'></div>");i.insertBefore(g),i.append(f),i.append(e),g.css({"margin-top":"15px"}),h.removeClass("testDivwhite"),h.addClass("testDivblue").css({width:"680px"}),h.children("p").remove();var j=null;$("#minimalSkill option").each(function(){var a=$("<div class='skillSelector'>"+$(this).val()+"</div>");a.insertBefore("#minimalSkill"),a.bind("click",function(){j&&j.removeClass("skillSelectorSelected"),j=$(this),j.addClass("skillSelectorSelected"),$("#minimalSkill").val(j.text());var a=URLJobMarket+"?countryId="+d+"&minimalSkill="+$(this).text();$(".companyLinkOffers").attr("href",a)})}),$("#minimalSkill").hide();var k=$("#minimalSkill").parent();k.attr("colspan","4"),h.find("table").css({width:"100%"});var l=$("<tr></tr>");l.append(k.next().css({width:"33%"}));var m=$("<td style='width:18%;'></td>"),n=$("<a class='companyLinkOffers' href='' target='_blank'>View skill offers</a>");l.append(m.append(n)),l.append(k.next().css({width:"17%"})),l.append(k.next().css({width:"26%"})),k.parent().parent().append(l),$(".skillSelector").first().click(),$("#price").addClass("priceInputCompany"),$("#price").bind("focus",function(){$(this).select()}),$("#quantity").addClass("quantityMyOffers"),$("#quantity").bind("focus",function(){$(this).select()})}else var e=a.eq(4),f=a.eq(3);e.addClass("workerListDiv"),f.addClass("offerListDiv"),b.children("p").remove(),b.find(".productLabelRight").css({height:"auto",width:"40px"}),e.find(".tableRow").each(function(){var a=$(this).find("td"),b=parseInt(a.eq(1).text()),c=$("<a href='"+URLJobMarket+"?countryId="+d+"&minimalSkill="+b+"'>View</a>");a.eq(1).append("<br/>"),a.eq(1).append(c),a.eq(2).addClass("workerSkill"+b)}),$("input[name=newSalary]").addClass("priceInputCompany"),$("input[name=newSalary]").bind("focus",function(){$(this).select()}),$("input[name=salary]").addClass("priceInputCompany"),$("input[name=salary]").bind("focus",function(){$(this).select()})}function companyWorkResults(){var a=$("#container").find(".testDivwhite "),b=a.find("table");b.find(".productLabelRight").css({height:"auto",width:"40px"}),resizeProductImage(b.find(".product"));var c=$(".column-margin-vertical.column.small-8 > div.testDivblue:first > h1");c.html("<a href='company.html?id="+getUrlVars().id+"'>"+c.html()+"</a>"),c.find("a").attr("style","font-family:'Open Sans',Arial; font-size: 26px!important;");var d=$("<div class='testDivblue' style='width:500px;'></div>"),e=$("<input class='companyGetSalary' type='button' value='Calculate'/>");d.append(e),d.insertAfter(a.prev());var f=$("#container").find(".testDivwhite"),g=getUrlVars().id;e.bind("click",function(){$("td.playerSalary").remove();var a=0;f.find("tr").each(function(){var b=$("<td class='playerSalary'></td>");0==a&&b.append("Salary"),$(this).append(b),a++}),f.css({width:"785px"}),f.find("table").css({width:"100%"}),$.ajax({url:URLCompany+g,success:function(a){var b=$(a).find(".testDivblue");if(6==b.length)var c=b.eq(5).find(".tableRow");else var c=b.eq(4).find(".tableRow");checkPlayersSalary(c,f)}})})}function checkPlayersSalary(a,b){for(a.each(function(){var a=$(this).find("a[href^='profile.html']"),c=$(this).find(".salary");c.removeClass("salary"),3==c.children().length&&c.children().last().remove(),b.find("tr").each(function(){if(1==$(this).find("a[href='"+a.attr("href")+"']").length){$(this).find(".playerSalary").append(c),$("<br/>").insertBefore(c.children("b"));var b=c.contents().eq(5).text(),d=parseFloat(c.children("b").text());$(this).find("td").each(function(){if(2==$(this).children().length){$(this).children().eq(1).css({color:"#009900"});var a=$(this).children("div").eq(1).text();if(a=a.replace(/[\(\)]/g,""),a=parseFloat(a),!isNaN(a)){var c=$("<div class='finalPrice'>"+parseInt(d/a*1e3)/1e3+"</div>");c.append("<br/>"),c.append("<span> "+b+"</span>"),$(this).append(c)}}})}})}),trNumber=b.find("tr").length,0==$("#sum_1").length?($("#productivityTable > tbody:last").append('<tr><td colspan="2"><b>Sum:</b></td><td id="sum_1"></td><td id="sum_2"></td><td id="sum_3"></td><td id="sum_4"></td><td id="sum_5"></td><td id="sum_6"></td><td id="sum_7"></td><td id="sum_8"></td><td id="sum_9"></td><td id="sum_10"></td><td id="sum_11"></td></tr>'),$("#productivityTable > tbody:last").append('<tr><td colspan="2"><b>Avarage:</b></td><td id="avg_1"></td><td id="avg_2"></td><td id="avg_3"></td><td id="avg_4"></td><td id="avg_5"></td><td id="avg_6"></td><td id="avg_7"></td><td id="avg_8"></td><td id="avg_9"></td><td id="avg_10"></td><td id="avg_11"></td></tr>')):($("#productivityTable > tbody tr:last td:last").remove(),$("#productivityTable > tbody tr:eq(-2) td:last").remove()),i=3;i<13;i++){if(col=$("#productivityTable tr>td:nth-child("+i+")").text(),col=col.replace(/\t/g,""),Productivity=col.match(/\d{0,10}\.\d{0,2}[\n\r]/g),Product=col.match(/\(\d{0,10}\.\d{0,2}\)/g),price_one=col.match(/\d{1,5}\.\d{0,3}\s{2}\w+/g),null!=Productivity){Productivity=Productivity.join().match(/\d{0,10}\.\d{0,2}/g),Sum_productivity=0;for(var c=0;c<Productivity.length;c++)Sum_productivity+=Number(Productivity[c]);average_productivity=Sum_productivity/Productivity.length}else Sum_productivity=0,average_productivity=0;if(null!=Product){Product=Product.join().match(/\d{0,10}\.\d{0,2}/g),Sum_product=0;for(var c=0;c<Product.length;c++)Sum_product+=Number(Product[c]);average_product=Sum_product/Product.length}else Sum_product=0,average_product=0;if(null!=price_one){price_one=price_one.join().match(/\d{1,5}\.\d{0,3}/g),Sum_price_one=0;for(var c=0;c<price_one.length;c++)Sum_price_one+=Number(price_one[c]);average_price_one=Sum_price_one/price_one.length}else Sum_price_one=0,average_price_one=0;$("#sum_"+(i-2)).html("<div>"+Sum_productivity.toFixed(2)+"</div><div style='color: rgb(0, 153, 0);font-weight:normal;'>"+Sum_product.toFixed(2)+"</div>"),$("#avg_"+(i-2)).html("<div>"+average_productivity.toFixed(2)+"</div><div style='color: rgb(0, 153, 0);'>"+average_product.toFixed(2)+"</div><div class='finalPrice'>"+average_price_one.toFixed(4)+"</div>")}col_sal=$("#productivityTable tr>td:nth-child(13)").text(),sal=col_sal.match(/\d{1,3}\.\d{0,2}/g),Sum_sal=0;for(var c=0;c<sal.length;c++)Sum_sal+=Number(sal[c]);average_sal=Sum_sal/sal.length,$("#avg_11").html("<div style='color: rgb(0, 153, 0);'>"+average_sal.toFixed(2)+"</div>"),$("#sum_11").html("<div style='color: rgb(0, 153, 0);'>"+Sum_sal.toFixed(2)+"</div>")}function companyAllWorkersPage(){$('<div style="width:520px;min-height:30px;line-height:20px;" class="testDivblue"><h1><span></span>Back to company</h1><p style="clear: both"></p> </div><br>').insertBefore("#userMenu + script + div > :first");var a=$(".column-margin-vertical.column.small-8 > div.testDivblue:first > h1");a.html("<a href='company.html?id="+getUrlVars().id+"'>"+a.html()+"</a>"),a.find("a").attr("style","font-family:'Open Sans',Arial; font-size: 26px!important;")}function addMenu(){var a=$("<li class='version'><a href='/' target='_blank'> ADMIN</a></li>");$(".foundation-left").append(a),$(".foundation-left").append("<li class='divider'></li>")}function twoClickNotify(a){$.blockUI({message:a,fadeIn:700,fadeOut:700,timeout:2e3,showOverlay:!1,centerY:!1,css:{width:"350px",top:"50px",left:"",right:"10px",border:"none",padding:"5px",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px",opacity:.9,color:"#fff"}})}function twoClick(){var a=$.jStorage.get("SGTwoClick",!1),b=$.jStorage.get("SGTwoClickLogin",""),c=$.jStorage.get("SGTwoClickPassword",""),d=6e5;msgNotify=NotifyTwoClickTemp;var e="",f=!1,g=!1;a&&""!=b&&""!=c&&$.ajax({url:"mobile/login",type:"POST",data:'{"username":"'+b+'","password":"'+c+'","rememberMe":false}',contentType:"application/json; charset=utf-8",dataType:"json",success:function(a){e=a.token,console,$.ajax({url:"mobile/train",type:"GET",contentType:"application/json; charset=utf-8",headers:{token:e},dataType:"json",success:function(a){f=a.trainedToday,f||$.ajax({url:"mobile/train",type:"POST",data:"{}",contentType:"application/json; charset=utf-8",headers:{token:e},dataType:"json",success:function(a){f=a.trainedToday,f?(msgNotify=msgNotify.replace("{1}","succesfully_trained"),msgNotify=msgNotify.replace("{2}","Two Click Notification"),msgNotify=msgNotify.replace("{3}","Succesfully trained"),twoClickNotify(msgNotify)):(msgNotify=msgNotify.replace("{1}","unsuccesfully_trained"),msgNotify=msgNotify.replace("{2}","Two Click Notification"),msgNotify=msgNotify.replace("{3}","Unsuccesfully trained"),twoClickNotify(msgNotify))}})}}),$.ajax({url:"mobile/work",type:"GET",contentType:"application/json; charset=utf-8",headers:{token:e},dataType:"json",success:function(a){g=a.workedToday,g||$.ajax({url:"mobile/work",type:"POST",data:"{}",contentType:"application/json; charset=utf-8",headers:{token:e},dataType:"json",success:function(a){g=a.workedToday,g?(msgNotify=msgNotify.replace("{1}","succesfully_worked"),msgNotify=msgNotify.replace("{2}","Two Click Notification"),msgNotify=msgNotify.replace("{3}","Succesfully worked"),twoClickNotify(msgNotify)):(msgNotify=msgNotify.replace("{1}","unsuccesfully_worked"),msgNotify=msgNotify.replace("{2}","Two Click Notification"),msgNotify=msgNotify.replace("{3}","Unsuccesfully worked"),twoClickNotify(msgNotify))}})}})}}),f&&g||window.setTimeout(twoClick,d)}!function(a){jQuery.fn.lightTabs=function(b){var c=function(){tabs=this,i=0,showPage=function(b){a(tabs).children("div").children("div").hide(),a(tabs).children("div").children("div").eq(b).show(),a(tabs).children("ul").children("li").removeClass("active"),a(tabs).children("ul").children("li").eq(b).addClass("active")},showPage(0),a(tabs).children("ul").children("li").each(function(b,c){a(c).attr("data-page",i),i++}),a(tabs).children("ul").children("li").click(function(){showPage(parseInt(a(this).attr("data-page")))})};return this.each(c)}}(jQuery);var lang="en",localUrl=new String(window.location),lastModalWindow=$("#fightResponse > div").clone(),NotifyMotivateTemp='<div class="growlUI {1}" style="cursor: default;"><h1>{2}</h1><h2>{3}</h2></div>',NotifyTwoClickTemp='<div class="growlUI {1}" style="cursor: default;"><h1>{2}</h1><h2>{3}</h2></div>',cachedSettings=null,currentServer=null,selectedFood=null,selectedGift=null,selectedWeapon=null,selectedCurrency=null,idPlayer=null,extendedMU=!1,savedWorkedList=[];$(document).ready(function(){inGameCheck()&&(Main(),$.jStorage.get("SGAutoMotivateType",0)>0&&AutoMotivate(),$.jStorage.get("SGTwoClick",!1)&&twoClick(),$.jStorage.get("SGImgSrcFixMode",!1)&&ImgSrcFix(),$.jStorage.get("SGScriptAndStyleSrcFixMode",!1)&&ScriptAndStyleSrcFix(),localUrl.indexOf(URLMUDonations,0)>=0?($.jStorage.get("SGMUDonationsLogMode",!1)&&MUDonationsLog(),$.jStorage.get("SGMUTextStorageMode",!0)&&TextStorage()):localUrl.indexOf(URLTransactionLog,0)>=0?$.jStorage.get("SGTransactionLogMode",!1)&&TransactionLog():localUrl.indexOf(URLCitizen,0)>=0?$.jStorage.get("SGCitizenBroadcastMSG",!0)&&citizenBroadcastMSG():localUrl.indexOf(URLEquipment,0)>=0?$.jStorage.get("SGEquipmentFastMode",!0)&&EquipmentFastMode():localUrl.indexOf(URLMarket,0)>=0?$.jStorage.get("SGNewTableProductMarket",!0)?NewTableProductMarket():($.jStorage.get("SGChangeProductMarketTable",!0)&&changeProductMarketTable(),$.jStorage.get("SGDisplayGoldValue",!0)&&displayGoldValue()):localUrl.indexOf(URLMarketOffers,0)>=0?($.jStorage.get("SGChangeMarketOffers",!0)&&changeMarketOffers(),$.jStorage.get("SGEditOffers",!0)&&editOffers()):localUrl.indexOf(URLMonetaryMarket,0)>=0?($.jStorage.get("SGChangeMonetaryMarketTable",!0)&&changeMonetaryMarketTable(),$.jStorage.get("SGMonetaryMarketPriceEdit",!0)&&monetaryMarketPriceEdit(),$.jStorage.get("SGMonetaryMarketPriceRatio",!0)&&monetaryMarketPriceRatio()):localUrl.indexOf(URLBattle,0)>=0?(0==$("#totalattackers").length&&CreateSpectatorsBlock(),$.jStorage.get("SGBattleStatsMinimizeMode",!0)&&BattleStatsMinimize(),0!=$.jStorage.get("SGModalWindowFuncMode",1)&&ModalWindowFunc($.jStorage.get("SGModalWindowFuncMode",1)),$.jStorage.get("SGSpectatorMode",!0)&&FakeSpectatorFunc(),$.jStorage.get("SGDemoralizatorMode",!1)&&DemoralizatorFunc()):localUrl.indexOf(URLNewCitizen,0)>=0?$.jStorage.get("SGMotivationMode",!0)&&EasyMotivation():localUrl.indexOf(URLMyMU,0)>=0?$.jStorage.get("SGMUBroadcastMsg",!0)&&MUBrodcastMsg():localUrl.indexOf(URLMUMain,0)>=0?$.jStorage.get("SGMUBroadcastMsg",!0)&&MUBrodcastMsg():localUrl.indexOf(URLMUStorage,0)>=0?$.jStorage.get("SGMUTextStorageMode",!0)&&TextStorage():localUrl.indexOf(URLCompany,0)>=0?($.jStorage.get("SGCompanyRedesignMode",!0)&&companyImprovements(),addCompanyButtons()):localUrl.indexOf(URLCompanyDetails,0)>=0?$.jStorage.get("SGCompanyWorkResultsMode",!0)&&companyWorkResults():localUrl.indexOf(URLCompanyAllWorkers,0)>=0&&$.jStorage.get("SGCompanyAllWorkersMode",!0)&&companyAllWorkersPage())});