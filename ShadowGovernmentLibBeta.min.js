!function(e){jQuery.fn.lightTabs=function(){var t=function(){tabs=this,i=0,showPage=function(t){e(tabs).children("div").children("div").hide(),e(tabs).children("div").children("div").eq(t).show(),e(tabs).children("ul").children("li").removeClass("active"),e(tabs).children("ul").children("li").eq(t).addClass("active")},showPage(0),e(tabs).children("ul").children("li").each(function(t,a){e(a).attr("data-page",i),i++}),e(tabs).children("ul").children("li").click(function(){showPage(parseInt(e(this).attr("data-page")))})};return this.each(t)}}(jQuery),$(document).ready(function(){function e(){return 1==$("section.top-bar-section > ul.foundation-right").length?!0:!1}function t(e,t,a){var n=$("<div></div>"),r=$.jStorage.get(t,a)?"checked='checked'":"";return n.append("<input class='configCheckbox' type='checkbox' "+r+" />"),n.children("input").bind("change",function(){$.jStorage.set(t,"checked"==$(this).attr("checked"))}),n.append("<span class='configLabelCheckbox'>"+e+"</span>"),n.children("span").bind("click",function(){n.children("input").click(),n.children("input").change()}),n}function a(e,t,a){var n=$("<div></div>");return n.append("<span class='configLabelInputText'>"+e+"</span>"),n.append("<input class='configInputText' type='text' value='"+$.jStorage.get(t,a)+"' />"),n.children("input").bind("keyup change",function(){$(this).attr("value",$(this).attr("value").replace(/[^\d,]/g,"")),""!=$(this).attr("value")&&$.jStorage.set(t,$(this).attr("value"))}),n}function r(e){switch(e){case at:return 85;case nt:return 146;case rt:return 65;case it:return 119;case st:return 77;case ct:return 159;case ot:return 123;case lt:return 128;case dt:return 18;case ut:return 111;case pt:return 160;case ft:return 161;case ht:return 163;case mt:return 14;case gt:return 20;case $t:return 145;case vt:return 30;case yt:return 72;case St:return 94;case bt:return 143;case Mt:return 127;case Tt:return 140;case kt:return 112;case Ct:return 45;case xt:return 135;case Bt:return 120;case It:return 117;case wt:return 24;case Gt:return 16;case Ft:return 78;case Ot:return 69;case Dt:return 82;case Et:return 157;case Lt:return 154;case At:return 87;case Pt:return 34;case qt:return 27;case Rt:return 22;case Nt:return 40;case zt:return 101;case jt:return 32;case Ht:return 37;case Ut:return 76;case Kt:return 88;case Qt:return 133;case Wt:return 151;case Zt:return 44;case Vt:return 137;case _t:return 3;case Yt:return 61;case Jt:return 90;case Xt:return 149;case ea:return 96;case ta:return 92;case aa:return 106;case na:return 104;case ra:return 67;case ia:return 63;case sa:return 71;case ca:return 100;case oa:return 144;case la:return 777;case da:return 17;case ua:return 60;case pa:return 105;case fa:return 1;case ha:return 10;case ma:return 74;case ga:return 115;case $a:return 155;case va:return 80;case ya:return 12;case Sa:return 26;case ba:return 124;case Ma:return 129;case Ta:return 6;case ka:return 110;case Ca:return 70;case xa:return 39;case Ba:return 5;case Ia:return 107;case wa:return 148;case Ga:return 56;case Fa:return 99;case Oa:return 132;case Da:return 147;case Ea:return 51;case La:return 86;case Aa:return 95;case Pa:return 103;case qa:return 15;case Ra:return 33;case Na:return 35;case za:return 89;case ja:return 136;case Ha:return 53;case Ua:return 162;case Ka:return 66;case Qa:return 156;case Wa:return 42;case Za:return 113;case Va:return 165;case _a:return 131;case Ya:return 91;case Ja:return 31;case Xa:return 48;case en:return 73;case tn:return 152;case an:return 23;case nn:return 64;case rn:return 21;case sn:return 102;case cn:return 46;case on:return 116;case ln:return 122;case dn:return 8;case un:return 118;case pn:return 58;case fn:return 150;case hn:return 52;case mn:return 55;case gn:return 139;case $n:return 166;case vn:return 75;case yn:return 97;case Sn:return 7;case bn:return 125;case Mn:return 68;case Tn:return 153;case kn:return 109;case Cn:return 130;case xn:return 57;case Bn:return 98;case In:return 121;case wn:return 2;case Gn:return 62;case Fn:return 36;case On:return 41;case Dn:return 158;case En:return 28;case Ln:return 38;case An:return 114;case Pn:return 49;case qn:return 4;case Rn:return 11;case Nn:return 19;case zn:return 13;case jn:return 134;case Hn:return 164;case Un:return 9;case Kn:return 79;case Qn:return 93;case Wn:return 54;case Zn:return 108;case Vn:return 138;case _n:return 59;case Yn:return 142;case Jn:return 43;case Xn:return 84;case er:return 50;case tr:return 126;case ar:return 25;case nr:return 81;case rr:return 83;case ir:return 141;case sr:return 47;case cr:return 29;default:return 0}}function i(e){switch(String(e)){case"BJ":return 85;case"PGK":return 146;case"AOA":return 65;case"KHR":return 119;case"SDG":return 77;case"TLD":return 159;case"PYG":return 123;case"KZT":return 128;case"PTE":return 18;case"SYP":return 111;case"BSD":return 160;case"SBD":return 161;case"KPW":return 163;case"GRD":return 14;case"LVL":return 20;case"MNT":return 145;case"IRR":return 30;case"MAD":return 72;case"ML":return 94;case"PAB":return 143;case"GTQ":return 127;case"GYT":return 140;case"IQD":return 112;case"CLP":return 45;case"LAK":return 135;case"NPR":return 120;case"GMD":return 117;case"ARS":return 24;case"UAH":return 16;case"TZS":return 78;case"GHS":return 69;case"ZMW":return 82;case"BZD":return 157;case"BHD":return 154;case"CG":return 87;case"INR":return 34;case"CAD":return 27;case"TRY":return 22;case"BEF":return 40;case"NAD":return 101;case"TWD":return 32;case"FIM":return 37;case"ZAR":return 76;case"CF":return 88;case"GEL":return 133;case"JMD":return 151;case"PEN":return 44;case"TMT":return 137;case"DEM":return 3;case"YER":return 61;case"ERN":return 90;case"PRD":return 149;case"GNF":return 96;case"TD":return 92;case"SOS":return 106;case"MGA":return 104;case"CI":return 67;case"THB":return 63;case"LYD":return 71;case"GQ":return 100;case"CRC":return 144;case"undefined":return 777;case"SEK":return 17;case"VND":return 60;case"MWK":return 105;case"PLN":return 1;case"BGN":return 10;case"NGN":return 74;case"JOD":return 115;case"KWD":return 155;case"TND":return 80;case"HRK":return 12;case"USD":return 26;case"UYU":return 124;case"LKR":return 129;case"GBP":return 6;case"AED":return 110;case"KES":return 70;case"CHF":return 39;case"ESP":return 5;case"DJF":return 107;case"LBP":return 148;case"VEF":return 56;case"LRD":return 99;case"AZN":return 132;case"CUC":return 147;case"CZK":return 51;case"BF":return 86;case"MRO":return 95;case"SZL":return 103;case"MKD":return 15;case"NIS":return 33;case"AUD":return 35;case"CDF":return 89;case"TJS":return 136;case"EEK":return 53;case"MMK":return 162;case"CM":return 66;case"CY":return 156;case"MYR":return 42;case"OMR":return 113;case"ISK":return 165;case"AMD":return 131;case"GA":return 91;case"KRW":return 31;case"ATS":return 48;case"MZN":return 73;case"SVD":return 152;case"BRL":return 23;case"DZD":return 64;case"SIT":return 21;case"LSL":return 102;case"COP":return 46;case"EH":return 116;case"ECD":return 122;case"HUF":return 8;case"SSP":return 118;case"JPY":return 58;case"MDL":return 150;case"BYR":return 52;case"ALL":return 55;case"NZD":return 139;case"VUT":return 166;case"SN":return 75;case"GW":return 97;case"ITL":return 7;case"HNL":return 125;case"ETB":return 68;case"HTG":return 153;case"BIF":return 109;case"AFN":return 130;case"EGP":return 57;case"SLL":return 98;case"BOB":return 121;case"RUB":return 2;case"SAR":return 62;case"NLG":return 36;case"PKR":return 41;case"XKD":return 158;case"CNY":return 28;case"IEP":return 38;case"QAR":return 114;case"SKK":return 49;case"FRF":return 4;case"RSD":return 11;case"LTL":return 19;case"BAM":return 13;case"KGS":return 134;case"BTN":return 164;case"RON":return 9;case"TG":return 79;case"NE":return 93;case"PHP":return 54;case"RWF":return 108;case"UZS":return 138;case"BDT":return 59;case"NIO":return 142;case"NOK":return 43;case"BWP":return 84;case"DKK":return 50;case"DOP":return 126;case"MXN":return 25;case"UGX":return 81;case"ZWL":return 83;case"SRD":return 141;case"MEP":return 47;case"IDR":return 29;default:return 0}}function s(){$(".dataTable").find("input[type='text']").addClass("inputTextTable");var e=$(".dataTable").find("input[type='submit']").addClass("inputSubmitTable");$(".dataTable").find("input[type='text']").bind("keyup",function(){var e=$(this).parent().parent(),t=parseFloat(e.prev().prev().children(".linkMonetaryMarket").next().text()),a=parseFloat($(this).val());e.prev().children(".inputPrice").text(Math.round(t*a*100)/100)});var t=$("<input class='buyAllSubmit' type='submit' value='All' />");t.bind("click",function(){var e=$(this).parent().parent().prev().prev().prev().text();return $(this).parent().children("input[type='text']").val(e),!1}),t.insertBefore(e),$(".dataTable").find("select").each(function(){var e=$(this).parent(),t=$("<div class='toRemove buyAsTable'>Buy as Citizen</div>");"true"==getValue("configProductMarketSelection")?(t.insertBefore(e.children().first()),e.parent().css({"background-color":"#ecffec"}),e.contents().eq(0).remove(),e.children("br").remove(),$(this).hide()):$(this).addClass("customSelectList")});var a=$("<div class='helpFlagMessage'>Click on country flag to open the monetary market (only price column)</div>");a.insertBefore(".dataTable"),$(".dataTable").addClass("dataTableMod"),$(".dataTable > tbody > tr:first-child > td").addClass("dataTableHeaders");var n=$(".dataTable").find("tr").eq(0).children();n.eq(0).css({width:"70px"}),n.eq(3).text("Price/unit"),$("<td class='dataTableHeaders'>Price</td>").insertAfter(n.eq(3)),$(".dataTable").find("a").each(function(){var e=$(this).parent();e.children(".currencyFlag").next().remove(),e.children(".currencyFlag").addClass("dataTableNameFlag");var t=$("<div class='blockSeller'></div>"),a=e.children("img").eq(1);a.addClass("dataTableSeller"),t.append(a);var n=$("<div class='playerName'></div>").append(e.children(":lt(2)"));if(t.append(n),e.children().length>0){n.css({"margin-top":"3px"}),e.children().eq(0).remove();var i=$("<div class='stockName'></div>").append(e.children().eq(0));t.append(i)}e.append(t);var s=e.next().next(),c=s.children("div");c.addClass("monetaryMarketFlag");var o=F+"?buyerCurrencyId="+r(c.attr("class").split(" ")[1])+"&sellerCurrencyId=0",l=$("<a class='linkMonetaryMarket' href='"+o+"' target='_blank'></a>");l.insertBefore(c),l.append(c);var d=parseFloat(s.children("b").text()),u=parseInt(parseInt(e.next().text())*d*100)/100,p=s.contents().last().text(),f=$("<td class='totalPriceProductMarket'><b>"+u+"</b> "+p+"</td>");f.insertAfter(s),f.append("<br/ > Total: <div style='display:inline;width:10px' class='inputPrice'>0</div>"+p)})}function c(e,t){P=P.replace("{1}",e),$.get(P,function(e){try{var a=$(e),n=$(".dataTable",a);n.length>0&&(n=$(n[0]));var r=n[0].rows[1].cells[2].textContent.trim();r=r.substr(r.indexOf("=")+1,r.indexOf("Gold")-r.indexOf("=")-1),_currencyValue=parseFloat(r),t&&t()}catch(i){console.log(i),_currencyValue=0}})}function o(){var e=$(".dataTable"),t="",a=$("#productMarketViewForm #countryId");a=a.length>0?a[0].value:_currencyId,c(a,o.bind(this,a));try{e.length>0&&(GET_URL=A.replace("{1}",a),$.get(GET_URL,function(a){try{for(var n=[],r=$(".dataTable",$(a))[1],i=1;i<r.rows.length;i++){var s=r.rows[i];n[i-1]={name:r.rows[i].cells[0].innerHTML.toUpperCase().trim(),value:parseFloat(s.cells[2].innerHTML.toUpperCase().replace("&NBSP;","").replace("&NBSP;","").trim())+parseFloat(s.cells[1].innerHTML.toUpperCase().replace("&NBSP;","").replace("&NBSP;","").trim())}}for(var c=1;c<e[0].rows.length;c++){var o=e[0].rows[c],l=parseFloat(o.cells[2].textContent.trim());if(t=o.cells[3].textContent.trim(),t.indexOf("GOLD")>=0)break;var d=parseFloat(t.substr(0,t.indexOf(" ")).trim()),u=Math.round(d*_currencyValue*1e5)/1e5,p=(Math.round(l*d*1e3)/1e3,Math.round(l*d*_currencyValue*1e5)/1e5);o.cells[3].innerHTML=o.cells[3].innerHTML+" <br> <img src='http://e-sim.home.pl/testura/img/gold.png'><b>"+u+"</b> GOLD",o.cells[4].innerHTML=" <b>"+p+"</b> Gold <br/>"+o.cells[4].innerHTML;for(var f=0;f<n.length;f++)if(o.cells[0].innerHTML.toUpperCase().indexOf(n[f].name)>=0){console.log("tx:"+parseFloat(n[f].value)/100),o.cells[3].innerHTML=o.cells[3].innerHTML+"<br> <hr class='foundation-divider'>  Price without tax: <b>"+Math.round(parseFloat(d)/(1+parseFloat(n[f].value)/100)*1e5)/1e5+"</b>",o.cells[3].innerHTML=o.cells[3].innerHTML+" <br> Price(G) without tax: <b>"+Math.round(u/(1+parseFloat(n[f].value)/100)*1e5)/1e5+"</b>";break}$("#buyAllYouCan",$(o)).hover(function(){$(this).css("color","#FF3344")},function(){$(this).css("color","#3787EA")}),$("#buyAllYouCan",$(o)).bind("click",function(){try{for(var e=$(this).closest("tr")[0],t=parseFloat(e.cells[2].textContent.trim()),a=e.cells[3].textContent.trim(),n=parseFloat(a.substr(0,a.indexOf(" ")).trim()),r=$($("#userMenu .plate")[1]),i=-1,s=a.substr(a.indexOf(" "),a.indexOf("Price")-a.indexOf(" ")).trim(),c=!1,o=1;o<r[0].childNodes.length;o++){var l=r[0].childNodes[o];if("B"==l.nodeName&&(i=l.innerHTML),"#text"==l.nodeName&&l.nodeValue.trim()==s){c=!0;break}}c||(i=-1),i=parseFloat(i);var d=0;i>0&&(d=parseInt(i/n),d>t&&(d=t)),$("input[name=quantity]",e.cells[4]).get(0).value=d}catch(l){console.log(l)}})}}catch(h){console.log(h)}}))}catch(n){console.log(n)}}function l(){$('<a id="SGSettingsButton" class="button foundation-style" title="Shadow Government Settings" href="editCitizen.html?Settings"><i class="icon-star"></i>SG Settings</a><br>').insertBefore($(".foundation-right.hidden-overflow > div:first > a:last")),$('<a id="SGMainButton" class="button foundation-style" title="Shadow Government Main" href="editCitizen.html?ShadowGovernment"><i class="icon-star"></i>SG Main</a><br>').insertBefore($(".foundation-right.hidden-overflow > div:first > a:last")),$("#SGSettingsButton").click(function(){return $.blockUI({message:$("#WrapperMainConfig"),css:{top:"48px",left:($(window).width()-600)/2+"px",width:"600px",border:"0px",position:"absolute",textAlign:"left",cursor:"default"},onOverlayClick:$.unblockUI}),!1}),$('<div id="WrapperMainConfig" style="display:none;"><center><h1>Shadow Government Settings</h1></center><p style="clear: both"></p><br><ul id="MainConfigMenu"></ul><div id="MainConfigBody"></div></div>').appendTo($("body")),$('<button id="CloseWrapperMainConfig" style="position: absolute; top: 0.25em; right: 0.25em; padding: 0.3em !important; " href="#" class="foundation-style closeDropdown profileButton">×</button>').appendTo($("#WrapperMainConfig > center > h1")),$("#CloseWrapperMainConfig").click(function(){$.unblockUI()}),$("<li>Spectator</li>").appendTo($("#MainConfigMenu"));var e=$("<div></div>").appendTo($("#MainConfigBody")),n=t("Custom Spectator","SGSpectatorMode",!0);e.append(n);var r=a("Timer Spectator: ","SGTimerSpectator",7e3);e.append(r);var i=a("Fake User ID: ","SGFakeUserID",1);e.append(i);var s=a("Fake Citizenship ID: ","SGFakeCitizenshipID",1);e.append(s),$("<li>Motivator</li>").appendTo($("#MainConfigMenu"));var c=$("<div></div>").appendTo($("#MainConfigBody")),o=t("Easy Motivator","SGMotivationMode",!0);c.append(o),$("<li>Demoralizator</li>").appendTo($("#MainConfigMenu"));var l=$("<div></div>").appendTo($("#MainConfigBody")),d=t("Demoralizator","SGDemoralizatorMode",!1);l.append(d);var u=a("Dem. Timer Spectator: ","SGDemoralizatorTimerSpectator",1e4);l.append(u);var p=a("Dem. Fake User Count: ","SGDemoralizatorFakeUserCount",10);l.append(p);var f=a("Dem. Fake Citizenship ID: ","SGDemoralizatorFakeCitizenshipID",2);l.append(f),$("<li>Equipment</li>").appendTo($("#MainConfigMenu"));var h=$("<div></div>").appendTo($("#MainConfigBody")),m=t("Equipment Fast Link","SGEquipmentFastMode",!0);h.append(m),$("<li>Logs</li>").appendTo($("#MainConfigMenu"));var g=$("<div></div>").appendTo($("#MainConfigBody")),v=t("MU Donations Log","SGMUDonationsLogMode",!1);g.append(v);var y=t("Player Transaction Log","SGTransactionLogMode",!1);g.append(y),$("<li>Market</li>").appendTo($("#MainConfigMenu"));var S=$("<div></div>").appendTo($("#MainConfigBody")),b=t("Change Product Market Table","SGChangeProductMarketTable",!0);S.append(b);var M=t("Display Gold Value","SGDisplayGoldValue",!0);S.append(M),$("<li>Market Offers</li>").appendTo($("#MainConfigMenu"));var T=$("<div></div>").appendTo($("#MainConfigBody")),k=t("Change Market Offers","SGChangeMarketOffers",!0);T.append(k);var C=t("Edit Offers","SGEditOffers",!0);T.append(C),$("<li>Monetary Market</li>").appendTo($("#MainConfigMenu"));var x=$("<div></div>").appendTo($("#MainConfigBody")),B=t("Change Monetary Market Table","SGChangeMonetaryMarketTable",!0);x.append(B);var I=t("Monetary Market Price Edit","SGMonetaryMarketPriceEdit",!0);x.append(I);var w=t("Monetary Market Price Ratio","SGMonetaryMarketPriceRatio",!0);x.append(w),$("<li>Battle Page</li>").appendTo($("#MainConfigMenu"));var G=$("<div></div>").appendTo($("#MainConfigBody")),F=t("Battle Stats Minimize Mode","SGBattleStatsMinimizeMode",!0);G.append(F);var O=t("Modal Window Func Mode","SGModalWindowFuncMode",!0);G.append(O),$("#WrapperMainConfig").lightTabs()}function d(){function e(){t>=a&&$.ajax({url:"/militaryUnitDonations.html?page="+a}).done(function(t,n,r){$(r.responseText).find("#userMenu + div table.dataTable.paddedTable tr:not(:first)").insertAfter("#userMenu + script + div table.dataTable.paddedTable tr:last"),a++,e()})}var t=$("#pagination-digg > li:last").prev().children("a").html(),a=1;$('<li class="FullLog">Full Log</li>').appendTo("#pagination-digg").click(function(){$("#userMenu + script + div table.dataTable.paddedTable tr:not(:first)").remove(),e()})}function u(){function e(){a<=t[2]&&$.ajax({url:"/"+t[1]+a}).done(function(t,n,r){$(r.responseText).find("#userMenu + div table.dataTable.paddedTable tr:not(:first)").insertAfter("#userMenu + script + div table.dataTable.paddedTable tr:last"),a++,e()})}var t=/([\s\S]+)(\d)$/.exec($("#pagination-digg > li:last").prev().children("a").attr("href")),a=1;$('<li class="FullLog">Full Log</li>').appendTo("#pagination-digg").click(function(){$("#userMenu + script + div table.dataTable.paddedTable tr:not(:first)").remove(),e()})}function p(){$('#equipmentTable > table.dataTable tr > td[id ^="cell"]').each(function(e,t){var a=$(t).attr("id").replace(/[^\d,]/g,"");$('<a href="showEquipment.html?id='+a+'"></a>').prependTo($(t)),$(t).children("img").appendTo($(t).children("a"))})}function f(){$("#battleStats").append('<div class="foundation-style small-10 columns"><div class="foundation-style small-5 columns"><b>Total defenders online:</b><i id="totaldefenders" style="display: inline;">0</i> <a style="font-size: 11px;" href="" id="defendersLink">Show details</a> <a style="font-size: 11px; display: none;" href="" id="defendersLinkHide">Hide details</a> <br><div align="center" id="defendersMenu" style="font-size: 11px; text-align: center; padding: 1em; margin: auto; display: block;">No one <br> </div></div><div class="foundation-style small-5 columns"><b>Total attackers online:</b><i id="totalattackers" style="display: inline;">0</i> <a style="font-size: 11px;" href="" id="attackersLink">Show details</a> <a style="font-size: 11px;  display: none;" href="" id="attackersLinkHide">Hide details</a> <br><div align="center" id="attackersMenu" style="font-size: 11px; text-align: center; padding: 1em; margin: auto; display: block;">No one <br> </div></div>'),$("#battleStats").append('<div class="foundation-style small-10 columns"><b>Total spectators online:</b><i id="totalspectators" style="display: inline;">0</i> <a style="font-size: 11px;" href="" id="spectatorsLink">Show details</a> <a style="font-size: 11px; display: none;" href="" id="spectatorsLinkHide">Hide details</a> <br><div align="center" id="spectatorsMenu" style="font-size: 11px; text-align: center; padding: 1em; margin: auto; display: block;">No one <br> </div>  </div>'),$("#spectatorsLink").click(function(){return $("#spectatorsLink").fadeOut("fast",function(){$("#spectatorsLinkHide").fadeIn("fast"),$("#spectatorsMenu").fadeIn("fast")}),!1}),$("#spectatorsLinkHide").click(function(){return $("#spectatorsLinkHide").fadeOut("fast",function(){$("#spectatorsLink").fadeIn("fast"),$("#spectatorsMenu").fadeOut("fast")}),!1}),$("#attackersLink").click(function(){return $("#attackersLink").fadeOut("fast",function(){$("#attackersLinkHide").fadeIn("fast"),$("#attackersMenu").fadeIn("fast")}),!1}),$("#attackersLinkHide").click(function(){return $("#attackersLinkHide").fadeOut("fast",function(){$("#attackersLink").fadeIn("fast"),$("#attackersMenu").fadeOut("fast")}),!1}),$("#defendersLink").click(function(){return $("#defendersLink").fadeOut("fast",function(){$("#defendersLinkHide").fadeIn("fast"),$("#defendersMenu").fadeIn("fast")}),!1}),$("#defendersLinkHide").click(function(){return $("#defendersLinkHide").fadeOut("fast",function(){$("#defendersLink").fadeIn("fast"),$("#defendersMenu").fadeOut("fast")}),!1})}function h(){$("#battleHeaderImage").remove(),$("#mainFight .fightFont").removeClass("fightFont").addClass("fightFontSG"),$("#battleStats").show(),$("#battleSelectable:first + #battleSelectable div.small-10:first").remove(),$('<div id="wrapperBattleStatsButtons" class="foundation-style small-10 columns" style="margin-bottom:.4em;"></div>').insertBefore($("#battleSelectable:first + #battleSelectable div.small-4:first")),$('<div id="showTop3BattleStats" style="padding-bottom:.4em;padding-top:.4em;margin:.4em .4em 0 .4em;" class="foundation-style button"> Show Top 3 </div>').appendTo($("#wrapperBattleStatsButtons")),$('<div id="showTop10BattleStats" style="padding-bottom:.4em;padding-top:.4em;margin:.4em .4em 0 .4em;" class="foundation-style button"> Show Top 10 </div>').appendTo($("#wrapperBattleStatsButtons")),$('<div id="showRecentActionsBattleStats" style="padding-bottom:.4em;padding-top:.4em;margin:.4em .4em 0 .4em;" class="foundation-style button"> Recent Actions </div>').appendTo($("#wrapperBattleStatsButtons")),$('<div id="showSpectatorsBattleStats" style="padding-bottom:.4em;padding-top:.4em;margin:.4em .4em 0 .4em;" class="foundation-style button"> Spectators </div>').appendTo($("#wrapperBattleStatsButtons")),$("#wrapperBattleStatsButtons + div.small-4, #wrapperBattleStatsButtons + div.small-4 + div.small-2, #wrapperBattleStatsButtons + div.small-4 + div.small-2 + div.small-4").addClass("Top3BattleStatsElements"),$("#battleStats > div.small-10:first").addClass("Top10BattleStatsElements"),$(".Top10BattleStatsElements + div.small-10").addClass("RecentActionsBattleStatsElements"),$(".RecentActionsBattleStatsElements + div.small-10, .RecentActionsBattleStatsElements + div.small-10 + div.small-10").addClass("SpectatorsBattleStatsElements"),$(".Top3BattleStatsElements").css("display",$.jStorage.get("SGTop3BattleStatsElements","none")),$("#showTop3BattleStats").click(function(){$(".Top3BattleStatsElements").toggle("fast",function(){$.jStorage.set("SGTop3BattleStatsElements",$(".Top3BattleStatsElements").css("display"))})}),$(".Top10BattleStatsElements").css("display",$.jStorage.get("SGTop10BattleStatsElements","none")),$("#showTop10BattleStats").click(function(){$(".Top10BattleStatsElements").toggle("fast",function(){$.jStorage.set("SGTop10BattleStatsElements",$(".Top10BattleStatsElements").css("display"))})}),$(".RecentActionsBattleStatsElements").css("display",$.jStorage.get("SGRecentActionsBattleStatsElements","none")),$("#showRecentActionsBattleStats").click(function(){$(".RecentActionsBattleStatsElements").toggle("fast",function(){$.jStorage.set("SGRecentActionsBattleStatsElements",$(".RecentActionsBattleStatsElements").css("display"))})}),$(".SpectatorsBattleStatsElements").css("display",$.jStorage.get("SGSpectatorsBattleStatsElements","none")),$("#showSpectatorsBattleStats").click(function(){$(".SpectatorsBattleStatsElements").toggle("fast",function(){$.jStorage.set("SGSpectatorsBattleStatsElements",$(".SpectatorsBattleStatsElements").css("display"))})})}function m(){window.picoModal=function(){return!0},$("#fightStatus").attr("style","").show().removeClass("testDivblue").addClass("fightContainer"),$("#fightResponse").hide().addClass("foundation-style small-10 columns"),$('<div id="wrapperStatusActionButtons" class="foundation-style small-10 columns" style="margin-bottom:.4em;"></div>').insertBefore($("#fightResponse")),$('<div id="SGShowStatusAction" style="padding-bottom:.4em;padding-top:.4em;margin:.4em .4em 0 .4em;" class="foundation-style button"> Show Status Action </div>').appendTo($("#wrapperStatusActionButtons")),$("#fightResponse").css("display",$.jStorage.get("SGShowStatusActionButton","none")),$("#SGShowStatusAction").click(function(){$("#fightResponse").toggle("fast",function(){$.jStorage.set("SGShowStatusActionButton",$("#fightResponse").css("display"))})})}function g(){function e(){if(hasFocus){var e=$.jStorage.get("SGFakeUserID",1),t=$.jStorage.get("SGFakeCitizenshipID",1),a="id="+$("#battleRoundId").val()+"&at="+e+"&ci="+t+"&premium=1";$.ajax({type:"GET",url:"battleScore.html",data:a,dataType:"json",success:function(e){updateStatus(e.attackerScore,e.defenderScore,e.remainingTimeInSeconds,e.percentAttackers),updateBattleHeros(e.topAttackers,e.topDefenders),updateTop10(e.top10Attackers,e.top10Defenders),updateBattleMonitor(e);for(var t=0;t<e.recentAttackers.length;t++)if(e.recentAttackers[t].id==latestAttackerId){e.recentAttackers=e.recentAttackers.slice(0,t);break}for(var t=0;t<e.recentDefenders.length;t++)if(e.recentDefenders[t].id==latestDefenderId){e.recentDefenders=e.recentDefenders.slice(0,t);break}0!=e.recentAttackers.length&&(latestAttackerId=e.recentAttackers[0].id,attackerHits=e.recentAttackers),0!=e.recentDefenders.length&&(latestDefenderId=e.recentDefenders[0].id,defenderHits=e.recentDefenders)}})}}{var t=$.jStorage.get("SGTimerSpectator",7e3);window.setInterval(e,t)}continueThread=!1}function v(){function e(e,t){var a="id="+$("#battleRoundId").val()+"&at="+e+"&ci="+t+"&premium=1";$.ajax({type:"GET",url:"battleScore.html",data:a,dataType:"json"})}function t(){for(n=0;n<a;)setTimeout(e,(n+1)*(i/a),n+1,r),n++}var a=$.jStorage.get("SGDemoralizatorFakeUserIDCount",10),r=$.jStorage.get("SGDemoralizatorFakeCitizenshipID",2),i=$.jStorage.get("SGDemoralizatorTimerSpectator",1e4);window.setInterval(t,i)}function y(){function e(e){var t=/type=(\d)&id=(\d+)/gim.exec($(this)[0].data),a=parseInt(t[1]),r=parseInt(t[2]),i=["none","weapons","breads","gifts"],s="";if(s=/&citizenMessage=(\S+)/gim.exec(e.getResponseHeader("TM-finalURLdhdg")))if("SUCCESFULLY_MOTIVATED"==s[1]){var c=$("#motivate-"+i[a]+"-"+r).parent();c.empty(),c.append('<i title="Мотивация прошла успешно" style="color: #0c0; font-size: 1.25em; text-shadow: 0 0 0" class="icon-uniF479"></i>'),n.count=n.count+1,$.jStorage.set("SGMotivateCountToday",JSON.stringify(n)),$("#countMotivationToday").html(n.count)}else $("#motivate-"+i[a]+"-"+r).attr("title","Ошибка: "+s[1]);else if(/Вы отправили слишком много мотиваций сегодня/gim.exec(e.responseText)){var c=$("#motivate-"+i[a]+"-"+r).parent();c.empty(),c.append('<i title="Вы отправили слишком много мотиваций сегодня" style="color: #c00; font-size: 1.25em; text-shadow: 0 0 0" class="icon-uniF478"></i>'),n.count=5,$.jStorage.set("SGMotivateCountToday",JSON.stringify(n)),$("#countMotivationToday").html(n.count)}else if(/Вы уже отправляли комплект этому гражданину сегодня/gim.exec(e.responseText)){var c=$("#motivate-"+i[a]+"-"+r).parent();c.empty(),c.append('<i title="Вы уже отправляли комплект этому гражданину сегодня" style="color: #c00; font-size: 1.25em; text-shadow: 0 0 0" class="icon-uniF478"></i>')}else if(/Этот гражданин получил слишком много мотиваций сегодня/gim.exec(e.responseText)){var c=$("#motivate-"+i[a]+"-"+r).parent();c.empty(),c.append('<i title="Этот гражданин получил слишком много мотиваций сегодня" style="color: #c00; font-size: 1.25em; text-shadow: 0 0 0" class="icon-uniF478"></i>')}else if(/Этот гражданин получил все виды мотивационных комплектов сегодня/gim.exec(e.responseText)){var c=$("#motivate-"+i[a]+"-"+r).parent();c.empty(),c.append('<i title="Этот гражданин получил все виды мотивационных комплектов сегодня" style="color: #c00; font-size: 1.25em; text-shadow: 0 0 0" class="icon-uniF478"></i>')}else if(/У вас не достаточно предметов/gim.exec(e.responseText)){var c=$("#motivate-"+i[a]+"-"+r).parent();c.empty(),c.append('<i title="У вас не достаточно предметов" style="color: #c00; font-size: 1.25em; text-shadow: 0 0 0" class="icon-uniF478"></i>')}}var t=/\d+/gim.exec($("#userMenu div div.panel.callout b:eq(2)").html());t=parseInt(t[0]);var a={day:t,count:0},n=JSON.parse($.jStorage.get("SGMotivateCountToday",JSON.stringify(a)));n.day!=a.day&&(n=a,$.jStorage.set("SGMotivateCountToday",JSON.stringify(n))),$(".dataTable ul.button.foundation-center.foundation-style-group li a.foundation-style.button.small.help i.icon-cupcake").parent().parent().toggle(),$('<span>Today motivate count: <b id="countMotivationToday">0</b><span>').insertAfter("#newCitizenStatsForm"),$("#countMotivationToday").html(n.count),$("table.dataTable tr").each(function(){if($(this).children("td").children("i.icon-uniF478").length>0){var e=$(this).children("td:first").children(".profileLink").attr("href").replace("profile.html?id=","");1==$(this).children("td:eq(4)").children("i.icon-uniF478").length&&($(this).children("td:eq(4)").empty(),$(this).children("td:eq(4)").append('<i id="motivate-weapons-'+e+'" class="motivate-element motivate-weapons icon-tank" value="'+e+'"></i>')),1==$(this).children("td:eq(5)").children("i.icon-uniF478").length&&($(this).children("td:eq(5)").empty(),$(this).children("td:eq(5)").append('<i id="motivate-breads-'+e+'" class="motivate-element motivate-breads icon-bread" value="'+e+'"></i>')),1==$(this).children("td:eq(6)").children("i.icon-uniF478").length&&($(this).children("td:eq(6)").empty(),$(this).children("td:eq(6)").append('<i id="motivate-gifts-'+e+'" class="motivate-element motivate-gifts icon-gift" value="'+e+'"></i>'))}return!0}),$(".motivate-element").click(function(){var t=0;$(this).hasClass("motivate-weapons")?t=1:$(this).hasClass("motivate-breads")?t=2:$(this).hasClass("motivate-gifts")&&(t=3);var a=($(this).parent(),$(this).attr("value")),n="type="+t+"&id="+a;$.ajax({type:"POST",url:"motivateCitizen.html?id="+a,data:n,dataType:"json",error:e})})}function S(e){var t=[];e.find("option").each(function(){t.push($(this)),$(this).remove()});var a=new Array(46);a[0]=t[0];for(var n=0,r=0,i=1;i<t.length;i++){var s=t[i].attr("value").split("-");if(2==s.length){var c=parseInt(s[0])-1;"WEAPON"==s[1]?a[1+c]=t[i]:"FOOD"==s[1]?a[6+c]=t[i]:"GIFT"==s[1]?a[11+c]=t[i]:"TICKET"==s[1]?a[16+c]=t[i]:(a[27+r]=t[i],r++)}else a[21+n]=t[i],n++}for(var i=0;i<a.length;i++)a[i]&&e.append(a[i]);e.find("option")[0].selected=!0}function b(e,t,a){var n,r=1;e.find("option").each(function(){if(""!=$(this).attr("value")){var i=$(this).text(),s=i.indexOf("(",0);-1!=s&&(i=i.substr(s+1,i.indexOf(")",s)-s-1),mypatttofindnum=/\d{1,45}/g,i=mypatttofindnum.exec(i));var c=$("<div class='storage productMU'>");c.append("<div>"+i+"</div>");var o=$("<div></div>");c.append(o);var l=$("<div class='storageButton' selectIndex='"+r+"'></div>");l.append(c);var d=$(this).attr("value").split("-");1==d.length?("IRON"==d[0]?o.append("<img src='"+N+"' />"):"OIL"==d[0]?o.append("<img src='"+j+"' />"):"GRAIN"==d[0]?o.append("<img src='"+z+"' />"):"DIAMONDS"==d[0]?o.append("<img src='"+H+"' />"):"WOOD"==d[0]?o.append("<img src='"+U+"' />"):"STONE"==d[0]&&o.append("<img src='"+K+"' />"),c.css({height:"67px"}),l.css({margin:"10px 4px 8px 10px"})):(d.length=2)&&("WEAPON"==d[1]?o.append("<img src='"+Q+"' />"):"FOOD"==d[1]?o.append("<img src='"+W+"' />"):"TICKET"==d[1]?o.append("<img src='"+Z+"' />"):"GIFT"==d[1]?o.append("<img src='"+V+"' />"):"HOUSE"==d[1]?o.append("<img src='"+_+"' />"):"DEFENSE_SYSTEM"==d[1]?o.append("<img src='"+Y+"' />"):"HOSPITAL"==d[1]?o.append("<img src='"+J+"' />"):"ESTATE"==d[1]&&o.append("<img src='"+X+"' />"),o.append("<img class='qualityMU' src='"+et+d[0]+tt+"' />"),c.css({height:"77px"}),l.css({margin:"6px 4px 2px 10px"})),l.bind("mouseover",function(){n!=$(this).attr("selectIndex")&&$(this).addClass("storageButtonHover")
}),l.bind("mouseout",function(){n!=$(this).attr("selectIndex")&&$(this).removeClass("storageButtonHover")}),l.bind("click",function(){if(n==$(this).attr("selectIndex"))$(this).removeClass("storageButtonClick"),$(this).removeClass("storageButtonDblClick"),e.find("option").removeAttr("selected"),n=null,a.val("1");else{if(n){var r=t.find(".storageButton[selectIndex='"+n+"']");r.removeClass("storageButtonClick"),r.removeClass("storageButtonDblClick"),a.val("1")}$(this).removeClass("storageButtonHover"),$(this).removeClass("storageButtonDblClick"),$(this).addClass("storageButtonClick"),n=$(this).attr("selectIndex"),e.find("option").removeAttr("selected"),e.find("option")[n].selected=!0}}),l.bind("dblclick",function(){return $(this).removeClass("storageButtonHover"),$(this).removeClass("storageButtonClick"),$(this).addClass("storageButtonDblClick"),n=$(this).attr("selectIndex"),e.find("option").removeAttr("selected"),e.find("option")[n].selected=!0,a.val($(this).text().trim()),!1}),t.append(l),r++}})}function M(){var e=$("#resourceInput"),t=$(".storage").parent(),a=$("#quantity"),n=$("#productMarketOfferForm").parent();n.children().first().remove(),n.children().first().remove(),n.addClass("leftDivMyOffers"),t.children().remove(),t.addClass("myOffersProduct"),t.append("One click to select <b>ONE item</b>.<br/>Double click to select <b>ALL items</b>.<br/>");var r=$("#countryInput").parent().parent();r.find("b").eq(0).css({display:"inline"}),r.find("b").eq(1).css({display:"inline"}),$("#countryInput").addClass("customSelectList"),e.addClass("customSelectList"),firstFastButton=!0,a.addClass("quantityMyOffers"),$("#priceInput").addClass("priceInputMyOffers");var i=$("<input class='fastBtn FastButtonLeft' type='button' value='10' />");i.bind("click",function(){firstFastButton?a.attr("value","10"):a.attr("value",parseInt(a.attr("value"))+10),firstFastButton=!1});var s=$("<input class='fastBtn FastButtonLeft' type='button' value='50' />");s.bind("click",function(){firstFastButton?a.attr("value","50"):a.attr("value",parseInt(a.attr("value"))+50),firstFastButton=!1});var c=$("<input class='fastBtn FastButtonRight' type='button' value='100' />");c.bind("click",function(){firstFastButton?a.attr("value","100"):a.attr("value",parseInt(a.attr("value"))+100),firstFastButton=!1});var o=$("<input class='fastBtn FastButtonRight' type='button' value='1K' />");o.bind("click",function(){firstFastButton?a.attr("value","1000"):a.attr("value",parseInt(a.attr("value"))+1e3),firstFastButton=!1}),i.insertBefore(a),s.insertBefore(a),o.insertAfter(a),c.insertAfter(a),S(e),b(e,t,a,"#aaaaaa"),$(".storage").bind("click",function(){setTimeout(T,500)}),$("#countryInput").unbind("change"),$("#countryInput").bind("change",function(){T()}),$("#resourceInput").unbind("change"),$("#resourceInput").bind("change",function(){T()}),$("#priceInput").unbind("change"),$("#priceInput").bind("change",function(){T()}),$("#priceInput").bind("keydown",function(){setTimeout(T,1e3)})}function T(){if(isFormCorrect()){var e,t=new String(window.location);t.indexOf(O,0)>=0?e=$("a[href='pendingCitizenshipApplications.html']").prev():t.indexOf(D,0)>=0&&(e=$("a[href*='stockCompanyAssets.html?id=']").prev().prev().prev().prev().prev().prev());var a=r(e.attr("class").split(" ")[1]),n="country="+$("#countryInput").val()+"&resource="+$("#resourceInput").val();n+="&price="+$("#priceInput").val()+"&citizenship="+a;var i=$("#resourceInput option:selected").text();$("#preview").html("<div class ='previewMyOffers'>Loading tax resource...</div >"),$.ajax({type:"POST",url:"productTaxes.html",data:n,dataType:"html",success:function(e){var t=$("#preview");t.html(e),t.children(".dataTable").addClass("previewDataTable");var a=$("<div class='resourceMyOffers'>"+i+"</div>"),n=G+"?resource=",r=$("#resourceInput").val().split("-");n+=1==r.length?r[0]+"&countryId="+$("#countryInput").val():r[1]+"&countryId="+$("#countryInput").val()+"&quality="+r[0],a.append("<br /><a class='textMyOffers' href='"+n+"' target='_blank'>Market</a>"),n=F+"?buyerCurrencyId="+$("#countryInput").val()+"&sellerCurrencyId=0",a.append("  |  <a class='MMMyOffers' href='"+n+"' target='_blank'>MM link</a>");var s=t.find(".currencyFlag").first();s.addClass("flagMyOffer"),t.find(".currencyFlag").remove(),a.insertBefore(t.children().first()),s.insertBefore(t.children("b").first()),t.children("b").addClass("titleMyOffers");var c=t.children(".dataTable").find("tr").eq(0);t.children(".dataTable").find("tr").eq(1).children().css({height:"25px"}),c.children().css({height:"22px"}),c.children().eq(0).text("Gross"),c.children().eq(1).text("Net"),c.children().eq(3).text("Tax")}})}}function k(){$(".dataTable tr").each(function(){$(this).parent().children().index($(this)),$(this).parent().parent().children().index($(this).parent());$.isNumeric($(this).children("td:eq(2)").text())&&$(this).children("td:eq(2)").append("<a class='editQuanty'>Edit</a>"),$(this).children("td:eq(3):contains(.)").append("<a class='editPrice'>Edit</a>")}),$(".editQuanty").click(function(){numberpatt=/\d{1,30}/,Quanty=$(this).parent().text().match(numberpatt);var e=$(this).parent().next(),t=e.children("div"),a=r(t.attr("class").split(" ")[1]);qPrice=$(this).parent().next().text().match(/\d{1,30}.\d{2}/),productcell=$(this).parent().prev().prev().html(),quality=productcell.match(/q\d/),quality=quality[0].match(/\d/),termek=productcell.match(/productIcons\/\D.*.png/),type=termek[0].substr(13),type=type.substr(0,type.length-4),type=type.toUpperCase(),deleteId=$(this).parent().next().next().next().next().next().html().match(/\d{1,60}/),$(this).parent().html("<input id='newQuanty' type='text' value='"+Quanty+"' min='1' style='width: 30px' class='digit quantityMyOffers' name='quantity' id='quantity'><input id='editProductMarketOfferForm' type='button' value='Edit' style='cursor: pointer;'></form>"),$("#editProductMarketOfferForm").click(function(){newQuanty=$("#newQuanty").val(),$(this).parent().html("<img src='"+or+"' >"),$.ajax({type:"POST",url:"/citizenMarketOffers.html",async:!1,data:{id:deleteId[0],action:"DELETE_OFFER"}}),$.ajax({type:"POST",url:"/citizenMarketOffers.html",async:!1,data:{countryId:a,product:quality+"-"+type,price:String(qPrice),quantity:newQuanty,action:"POST_OFFER"}}),location.reload()})}),$(".editPrice").click(function(){numberpatt=/\d{1,30}/,Quanty=$(this).parent().prev().text().match(numberpatt);var e=$(this).parent().next(),t=e.children("div"),a=r(t.attr("class").split(" ")[1]);qPrice=$(this).parent().text().match(/\d{1,30}.\d{2}/),productcell=$(this).parent().prev().prev().prev().html(),quality=productcell.match(/q\d/),quality=quality[0].match(/\d/),termek=productcell.match(/productIcons\/\D.*.png/),type=termek[0].substr(13),type=type.substr(0,type.length-4),type=type.toUpperCase(),deleteId=$(this).parent().next().next().next().next().html().match(/\d{1,60}/),$(this).parent().html("<input id='newPrice' type='text' value='"+qPrice+"' min='1' style='width: 30px' class='digit quantityMyOffers' name='quantity' id='quantity'><input id='editProductMarketOfferForm' type='button' value='Edit' style='cursor: pointer;'></form>"),$("#editProductMarketOfferForm").click(function(){newPrice=$("#newPrice").val(),$(this).parent().html("<img src='"+or+"' >"),$.ajax({type:"POST",url:"/citizenMarketOffers.html",async:!1,data:{id:deleteId[0],action:"DELETE_OFFER"}}),$.ajax({type:"POST",url:"/citizenMarketOffers.html",async:!1,data:{countryId:a,product:quality+"-"+type,price:String(newPrice),quantity:Quanty[0],action:"POST_OFFER"}}),location.reload()})})}function C(){$(".dataTable").find("input[type='text']").addClass("inputTextTable");var e=$(".dataTable").find("input[type='submit']").addClass("inputSubmitTable"),t=$("<input class='buyAllSubmit' type='submit' value='All' />");t.bind("click",function(){var e=$(this).parent().parent().prev().prev().text().match(/\d{1,10}.\d{1,5}/);return $(this).parent().children("input[type='text']").val(e),!1}),t.insertBefore(e),$(".dataTable").addClass("dataTableMod"),$(".dataTable > tbody > tr:first-child > td").addClass("dataTableHeaders")}function x(){$(".dataTable:eq(1) tr").each(function(){$(this).parent().children().index($(this)),$(this).parent().parent().children().index($(this).parent());$(this).children("td:eq(0)").append("<a class='editQuanty'>Edit</a>"),$(this).children("td:eq(1)").append("<a class='editPrice'>Edit</a>")}),$(".editQuanty").click(function(){numberpatt=/\d{1,30}.\d\d/,Quanty=$(this).parent().text().match(numberpatt),SellCC=$(this).parent().text().match(/[a-zA-Z]{3,4}/),ratio=$(this).parent().next().text().match(/\d{1,10}.\d{1,4}/),BuyCC=$(this).parent().next().text().match(/[a-zA-Z]{3,4}/g)[1],href=$(this).parent().next().next().find("a").attr("href"),$(this).parent().html("<input id='newQuanty' type='text' value='"+Quanty+"' min='1' style='width: 30px' class='digit quantityMyOffers' name='quantity' id='quantity'><input id='editProductMarketOfferForm' type='button' value='Edit' style='cursor: pointer;'></form>"),$("#editProductMarketOfferForm").click(function(){newQuanty=$("#newQuanty").val(),$(this).parent().html("<img src='"+or+"' >"),$.ajax({type:"GET",url:"/monetaryMarket.html"+href,async:!1}),$.ajax({type:"POST",url:"/monetaryMarket.html?action=post",async:!1,data:{offeredMoneyId:i(SellCC),buyedMoneyId:i(BuyCC),value:newQuanty,exchangeRatio:String(ratio)}}),location.reload()})}),$(".editPrice").click(function(){numberpatt=/\d{1,30}.\d\d/,Quanty=$(this).parent().prev().text().match(numberpatt),SellCC=$(this).parent().prev().text().match(/[a-zA-Z]{3,4}/),ratio=$(this).parent().text().match(/\d{1,10}.\d{1,4}/),BuyCC=$(this).parent().text().match(/[a-zA-Z]{3,4}/g)[1],href=$(this).parent().next().find("a").attr("href"),$(this).parent().html("<input id='newratio' type='text' value='"+ratio+"' min='1' style='width: 30px' class='digit quantityMyOffers' name='quantity' id='quantity'><input id='editProductMarketOfferForm' type='button' value='Edit' style='cursor: pointer;'></form>"),$("#editProductMarketOfferForm").click(function(){newRatio=$("#newratio").val(),$(this).parent().html("<img src='"+or+"' >"),$.ajax({type:"GET",url:"/monetaryMarket.html"+href,async:!1}),$.ajax({type:"POST",url:"/monetaryMarket.html?action=post",async:!1,data:{offeredMoneyId:i(SellCC),buyedMoneyId:i(BuyCC),value:String(Quanty),exchangeRatio:String(newRatio)}}),location.reload()})})}function B(){var e=0,t=0;$(".dataTable:eq(0) tr:not(:first)").each(function(){amount=$(this).children("td:eq(1)").children("b").attr("title"),ratio=$(this).children("td:eq(2)").children("b").html();var a=/\d+ (\w{2,4}) = <b>[\d\.]+<\/b> (\w{2,4})/.exec($(this).children("td:eq(2)").html()),n=a[2],r=a[1];a=void 0,$(this).children("td:eq(1)").append("<br/> All: <b>"+Math.round(amount*ratio*100)/100+"</b> "+n),e=i(r),t=i(n)}),$.ajax({url:"/monetaryMarket.html?buyerCurrencyId="+t+"&sellerCurrencyId="+e,async:!1}).done(function(e){versus_offer=$(e).find(".dataTable:eq(0) tr:eq(1) td:eq(2)").html(),$(".dataTable:eq(0) tr:not(:first)").each(function(){$(this).children("td:eq(2)").append("<br/>"+versus_offer)})})}var I=new String(window.location),w="/battle.html?id=",G="/productMarket.html",F="/monetaryMarket.html",O="/citizenMarketOffers.html",D="/stockCompanyProducts.html?id=",E="/equipment.html",L="/newCitizenStatistics.html",A="/countryEconomyStatistics.html?countryId={1}",P="/monetaryMarket.html?buyerCurrencyId={1}&sellerCurrencyId=0",q="/militaryUnitDonations.html",R="/transactionLog.html",N="http://cdn.e-sim.org/img/productIcons/Iron.png",z="http://cdn.e-sim.org/img/productIcons/Grain.png",j="http://cdn.e-sim.org/img/productIcons/Oil.png",H="http://cdn.e-sim.org/img/productIcons/Diamonds.png",U="http://cdn.e-sim.org/img/productIcons/Wood.png",K="http://cdn.e-sim.org/img/productIcons/Stone.png",Q="http://cdn.e-sim.org/img/productIcons/Weapon.png",W="http://cdn.e-sim.org/img/productIcons/Food.png",Z="http://cdn.e-sim.org/img/productIcons/Ticket.png",V="http://cdn.e-sim.org/img/productIcons/Gift.png",_="http://cdn.e-sim.org/img/productIcons/House.png",Y="https://dl.dropboxusercontent.com/u/67548179/esim-ED/img/Defense_System.png",J="http://cdn.e-sim.org/img/productIcons/Hospital.png",X="http://cdn.e-sim.org/img/productIcons/Estate.png",et="http://cdn.e-sim.org/img/productIcons/q",tt=".png",at="Benin",nt="Papua-New-Guinea",rt="Angola",it="Cambodia",st="Sudan",ct="East-Timor",ot="Paraguay",lt="Kazakhstan",dt="Portugal",ut="Syria",pt="Bahamas",ft="Solomon-Islands",ht="North-Korea",mt="Greece",gt="Latvia",$t="Mongolia",vt="Iran",yt="Morocco",St="Mali",bt="Panama",Mt="Guatemala",Tt="Guyana",kt="Iraq",Ct="Chile",xt="Laos",Bt="Nepal",It="The-Gambia",wt="Argentina",Gt="Ukraine",Ft="Tanzania",Ot="Ghana",Dt="Zambia",Et="Belize",Lt="Bahrain",At="Congo",Pt="India",qt="Canada",Rt="Turkey",Nt="Belgium",zt="Namibia",jt="Taiwan",Ht="Finland",Ut="South-Africa",Kt="Central-African-Republic",Qt="Georgia",Wt="Jamaica",Zt="Peru",Vt="Turkmenistan",_t="Germany",Yt="Yemen",Jt="Eritrea",Xt="Puerto-Rico",ea="Guinea",ta="Chad",aa="Somalia",na="Madagascar",ra="Ivory-Coast",ia="Thailand",sa="Libya",ca="Equatorial-Guinea",oa="Costa-Rica",la="Adminland",da="Sweden",ua="Vietnam",pa="Malawi",fa="Poland",ha="Bulgaria",ma="Nigeria",ga="Jordan",$a="Kuwait",va="Tunisia",ya="Croatia",Sa="USA",ba="Uruguay",Ma="Sri-Lanka",Ta="United-Kingdom",ka="United-Arab-Emirates",Ca="Kenya",xa="Switzerland",Ba="Spain",Ia="Djibouti",wa="Lebanon",Ga="Venezuela",Fa="Liberia",Oa="Azerbaijan",Da="Cuba",Ea="Czech-Republic",La="Burkina-Faso",Aa="Mauritania",Pa="Swaziland",qa="Republic-of-Macedonia",Ra="Israel",Na="Australia",za="DR-of-the-Congo",ja="Tajikistan",Ha="Estonia",Ua="Myanmar",Ka="Cameroon",Qa="Cyprus",Wa="Malaysia",Za="Oman",Va="Iceland",_a="Armenia",Ya="Gabon",Ja="South-Korea",Xa="Austria",en="Mozambique",tn="El-Salvador",an="Brazil",nn="Algeria",rn="Slovenia",sn="Lesotho",cn="Colombia",on="Western-Sahara",ln="Ecuador",dn="Hungary",un="South-Sudan",pn="Japan",fn="Moldova",hn="Belarus",mn="Albania",gn="New-Zealand",$n="Vanuatu",vn="Senegal",yn="Guinea-Bissau",Sn="Italy",bn="Honduras",Mn="Ethiopia",Tn="Haiti",kn="Burundi",Cn="Afghanistan",xn="Egypt",Bn="Sierra-Leone",In="Bolivia",wn="Russia",Gn="Saudi-Arabia",Fn="Netherlands",On="Pakistan",Dn="Kosovo",En="China",Ln="Ireland",An="Qatar",Pn="Slovakia",qn="France",Rn="Serbia",Nn="Lithuania",zn="Bosnia-and-Herzegovina",jn="Kyrgyzstan",Hn="Bhutan",Un="Romania",Kn="Togo",Qn="Niger",Wn="Philippines",Zn="Rwanda",Vn="Uzbekistan",_n="Bangladesh",Yn="Nicaragua",Jn="Norway",Xn="Botswana",er="Denmark",tr="Dominican-Republic",ar="Mexico",nr="Uganda",rr="Zimbabwe",ir="Suriname",sr="Montenegro",cr="Indonesia",or="https://dl.dropboxusercontent.com/u/67548179/esim-ED/img/WorkInProgress.gif";e()&&(l(),I.indexOf(q,0)>=0?$.jStorage.get("SGMUDonationsLogMode",!1)&&d():I.indexOf(R,0)>=0?$.jStorage.get("SGTransactionLogMode",!1)&&u():I.indexOf(E,0)>=0?$.jStorage.get("SGEquipmentFastMode",!0)&&p():I.indexOf(G,0)>=0?($.jStorage.get("SGChangeProductMarketTable",!0)&&s(),$.jStorage.get("SGDisplayGoldValue",!0)&&o()):I.indexOf(O,0)>=0?($.jStorage.get("SGChangeMarketOffers",!0)&&M(),$.jStorage.get("SGEditOffers",!0)&&k()):I.indexOf(F,0)>=0?($.jStorage.get("SGChangeMonetaryMarketTable",!0)&&C(),$.jStorage.get("SGMonetaryMarketPriceEdit",!0)&&x(),$.jStorage.get("SGMonetaryMarketPriceRatio",!0)&&B()):I.indexOf(w,0)>=0?(0==$("#totalattackers").length&&f(),$.jStorage.get("SGBattleStatsMinimizeMode",!0)&&h(),$.jStorage.get("SGModalWindowFuncMode",!0)&&m(),$.jStorage.get("SGSpectatorMode",!0)&&g(),$.jStorage.get("SGDemoralizatorMode",!1)&&v()):I.indexOf(L,0)>=0&&$.jStorage.get("SGMotivationMode",!0)&&y())});